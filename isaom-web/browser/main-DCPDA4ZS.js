import{$ as xi,$a as Li,A as lo,Aa as Re,Ab as Om,B as yn,Ba as qs,Bb as al,C as Kc,Ca as Tn,Cb as _o,D as em,Da as Tt,Db as Pm,E as Kt,Ea as En,Eb as Mm,F as tm,Fa as me,Fb as km,G as ki,Ga as Fi,Gb as cl,H as nm,Ha as Vi,Hb as yo,I as im,Ia as lt,Ib as Nm,J as Ni,Ja as he,Jb as Ct,K as Qc,Ka as Te,Kb as xm,L as sm,La as Ve,Lb as ll,M as Jc,Ma as In,Mb as ul,N as rm,Na as Sn,Nb as hl,O as Yc,Oa as An,Ob as ei,P as Yn,Pa as fm,Pb as Fm,Q as Ge,Qa as st,Qb as _e,R as Qt,Ra as Me,Rb as Vm,S as $s,Sa as pm,T as te,Ta as mm,U as js,Ua as gm,V as fe,Va as _m,W as Y,Wa as ym,X as se,Xa as Le,Y as q,Ya as Hs,Z as ce,Za as Dt,_ as qe,_a as zs,a as K,aa as gt,ab as il,b as de,ba as X,bb as Ws,c as Wp,ca as bt,cb as Ks,d as _n,da as ct,db as sl,e as b,ea as Xc,eb as vm,f as pt,fa as uo,fb as wm,g as Pe,ga as vn,gb as Bi,h as Kp,ha as wn,hb as bm,i as Qp,ia as Gs,ib as fo,j as oo,ja as He,jb as rl,k as ao,ka as ho,kb as Jt,l as Hc,la as Xn,lb as Tm,m as Us,ma as bn,mb as Em,n as zc,na as Zc,nb as Zn,o as Mi,oa as el,ob as po,p as mt,pa as om,pb as Qs,q as Jp,qa as tl,qb as Im,r as Ae,ra as am,rb as Sm,s as Wc,sa as cm,sb as Ui,t as co,ta as le,tb as Am,u as Yp,ua as ue,ub as mo,v as Wt,va as lm,vb as go,w as Xp,wa as um,wb as Dm,x as Jn,xa as hm,xb as Cm,y as Qe,ya as dm,yb as ol,z as Zp,za as nl,zb as Rm}from"./chunk-7WE2Q5GX.js";var Q=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Q||{}),Rt="*";function Lm(n,e){return{type:Q.Trigger,name:n,definitions:e,options:{}}}function dl(n,e=null){return{type:Q.Animate,styles:e,timings:n}}function Bm(n,e=null){return{type:Q.Sequence,steps:n,options:e}}function ti(n){return{type:Q.Style,styles:n,offset:null}}function vo(n,e,t){return{type:Q.State,name:n,styles:e,options:t}}function fl(n,e,t=null){return{type:Q.Transition,expr:n,animation:e,options:t}}var Dn=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Js=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,s=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==r&&this._onFinish()}),a.onDestroy(()=>{++i==r&&this._onDestroy()}),a.onStart(()=>{++s==r&&this._onStart()})}),this.totalTime=this.players.reduce((a,c)=>Math.max(a,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},wo="!";function Um(n){return new te(3e3,!1)}function c1(){return new te(3100,!1)}function l1(){return new te(3101,!1)}function u1(n){return new te(3001,!1)}function h1(n){return new te(3003,!1)}function d1(n){return new te(3004,!1)}function f1(n,e){return new te(3005,!1)}function p1(){return new te(3006,!1)}function m1(){return new te(3007,!1)}function g1(n,e){return new te(3008,!1)}function _1(n){return new te(3002,!1)}function y1(n,e,t,i,s){return new te(3010,!1)}function v1(){return new te(3011,!1)}function w1(){return new te(3012,!1)}function b1(){return new te(3200,!1)}function T1(){return new te(3202,!1)}function E1(){return new te(3013,!1)}function I1(n){return new te(3014,!1)}function S1(n){return new te(3015,!1)}function A1(n){return new te(3016,!1)}function D1(n,e){return new te(3404,!1)}function C1(n){return new te(3502,!1)}function R1(n){return new te(3503,!1)}function O1(){return new te(3300,!1)}function P1(n){return new te(3504,!1)}function M1(n){return new te(3301,!1)}function k1(n,e){return new te(3302,!1)}function N1(n){return new te(3303,!1)}function x1(n,e){return new te(3400,!1)}function F1(n){return new te(3401,!1)}function V1(n){return new te(3402,!1)}function L1(n,e){return new te(3505,!1)}function Cn(n){switch(n.length){case 0:return new Dn;case 1:return n[0];default:return new Js(n)}}function eg(n,e,t=new Map,i=new Map){let s=[],r=[],a=-1,c=null;if(e.forEach(l=>{let h=l.get("offset"),f=h==a,m=f&&c||new Map;l.forEach((v,A)=>{let D=A,R=v;if(A!=="offset")switch(D=n.normalizePropertyName(D,s),R){case wo:R=t.get(A);break;case Rt:R=i.get(A);break;default:R=n.normalizeStyleValue(A,D,R,s);break}m.set(D,R)}),f||r.push(m),c=m,a=h}),s.length)throw C1(s);return r}function Fl(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&pl(t,"start",n)));break;case"done":n.onDone(()=>i(t&&pl(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&pl(t,"destroy",n)));break}}function pl(n,e,t){let i=t.totalTime,s=!!t.disabled,r=Vl(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,s),a=n._data;return a!=null&&(r._data=a),r}function Vl(n,e,t,i,s="",r=0,a){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:r,disabled:!!a}}function ht(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function $m(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var B1=typeof document>"u"?null:document.documentElement;function Ll(n){let e=n.parentNode||n.host||null;return e===B1?null:e}function U1(n){return n.substring(1,6)=="ebkit"}var ni=null,jm=!1;function $1(n){ni||(ni=j1()||{},jm=ni.style?"WebkitAppearance"in ni.style:!1);let e=!0;return ni.style&&!U1(n)&&(e=n in ni.style,!e&&jm&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ni.style)),e}function j1(){return typeof document<"u"?document.body:null}function tg(n,e){for(;e;){if(e===n)return!0;e=Ll(e)}return!1}function ng(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var Bl=(()=>{let e=class e{validateStyleProperty(i){return $1(i)}matchesElement(i,s){return!1}containsElement(i,s){return tg(i,s)}getParentElement(i){return Ll(i)}query(i,s,r){return ng(i,s,r)}computeStyle(i,s,r){return r||""}animate(i,s,r,a,c,l=[],h){return new Dn(r,a)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),Gl=class Gl{};Gl.NOOP=new Bl;var ri=Gl,oi=class{};var G1=1e3,ig="{{",q1="}}",sg="ng-enter",wl="ng-leave",bo="ng-trigger",Ao=".ng-trigger",Gm="ng-animating",bl=".ng-animating";function Yt(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Tl(parseFloat(e[1]),e[2])}function Tl(n,e){switch(e){case"s":return n*G1;default:return n}}function Do(n,e,t){return n.hasOwnProperty("duration")?n:H1(n,e,t)}function H1(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,s,r=0,a="";if(typeof n=="string"){let c=n.match(i);if(c===null)return e.push(Um(n)),{duration:0,delay:0,easing:""};s=Tl(parseFloat(c[1]),c[2]);let l=c[3];l!=null&&(r=Tl(parseFloat(l),c[4]));let h=c[5];h&&(a=h)}else s=n;if(!t){let c=!1,l=e.length;s<0&&(e.push(c1()),c=!0),r<0&&(e.push(l1()),c=!0),c&&e.splice(l,0,Um(n))}return{duration:s,delay:r,easing:a}}function z1(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ot(n,e,t){e.forEach((i,s)=>{let r=Ul(s);t&&!t.has(s)&&t.set(s,n.style[r]),n.style[r]=i})}function si(n,e){e.forEach((t,i)=>{let s=Ul(i);n.style[s]=""})}function Ys(n){return Array.isArray(n)?n.length==1?n[0]:Bm(n):n}function W1(n,e,t){let i=e.params||{},s=rg(n);s.length&&s.forEach(r=>{i.hasOwnProperty(r)||t.push(u1(r))})}var El=new RegExp(`${ig}\\s*(.+?)\\s*${q1}`,"g");function rg(n){let e=[];if(typeof n=="string"){let t;for(;t=El.exec(n);)e.push(t[1]);El.lastIndex=0}return e}function Zs(n,e,t){let i=`${n}`,s=i.replace(El,(r,a)=>{let c=e[a];return c==null&&(t.push(h1(a)),c=""),c.toString()});return s==i?n:s}var K1=/-+([a-z0-9])/g;function Ul(n){return n.replace(K1,(...e)=>e[1].toUpperCase())}function Q1(n,e){return n===0||e===0}function J1(n,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((r,a)=>{i.has(a)||s.push(a),i.set(a,r)}),s.length)for(let r=1;r<e.length;r++){let a=e[r];s.forEach(c=>a.set(c,$l(n,c)))}}return e}function ut(n,e,t){switch(e.type){case Q.Trigger:return n.visitTrigger(e,t);case Q.State:return n.visitState(e,t);case Q.Transition:return n.visitTransition(e,t);case Q.Sequence:return n.visitSequence(e,t);case Q.Group:return n.visitGroup(e,t);case Q.Animate:return n.visitAnimate(e,t);case Q.Keyframes:return n.visitKeyframes(e,t);case Q.Style:return n.visitStyle(e,t);case Q.Reference:return n.visitReference(e,t);case Q.AnimateChild:return n.visitAnimateChild(e,t);case Q.AnimateRef:return n.visitAnimateRef(e,t);case Q.Query:return n.visitQuery(e,t);case Q.Stagger:return n.visitStagger(e,t);default:throw d1(e.type)}}function $l(n,e){return window.getComputedStyle(n)[e]}var Y1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Co=class extends oi{normalizePropertyName(e,t){return Ul(e)}normalizeStyleValue(e,t,i,s){let r="",a=i.toString().trim();if(Y1.has(t)&&i!==0&&i!=="0")if(typeof i=="number")r="px";else{let c=i.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&c[1].length==0&&s.push(f1(e,i))}return a+r}};var Ro="*";function X1(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Z1(i,t,e)):t.push(n),t}function Z1(n,e,t){if(n[0]==":"){let l=eb(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(S1(n)),e;let s=i[1],r=i[2],a=i[3];e.push(qm(s,a));let c=s==Ro&&a==Ro;r[0]=="<"&&!c&&e.push(qm(a,s))}function eb(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(A1(n)),"* => *"}}var To=new Set(["true","1"]),Eo=new Set(["false","0"]);function qm(n,e){let t=To.has(n)||Eo.has(n),i=To.has(e)||Eo.has(e);return(s,r)=>{let a=n==Ro||n==s,c=e==Ro||e==r;return!a&&t&&typeof s=="boolean"&&(a=s?To.has(n):Eo.has(n)),!c&&i&&typeof r=="boolean"&&(c=r?To.has(e):Eo.has(e)),a&&c}}var og=":self",tb=new RegExp(`s*${og}s*,?`,"g");function ag(n,e,t,i){return new Il(n).build(e,t,i)}var Hm="",Il=class{constructor(e){this._driver=e}build(e,t,i){let s=new Sl(t);return this._resetContextStyleTimingState(s),ut(this,Ys(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector=Hm,e.collectedStyles=new Map,e.collectedStyles.set(Hm,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0,r=[],a=[];return e.name.charAt(0)=="@"&&t.errors.push(p1()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),c.type==Q.State){let l=c,h=l.name;h.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,r.push(this.visitState(l,t))}),l.name=h}else if(c.type==Q.Transition){let l=this.visitTransition(c,t);i+=l.queryCount,s+=l.depCount,a.push(l)}else t.errors.push(m1())}),{type:Q.Trigger,name:e.name,states:r,transitions:a,queryCount:i,depCount:s,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){let r=new Set,a=s||{};i.styles.forEach(c=>{c instanceof Map&&c.forEach(l=>{rg(l).forEach(h=>{a.hasOwnProperty(h)||r.add(h)})})}),r.size&&t.errors.push(g1(e.name,[...r.values()]))}return{type:Q.State,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=ut(this,Ys(e.animation),t),s=X1(e.expr,t.errors);return{type:Q.Transition,matchers:s,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ii(e.options)}}visitSequence(e,t){return{type:Q.Sequence,steps:e.steps.map(i=>ut(this,i,t)),options:ii(e.options)}}visitGroup(e,t){let i=t.currentTime,s=0,r=e.steps.map(a=>{t.currentTime=i;let c=ut(this,a,t);return s=Math.max(s,t.currentTime),c});return t.currentTime=s,{type:Q.Group,steps:r,options:ii(e.options)}}visitAnimate(e,t){let i=rb(e.timings,t.errors);t.currentAnimateTimings=i;let s,r=e.styles?e.styles:ti({});if(r.type==Q.Keyframes)s=this.visitKeyframes(r,t);else{let a=e.styles,c=!1;if(!a){c=!0;let h={};i.easing&&(h.easing=i.easing),a=ti(h)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(a,t);l.isEmptyStep=c,s=l}return t.currentAnimateTimings=null,{type:Q.Animate,timings:i,style:s,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of s)typeof c=="string"?c===Rt?i.push(c):t.errors.push(_1(c)):i.push(new Map(Object.entries(c)));let r=!1,a=null;return i.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(a=c.get("easing"),c.delete("easing")),!r)){for(let l of c.values())if(l.toString().indexOf(ig)>=0){r=!0;break}}}),{type:Q.Style,styles:i,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,s=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(a=>{typeof a!="string"&&a.forEach((c,l)=>{let h=t.collectedStyles.get(t.currentQuerySelector),f=h.get(l),m=!0;f&&(r!=s&&r>=f.startTime&&s<=f.endTime&&(t.errors.push(y1(l,f.startTime,f.endTime,r,s)),m=!1),r=f.startTime),m&&h.set(l,{startTime:r,endTime:s}),t.options&&W1(c,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:Q.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(v1()),i;let s=1,r=0,a=[],c=!1,l=!1,h=0,f=e.steps.map(F=>{let L=this._makeStyleAst(F,t),U=L.offset!=null?L.offset:sb(L.styles),P=0;return U!=null&&(r++,P=L.offset=U),l=l||P<0||P>1,c=c||P<h,h=P,a.push(P),L});l&&t.errors.push(w1()),c&&t.errors.push(b1());let m=e.steps.length,v=0;r>0&&r<m?t.errors.push(T1()):r==0&&(v=s/(m-1));let A=m-1,D=t.currentTime,R=t.currentAnimateTimings,O=R.duration;return f.forEach((F,L)=>{let U=v>0?L==A?1:v*L:a[L],P=U*O;t.currentTime=D+R.delay+P,R.duration=P,this._validateStyleAst(F,t),F.offset=U,i.styles.push(F)}),i}visitReference(e,t){return{type:Q.Reference,animation:ut(this,Ys(e.animation),t),options:ii(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:Q.AnimateChild,options:ii(e.options)}}visitAnimateRef(e,t){return{type:Q.AnimateRef,animation:this.visitReference(e.animation,t),options:ii(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;let[r,a]=nb(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,ht(t.collectedStyles,t.currentQuerySelector,new Map);let c=ut(this,Ys(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:Q.Query,selector:r,limit:s.limit||0,optional:!!s.optional,includeSelf:a,animation:c,originalSelector:e.selector,options:ii(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(E1());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Do(e.timings,t.errors,!0);return{type:Q.Stagger,animation:ut(this,Ys(e.animation),t),timings:i,options:null}}};function nb(n){let e=!!n.split(/\s*,\s*/).find(t=>t==og);return e&&(n=n.replace(tb,"")),n=n.replace(/@\*/g,Ao).replace(/@\w+/g,t=>Ao+"-"+t.slice(1)).replace(/:animating/g,bl),[n,e]}function ib(n){return n?K({},n):null}var Sl=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function sb(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function rb(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let r=Do(n,e).duration;return ml(r,0,"")}let t=n;if(t.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=ml(0,0,"");return r.dynamic=!0,r.strValue=t,r}let s=Do(t,e);return ml(s.duration,s.delay,s.easing)}function ii(n){return n?(n=K({},n),n.params&&(n.params=ib(n.params))):n={},n}function ml(n,e,t){return{duration:n,delay:e,easing:t}}function jl(n,e,t,i,s,r,a=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:a,subTimeline:c}}var er=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},ob=1,ab=":enter",cb=new RegExp(ab,"g"),lb=":leave",ub=new RegExp(lb,"g");function cg(n,e,t,i,s,r=new Map,a=new Map,c,l,h=[]){return new Al().buildKeyframes(n,e,t,i,s,r,a,c,l,h)}var Al=class{buildKeyframes(e,t,i,s,r,a,c,l,h,f=[]){h=h||new er;let m=new Dl(e,t,h,s,r,f,[]);m.options=l;let v=l.delay?Yt(l.delay):0;m.currentTimeline.delayNextStep(v),m.currentTimeline.setStyles([a],null,m.errors,l),ut(this,i,m);let A=m.timelines.filter(D=>D.containsAnimation());if(A.length&&c.size){let D;for(let R=A.length-1;R>=0;R--){let O=A[R];if(O.element===t){D=O;break}}D&&!D.allowOnlyTimelineStyles()&&D.setStyles([c],null,m.errors,l)}return A.length?A.map(D=>D.buildKeyframes()):[jl(t,[],[],[],0,v,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let s=t.createSubContext(e.options),r=t.currentTimeline.currentTime,a=this._visitSubInstructions(i,s,s.options);r!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let s of e){let r=s?.delay;if(r){let a=typeof r=="number"?r:Yt(Zs(r,s?.params??{},t.errors));i.delayNextStep(a)}}}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime,a=i.duration!=null?Yt(i.duration):null,c=i.delay!=null?Yt(i.delay):null;return a!==0&&e.forEach(l=>{let h=t.appendInstructionToTimeline(l,a,c);r=Math.max(r,h.duration+h.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),ut(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,s=t,r=e.options;if(r&&(r.params||r.delay)&&(s=t.createSubContext(r),s.transformIntoNewTimeline(),r.delay!=null)){s.previousNode.type==Q.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=Oo);let a=Yt(r.delay);s.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>ut(this,a,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],s=t.currentTimeline.currentTime,r=e.options&&e.options.delay?Yt(e.options.delay):0;e.steps.forEach(a=>{let c=t.createSubContext(e.options);r&&c.delayNextStep(r),ut(this,a,c),s=Math.max(s,c.currentTimeline.currentTime),i.push(c.currentTimeline)}),i.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,s=t.params?Zs(i,t.params,t.errors):i;return Do(s,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());let r=e.style;r.type==Q.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();let r=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,s=t.currentTimeline.duration,r=i.duration,c=t.createSubContext().currentTimeline;c.easing=i.easing,e.styles.forEach(l=>{let h=l.offset||0;c.forwardTime(h*r),c.setStyles(l.styles,l.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(s+r),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,s=e.options||{},r=s.delay?Yt(s.delay):0;r&&(t.previousNode.type===Q.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Oo);let a=i,c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=c.length;let l=null;c.forEach((h,f)=>{t.currentQueryIndex=f;let m=t.createSubContext(e.options,h);r&&m.delayNextStep(r),h===t.element&&(l=m.currentTimeline),ut(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe();let v=m.currentTimeline.currentTime;a=Math.max(a,v)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,s=t.currentTimeline,r=e.timings,a=Math.abs(r.duration),c=a*(t.currentQueryTotal-1),l=a*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=c-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let m=f.currentTime;ut(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-m+(s.startTime-i.currentTimeline.startTime)}},Oo={},Dl=class n{constructor(e,t,i,s,r,a,c,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=r,this.errors=a,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Po(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,s=this.options;i.duration!=null&&(s.duration=Yt(i.duration)),i.delay!=null&&(s.delay=Yt(i.delay));let r=i.params;if(r){let a=s.params;a||(a=this.options.params={}),Object.keys(r).forEach(c=>{(!t||!a.hasOwnProperty(c))&&(a[c]=Zs(r[c],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){let s=t||this.element,r=new n(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=Oo,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},r=new Cl(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(r),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,r,a){let c=[];if(s&&c.push(this.element),e.length>0){e=e.replace(cb,"."+this._enterClassName),e=e.replace(ub,"."+this._leaveClassName);let l=i!=1,h=this._driver.query(this.element,e,l);i!==0&&(h=i<0?h.slice(h.length+i,h.length):h.slice(0,i)),c.push(...h)}return!r&&c.length==0&&a.push(I1(t)),c}},Po=class n{constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ob,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Rt),this._currentKeyframe.set(t,Rt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&this._previousKeyframe.set("easing",t);let r=s&&s.params||{},a=hb(e,this._globalTimelineStyles);for(let[c,l]of a){let h=Zs(l,r,i);this._pendingStyles.set(c,h),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)??Rt),this._updateStyle(c,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,s=[];this._keyframes.forEach((c,l)=>{let h=new Map([...this._backFill,...c]);h.forEach((f,m)=>{f===wo?e.add(m):f===Rt&&t.add(m)}),i||h.set("offset",l/this.duration),s.push(h)});let r=[...e.values()],a=[...t.values()];if(i){let c=s[0],l=new Map(c);c.set("offset",0),l.set("offset",1),s=[c,l]}return jl(this.element,s,r,a,this.duration,this.startTime,this.easing,!1)}},Cl=class extends Po{constructor(e,t,i,s,r,a,c=!1){super(e,t,a.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=r,this._stretchStartingKeyframe=c,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){let r=[],a=i+t,c=t/a,l=new Map(e[0]);l.set("offset",0),r.push(l);let h=new Map(e[0]);h.set("offset",zm(c)),r.push(h);let f=e.length-1;for(let m=1;m<=f;m++){let v=new Map(e[m]),A=v.get("offset"),D=t+A*i;v.set("offset",zm(D/a)),r.push(v)}i=a,t=0,s="",e=r}return jl(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}};function zm(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function hb(n,e){let t=new Map,i;return n.forEach(s=>{if(s==="*"){i??=e.keys();for(let r of i)t.set(r,Rt)}else for(let[r,a]of s)t.set(r,a)}),t}function Wm(n,e,t,i,s,r,a,c,l,h,f,m,v){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:r,toState:i,toStyles:a,timelines:c,queriedElements:l,preStyleProps:h,postStyleProps:f,totalTime:m,errors:v}}var gl={},Mo=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return db(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return e!==void 0&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,r,a,c,l,h,f){let m=[],v=this.ast.options&&this.ast.options.params||gl,A=c&&c.params||gl,D=this.buildStyles(i,A,m),R=l&&l.params||gl,O=this.buildStyles(s,R,m),F=new Set,L=new Map,U=new Map,P=s==="void",z={params:lg(R,v),delay:this.ast.options?.delay},x=f?[]:cg(e,t,this.ast.animation,r,a,D,O,z,h,m),w=0;return x.forEach(g=>{w=Math.max(g.duration+g.delay,w)}),m.length?Wm(t,this._triggerName,i,s,P,D,O,[],[],L,U,w,m):(x.forEach(g=>{let _=g.element,T=ht(L,_,new Set);g.preStyleProps.forEach(S=>T.add(S));let E=ht(U,_,new Set);g.postStyleProps.forEach(S=>E.add(S)),_!==t&&F.add(_)}),Wm(t,this._triggerName,i,s,P,D,O,x,[...F.values()],L,U,w))}};function db(n,e,t,i,s){return n.some(r=>r(e,t,i,s))}function lg(n,e){let t=K({},e);return Object.entries(n).forEach(([i,s])=>{s!=null&&(t[i]=s)}),t}var Rl=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,s=lg(e,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((a,c)=>{a&&(a=Zs(a,s,t));let l=this.normalizer.normalizePropertyName(c,t);a=this.normalizer.normalizeStyleValue(c,l,a,t),i.set(c,a)})}),i}};function fb(n,e,t){return new Ol(n,e,t)}var Ol=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{let r=s.options&&s.options.params||{};this.states.set(s.name,new Rl(s.style,r,i))}),Km(this.states,"true","1"),Km(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Mo(e,s,this.states))}),this.fallbackTransition=pb(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(a=>a.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function pb(n,e,t){let i=[(a,c)=>!0],s={type:Q.Sequence,steps:[],options:null},r={type:Q.Transition,animation:s,matchers:i,options:null,queryCount:0,depCount:0};return new Mo(n,r,e)}function Km(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var mb=new er,Pl=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],s=[],r=ag(this._driver,t,i,s);if(i.length)throw R1(i);s.length&&void 0,this._animations.set(e,r)}_buildPlayer(e,t,i){let s=e.element,r=eg(this._normalizer,e.keyframes,t,i);return this._driver.animate(s,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let s=[],r=this._animations.get(e),a,c=new Map;if(r?(a=cg(this._driver,t,r,sg,wl,new Map,new Map,i,mb,s),a.forEach(f=>{let m=ht(c,f.element,new Map);f.postStyleProps.forEach(v=>m.set(v,null))})):(s.push(O1()),a=[]),s.length)throw P1(s);c.forEach((f,m)=>{f.forEach((v,A)=>{f.set(A,this._driver.computeStyle(m,A,Rt))})});let l=a.map(f=>{let m=c.get(f.element);return this._buildPlayer(f,new Map,m)}),h=Cn(l);return this._playersById.set(e,h),h.onDestroy(()=>this.destroy(e)),this.players.push(h),h}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw M1(e);return t}listen(e,t,i,s){let r=Vl(t,"","","");return Fl(this._getPlayer(e),i,r,s),()=>{}}command(e,t,i,s){if(i=="register"){this.register(e,s[0]);return}if(i=="create"){let a=s[0]||{};this.create(e,t,a);return}let r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e);break}}},Qm="ng-animate-queued",gb=".ng-animate-queued",_l="ng-animate-disabled",_b=".ng-animate-disabled",yb="ng-star-inserted",vb=".ng-star-inserted",wb=[],ug={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bb={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Et="__ng_removed",tr=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),s=i?e.value:e;if(this.value=Eb(s),i){let r=e,{value:a}=r,c=Wp(r,["value"]);this.options=c}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(s=>{i[s]==null&&(i[s]=t[s])})}}},Xs="void",yl=new tr(Xs),Ml=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,_t(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw k1(i,t);if(i==null||i.length==0)throw N1(t);if(!Ib(i))throw x1(i,t);let r=ht(this._elementListeners,e,[]),a={name:t,phase:i,callback:s};r.push(a);let c=ht(this._engine.statesByElement,e,new Map);return c.has(t)||(_t(e,bo),_t(e,bo+"-"+t),c.set(t,yl)),()=>{this._engine.afterFlush(()=>{let l=r.indexOf(a);l>=0&&r.splice(l,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw F1(e);return t}trigger(e,t,i,s=!0){let r=this._getTrigger(t),a=new nr(this.id,t,e),c=this._engine.statesByElement.get(e);c||(_t(e,bo),_t(e,bo+"-"+t),this._engine.statesByElement.set(e,c=new Map));let l=c.get(t),h=new tr(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&h.absorbOptions(l.options),c.set(t,h),l||(l=yl),!(h.value===Xs)&&l.value===h.value){if(!Db(l.params,h.params)){let R=[],O=r.matchStyles(l.value,l.params,R),F=r.matchStyles(h.value,h.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{si(e,O),Ot(e,F)})}return}let v=ht(this._engine.playersByElement,e,[]);v.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let A=r.matchTransition(l.value,h.value,e,h.params),D=!1;if(!A){if(!s)return;A=r.fallbackTransition,D=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:A,fromState:l,toState:h,player:a,isFallbackTransition:D}),D||(_t(e,Qm),a.onStart(()=>{$i(e,Qm)})),a.onDone(()=>{let R=this.players.indexOf(a);R>=0&&this.players.splice(R,1);let O=this._engine.playersByElement.get(e);if(O){let F=O.indexOf(a);F>=0&&O.splice(F,1)}}),this.players.push(a),v.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Ao,!0);i.forEach(s=>{if(s[Et])return;let r=this._engine.fetchNamespacesByElement(s);r.size?r.forEach(a=>a.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){let r=this._engine.statesByElement.get(e),a=new Map;if(r){let c=[];if(r.forEach((l,h)=>{if(a.set(h,l.value),this._triggers.has(h)){let f=this.trigger(e,h,Xs,s);f&&c.push(f)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),i&&Cn(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let s=new Set;t.forEach(r=>{let a=r.name;if(s.has(a))return;s.add(a);let l=this._triggers.get(a).fallbackTransition,h=i.get(a)||yl,f=new tr(Xs),m=new nr(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:l,fromState:h,toState:f,player:m,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){let r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)s=!0;else{let a=e;for(;a=a.parentNode;)if(i.statesByElement.get(a)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{let r=e[Et];(!r||r===ug)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){_t(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let s=i.player;if(s.destroyed)return;let r=i.element,a=this._elementListeners.get(r);a&&a.forEach(c=>{if(c.name==i.triggerName){let l=Vl(r,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Fl(i.player,c.phase,l,c.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{let r=i.transition.ast.depCount,a=s.transition.ast.depCount;return r==0||a==0?r-a:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},kl=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i,s){this.bodyNode=e,this.driver=t,this._normalizer=i,this.scheduler=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Ml(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let a=!1,c=this.driver.getParentElement(t);for(;c;){let l=s.get(c);if(l){let h=i.indexOf(l);i.splice(h+1,0,e),a=!0;break}c=this.driver.getParentElement(c)}a||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let s of i.values())if(s.namespaceId){let r=this._fetchNamespace(s.namespaceId);r&&t.add(r)}}return t}trigger(e,t,i,s){if(Io(t)){let r=this._fetchNamespace(e);if(r)return r.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!Io(t))return;let r=t[Et];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){let a=this._fetchNamespace(e);a&&a.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),_t(e,_l)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$i(e,_l))}removeNode(e,t,i){if(Io(t)){this.scheduler?.notify();let s=e?this._fetchNamespace(e):null;s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let r=this.namespacesByHostElement.get(t);r&&r.id!==e&&r.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,s,r){this.collectedLeaveElements.push(t),t[Et]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,s,r){return Io(t)?this._fetchNamespace(e).listen(t,i,s,r):()=>{}}_buildInstruction(e,t,i,s,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,Ao,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,bl,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cn(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Et];if(t&&t.setForRemoval){if(e[Et]=ug,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(_l)&&this.markElementAsDisabled(e,!1),this.driver.query(e,_b,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let s=this.collectedEnterElements[i];_t(s,yb)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let s=this.collectedLeaveElements[i];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Cn(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw V1(e)}_flushAnimations(e,t){let i=new er,s=[],r=new Map,a=[],c=new Map,l=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(V=>{f.add(V);let $=this.driver.query(V,gb,!0);for(let j=0;j<$.length;j++)f.add($[j])});let m=this.bodyNode,v=Array.from(this.statesByElement.keys()),A=Xm(v,this.collectedEnterElements),D=new Map,R=0;A.forEach((V,$)=>{let j=sg+R++;D.set($,j),V.forEach(ee=>_t(ee,j))});let O=[],F=new Set,L=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){let $=this.collectedLeaveElements[V],j=$[Et];j&&j.setForRemoval&&(O.push($),F.add($),j.hasAnimation?this.driver.query($,vb,!0).forEach(ee=>F.add(ee)):L.add($))}let U=new Map,P=Xm(v,Array.from(F));P.forEach((V,$)=>{let j=wl+R++;U.set($,j),V.forEach(ee=>_t(ee,j))}),e.push(()=>{A.forEach((V,$)=>{let j=D.get($);V.forEach(ee=>$i(ee,j))}),P.forEach((V,$)=>{let j=U.get($);V.forEach(ee=>$i(ee,j))}),O.forEach(V=>{this.processLeaveNode(V)})});let z=[],x=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(t).forEach(j=>{let ee=j.player,Ce=j.element;if(z.push(ee),this.collectedEnterElements.length){let Ie=Ce[Et];if(Ie&&Ie.setForMove){if(Ie.previousTriggersValues&&Ie.previousTriggersValues.has(j.triggerName)){let Gt=Ie.previousTriggersValues.get(j.triggerName),it=this.statesByElement.get(j.element);if(it&&it.has(j.triggerName)){let qt=it.get(j.triggerName);qt.value=Gt,it.set(j.triggerName,qt)}}ee.destroy();return}}let ft=!m||!this.driver.containsElement(m,Ce),Ee=U.get(Ce),ye=D.get(Ce),ve=this._buildInstruction(j,i,ye,Ee,ft);if(ve.errors&&ve.errors.length){x.push(ve);return}if(ft){ee.onStart(()=>si(Ce,ve.fromStyles)),ee.onDestroy(()=>Ot(Ce,ve.toStyles)),s.push(ee);return}if(j.isFallbackTransition){ee.onStart(()=>si(Ce,ve.fromStyles)),ee.onDestroy(()=>Ot(Ce,ve.toStyles)),s.push(ee);return}let dn=[];ve.timelines.forEach(Ie=>{Ie.stretchStartingKeyframe=!0,this.disabledNodes.has(Ie.element)||dn.push(Ie)}),ve.timelines=dn,i.append(Ce,ve.timelines);let wc={instruction:ve,player:ee,element:Ce};a.push(wc),ve.queriedElements.forEach(Ie=>ht(c,Ie,[]).push(ee)),ve.preStyleProps.forEach((Ie,Gt)=>{if(Ie.size){let it=l.get(Gt);it||l.set(Gt,it=new Set),Ie.forEach((qt,fn)=>it.add(fn))}}),ve.postStyleProps.forEach((Ie,Gt)=>{let it=h.get(Gt);it||h.set(Gt,it=new Set),Ie.forEach((qt,fn)=>it.add(fn))})});if(x.length){let V=[];x.forEach($=>{V.push(L1($.triggerName,$.errors))}),z.forEach($=>$.destroy()),this.reportError(V)}let w=new Map,g=new Map;a.forEach(V=>{let $=V.element;i.has($)&&(g.set($,$),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,w))}),s.forEach(V=>{let $=V.element;this._getPreviousPlayers($,!1,V.namespaceId,V.triggerName,null).forEach(ee=>{ht(w,$,[]).push(ee),ee.destroy()})});let _=O.filter(V=>Zm(V,l,h)),T=new Map;Ym(T,this.driver,L,h,Rt).forEach(V=>{Zm(V,l,h)&&_.push(V)});let S=new Map;A.forEach((V,$)=>{Ym(S,this.driver,new Set(V),l,wo)}),_.forEach(V=>{let $=T.get(V),j=S.get(V);T.set(V,new Map([...$?.entries()??[],...j?.entries()??[]]))});let y=[],dt=[],hn={};a.forEach(V=>{let{element:$,player:j,instruction:ee}=V;if(i.has($)){if(f.has($)){j.onDestroy(()=>Ot($,ee.toStyles)),j.disabled=!0,j.overrideTotalTime(ee.totalTime),s.push(j);return}let Ce=hn;if(g.size>1){let Ee=$,ye=[];for(;Ee=Ee.parentNode;){let ve=g.get(Ee);if(ve){Ce=ve;break}ye.push(Ee)}ye.forEach(ve=>g.set(ve,Ce))}let ft=this._buildAnimation(j.namespaceId,ee,w,r,S,T);if(j.setRealPlayer(ft),Ce===hn)y.push(j);else{let Ee=this.playersByElement.get(Ce);Ee&&Ee.length&&(j.parentPlayer=Cn(Ee)),s.push(j)}}else si($,ee.fromStyles),j.onDestroy(()=>Ot($,ee.toStyles)),dt.push(j),f.has($)&&s.push(j)}),dt.forEach(V=>{let $=r.get(V.element);if($&&$.length){let j=Cn($);V.setRealPlayer(j)}}),s.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<O.length;V++){let $=O[V],j=$[Et];if($i($,wl),j&&j.hasAnimation)continue;let ee=[];if(c.size){let ft=c.get($);ft&&ft.length&&ee.push(...ft);let Ee=this.driver.query($,bl,!0);for(let ye=0;ye<Ee.length;ye++){let ve=c.get(Ee[ye]);ve&&ve.length&&ee.push(...ve)}}let Ce=ee.filter(ft=>!ft.destroyed);Ce.length?Sb(this,$,Ce):this.processLeaveNode($)}return O.length=0,y.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();let $=this.players.indexOf(V);this.players.splice($,1)}),V.play()}),y}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,r){let a=[];if(t){let c=this.playersByQueriedElement.get(e);c&&(a=c)}else{let c=this.playersByElement.get(e);if(c){let l=!r||r==Xs;c.forEach(h=>{h.queued||!l&&h.triggerName!=s||a.push(h)})}}return(i||s)&&(a=a.filter(c=>!(i&&i!=c.namespaceId||s&&s!=c.triggerName))),a}_beforeAnimationBuild(e,t,i){let s=t.triggerName,r=t.element,a=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:s;for(let l of t.timelines){let h=l.element,f=h!==r,m=ht(i,h,[]);this._getPreviousPlayers(h,f,a,c,t.toState).forEach(A=>{let D=A.getRealPlayer();D.beforeDestroy&&D.beforeDestroy(),A.destroy(),m.push(A)})}si(r,t.fromStyles)}_buildAnimation(e,t,i,s,r,a){let c=t.triggerName,l=t.element,h=[],f=new Set,m=new Set,v=t.timelines.map(D=>{let R=D.element;f.add(R);let O=R[Et];if(O&&O.removedBeforeQueried)return new Dn(D.duration,D.delay);let F=R!==l,L=Ab((i.get(R)||wb).map(w=>w.getRealPlayer())).filter(w=>{let g=w;return g.element?g.element===R:!1}),U=r.get(R),P=a.get(R),z=eg(this._normalizer,D.keyframes,U,P),x=this._buildPlayer(D,z,L);if(D.subTimeline&&s&&m.add(R),F){let w=new nr(e,c,R);w.setRealPlayer(x),h.push(w)}return x});h.forEach(D=>{ht(this.playersByQueriedElement,D.element,[]).push(D),D.onDone(()=>Tb(this.playersByQueriedElement,D.element,D))}),f.forEach(D=>_t(D,Gm));let A=Cn(v);return A.onDestroy(()=>{f.forEach(D=>$i(D,Gm)),Ot(l,t.toStyles)}),m.forEach(D=>{ht(s,D,[]).push(A)}),A}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Dn(e.duration,e.delay)}},nr=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Dn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>Fl(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ht(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Tb(n,e,t){let i=n.get(e);if(i){if(i.length){let s=i.indexOf(t);i.splice(s,1)}i.length==0&&n.delete(e)}return i}function Eb(n){return n??null}function Io(n){return n&&n.nodeType===1}function Ib(n){return n=="start"||n=="done"}function Jm(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Ym(n,e,t,i,s){let r=[];t.forEach(l=>r.push(Jm(l)));let a=[];i.forEach((l,h)=>{let f=new Map;l.forEach(m=>{let v=e.computeStyle(h,m,s);f.set(m,v),(!v||v.length==0)&&(h[Et]=bb,a.push(h))}),n.set(h,f)});let c=0;return t.forEach(l=>Jm(l,r[c++])),a}function Xm(n,e){let t=new Map;if(n.forEach(c=>t.set(c,[])),e.length==0)return t;let i=1,s=new Set(e),r=new Map;function a(c){if(!c)return i;let l=r.get(c);if(l)return l;let h=c.parentNode;return t.has(h)?l=h:s.has(h)?l=i:l=a(h),r.set(c,l),l}return e.forEach(c=>{let l=a(c);l!==i&&t.get(l).push(c)}),t}function _t(n,e){n.classList?.add(e)}function $i(n,e){n.classList?.remove(e)}function Sb(n,e,t){Cn(t).onDone(()=>n.processLeaveNode(e))}function Ab(n){let e=[];return hg(n,e),e}function hg(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Js?hg(i.players,e):e.push(i)}}function Db(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){let r=t[s];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}function Zm(n,e,t){let i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(r=>s.add(r)):e.set(n,i),t.delete(n),!0}var Gi=class{constructor(e,t,i,s){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new kl(e.body,t,i,s),this._timelineEngine=new Pl(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(e,t,i,s,r){let a=e+"-"+s,c=this._triggerCache[a];if(!c){let l=[],h=[],f=ag(this._driver,r,l,h);if(l.length)throw D1(s,l);h.length&&void 0,c=fb(s,f,this._normalizer),this._triggerCache[a]=c}this._transitionEngine.registerTrigger(t,s,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if(i.charAt(0)=="@"){let[r,a]=$m(i),c=s;this._timelineEngine.command(r,t,a,c)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,r){if(i.charAt(0)=="@"){let[a,c]=$m(i);return this._timelineEngine.listen(a,t,c,r)}return this._transitionEngine.listen(e,t,i,s,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Cb(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=vl(e[0]),e.length>1&&(i=vl(e[e.length-1]))):e instanceof Map&&(t=vl(e)),t||i?new Nl(n,t,i):null}var ji=class ji{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let s=ji.initialStylesByElement.get(e);s||ji.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ot(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ot(this._element,this._initialStyles),this._endStyles&&(Ot(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ji.initialStylesByElement.delete(this._element),this._startStyles&&(si(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(si(this._element,this._endStyles),this._endStyles=null),Ot(this._element,this._initialStyles),this._state=3)}};ji.initialStylesByElement=new WeakMap;var Nl=ji;function vl(n){let e=null;return n.forEach((t,i)=>{Rb(i)&&(e=e||new Map,e.set(i,t))}),e}function Rb(n){return n==="display"||n==="position"}var ko=class{constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{s!=="offset"&&e.set(s,this._finished?i:$l(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},No=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return tg(e,t)}getParentElement(e){return Ll(e)}query(e,t,i){return ng(e,t,i)}computeStyle(e,t,i){return $l(e,t)}animate(e,t,i,s,r,a=[]){let c=s==0?"both":"forwards",l={duration:i,delay:s,fill:c};r&&(l.easing=r);let h=new Map,f=a.filter(A=>A instanceof ko);Q1(i,s)&&f.forEach(A=>{A.currentSnapshot.forEach((D,R)=>h.set(R,D))});let m=z1(t).map(A=>new Map(A));m=J1(e,m,h);let v=Cb(e,m);return new ko(e,m,l,v)}};var So="@",dg="@.disabled",xo=class{constructor(e,t,i,s){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=s,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==So&&t==dg?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},xl=class extends xo{constructor(e,t,i,s,r){super(t,i,s,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==So?t.charAt(1)=="."&&t==dg?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==So){let s=Ob(e),r=t.slice(1),a="";return r.charAt(0)!=So&&([r,a]=Pb(r)),this.engine.listen(this.namespaceId,s,r,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,i,c)})}return this.delegate.listen(e,t,i)}};function Ob(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Pb(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Fo=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(s,r)=>{let a=r?.parentNode(s);a&&r.removeChild(a,s)}}createRenderer(e,t){let i="",s=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let h=this._rendererCache,f=h.get(s);if(!f){let m=()=>h.delete(s);f=new xo(i,s,this.engine,m),h.set(s,f)}return f}let r=t.id,a=t.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);let c=h=>{Array.isArray(h)?h.forEach(c):this.engine.registerTrigger(r,a,e,h.name,h)};return t.data.animation.forEach(c),new xl(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let s=this._animationCallbacksBuffer;s.length==0&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(r=>{let[a,c]=r;a(c)}),this._animationCallbacksBuffer=[]})}),s.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var kb=(()=>{let e=class e extends Gi{constructor(i,s,r){super(i,s,r,ce(um,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(s){return new(s||e)(q(Jt),q(ri),q(oi))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();function Nb(){return new Co}function xb(n,e,t){return new Fo(n,e,t)}var pg=[{provide:oi,useFactory:Nb},{provide:Gi,useClass:kb},{provide:dm,useFactory:xb,deps:[Im,Gi,Re]}],fg=[{provide:ri,useFactory:()=>new No},{provide:el,useValue:"BrowserAnimations"},...pg],Fb=[{provide:ri,useClass:Bl},{provide:el,useValue:"NoopAnimations"},...pg],Vo=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:i.disableAnimations?Fb:fg}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({providers:fg,imports:[Ui]});let n=e;return n})();var Vb={isLoading:!1,admin:void 0,error:null},Lb=xm({name:"login",reducer:Fm(Vb,ei(_e.login,n=>de(K({},n),{isLoading:!0})),ei(_e.loginSuccess,(n,e)=>de(K({},n),{isLoading:!1,admin:e.currentUser})),ei(_e.loginFailed,(n,e)=>de(K({},n),{isLoading:!1,errors:e.message})),ei(_e.signOut,n=>de(K({},n),{isLoading:!0})),ei(_e.signSuccess,n=>de(K({},n),{isLoading:!1,admin:void 0})),ei(_e.signFailed,n=>de(K({},n),{isLoading:!1})))}),{name:mg,reducer:gg,selectIsLoading:_g,selectAdmin:Lo,selectError:yg}=Lb;var Cg=(()=>{let e=class e{constructor(i,s){this._renderer=i,this._elementRef=s,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(i,s){this._renderer.setProperty(this._elementRef.nativeElement,i,s)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(s){return new(s||e)(ue(nl),ue(Xn))},e.\u0275dir=bt({type:e});let n=e;return n})(),Bb=(()=>{let e=class e extends Cg{};e.\u0275fac=(()=>{let i;return function(r){return(i||(i=Gs(e)))(r||e)}})(),e.\u0275dir=bt({type:e,features:[Tn]});let n=e;return n})(),Rg=new se("");var Ub={provide:Rg,useExisting:js(()=>Wo),multi:!0};function $b(){let n=rl()?rl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var jb=new se(""),Wo=(()=>{let e=class e extends Cg{constructor(i,s,r){super(i,s),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!$b())}writeValue(i){let s=i??"";this.setProperty("value",s)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(s){return new(s||e)(ue(nl),ue(Xn),ue(jb,8))},e.\u0275dir=bt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,r){s&1&&st("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[zs([Ub]),Tn]});let n=e;return n})();function Rn(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function Og(n){return n!=null&&typeof n.length=="number"}var Pg=new se(""),Mg=new se(""),Gb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Hi=class{static min(e){return qb(e)}static max(e){return Hb(e)}static required(e){return zb(e)}static requiredTrue(e){return Wb(e)}static email(e){return Kb(e)}static minLength(e){return Qb(e)}static maxLength(e){return Jb(e)}static pattern(e){return Yb(e)}static nullValidator(e){return kg(e)}static compose(e){return Bg(e)}static composeAsync(e){return $g(e)}};function qb(n){return e=>{if(Rn(e.value)||Rn(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Hb(n){return e=>{if(Rn(e.value)||Rn(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function zb(n){return Rn(n.value)?{required:!0}:null}function Wb(n){return n.value===!0?null:{required:!0}}function Kb(n){return Rn(n.value)||Gb.test(n.value)?null:{email:!0}}function Qb(n){return e=>Rn(e.value)||!Og(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function Jb(n){return e=>Og(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Yb(n){if(!n)return kg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Rn(i.value))return null;let s=i.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}function kg(n){return null}function Ng(n){return n!=null}function xg(n){return wm(n)?Mi(n):n}function Fg(n){let e={};return n.forEach(t=>{e=t!=null?K(K({},e),t):e}),Object.keys(e).length===0?null:e}function Vg(n,e){return e.map(t=>t(n))}function Xb(n){return!n.validate}function Lg(n){return n.map(e=>Xb(e)?e:t=>e.validate(t))}function Bg(n){if(!n)return null;let e=n.filter(Ng);return e.length==0?null:function(t){return Fg(Vg(t,e))}}function Ug(n){return n!=null?Bg(Lg(n)):null}function $g(n){if(!n)return null;let e=n.filter(Ng);return e.length==0?null:function(t){let i=Vg(t,e).map(xg);return Yp(i).pipe(Ae(Fg))}}function jg(n){return n!=null?$g(Lg(n)):null}function vg(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gg(n){return n._rawValidators}function qg(n){return n._rawAsyncValidators}function ql(n){return n?Array.isArray(n)?n:[n]:[]}function $o(n,e){return Array.isArray(n)?n.includes(e):n===e}function wg(n,e){let t=ql(e);return ql(n).forEach(s=>{$o(t,s)||t.push(s)}),t}function bg(n,e){return ql(e).filter(t=>!$o(n,t))}var jo=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ug(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},zi=class extends jo{get formDirective(){return null}get path(){return null}},rr=class extends jo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Go=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Zb={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ZO=de(K({},Zb),{"[class.ng-submitted]":"isSubmitted"}),Hg=(()=>{let e=class e extends Go{constructor(i){super(i)}};e.\u0275fac=function(s){return new(s||e)(ue(rr,2))},e.\u0275dir=bt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,r){s&2&&Vi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Tn]});let n=e;return n})(),zg=(()=>{let e=class e extends Go{constructor(i){super(i)}};e.\u0275fac=function(s){return new(s||e)(ue(zi,10))},e.\u0275dir=bt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(s,r){s&2&&Vi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Tn]});let n=e;return n})();var ir="VALID",Bo="INVALID",qi="PENDING",sr="DISABLED";function Wl(n){return(Ko(n)?n.validators:n)||null}function eT(n){return Array.isArray(n)?Ug(n):n||null}function Kl(n,e){return(Ko(e)?e.asyncValidators:n)||null}function tT(n){return Array.isArray(n)?jg(n):n||null}function Ko(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Wg(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new te(1e3,"");if(!i[t])throw new te(1001,"")}function Kg(n,e,t){n._forEachChild((i,s)=>{if(t[s]===void 0)throw new te(1002,"")})}var Wi=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ir}get invalid(){return this.status===Bo}get pending(){return this.status==qi}get disabled(){return this.status===sr}get enabled(){return this.status!==sr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bg(e,this._rawAsyncValidators))}hasValidator(e){return $o(this._rawValidators,e)}hasAsyncValidator(e){return $o(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qi,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sr,this.errors=null,this._forEachChild(i=>{i.disable(de(K({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(K({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ir,this._forEachChild(i=>{i.enable(de(K({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(K({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ir||this.status===qi)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sr:ir}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qi,this._hasOwnPendingAsyncValidator=!0;let t=xg(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,s)=>i&&i._find(s),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new bn,this.statusChanges=new bn}_calculateStatus(){return this._allControlsDisabled()?sr:this.errors?Bo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qi)?qi:this._anyControlsHaveStatus(Bo)?Bo:ir}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ko(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=eT(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tT(this._rawAsyncValidators)}},qo=class extends Wi{constructor(e,t,i){super(Wl(t),Kl(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Kg(this,!0,e),Object.keys(e).forEach(i=>{Wg(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let s=this.controls[i];s&&s.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,s)=>{i.reset(e?e[s]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,s)=>((i.enabled||this.disabled)&&(t[s]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((s,r)=>{i=t(i,s,r)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Hl=class extends qo{};var Qg=new se("CallSetDisabledState",{providedIn:"root",factory:()=>Ql}),Ql="always";function nT(n,e){return[...e.path,n]}function Tg(n,e,t=Ql){Jl(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),sT(n,e),oT(n,e),rT(n,e),iT(n,e)}function Eg(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),zo(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ho(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iT(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Jl(n,e){let t=Gg(n);e.validator!==null?n.setValidators(vg(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=qg(n);e.asyncValidator!==null?n.setAsyncValidators(vg(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let s=()=>n.updateValueAndValidity();Ho(e._rawValidators,s),Ho(e._rawAsyncValidators,s)}function zo(n,e){let t=!1;if(n!==null){if(e.validator!==null){let s=Gg(n);if(Array.isArray(s)&&s.length>0){let r=s.filter(a=>a!==e.validator);r.length!==s.length&&(t=!0,n.setValidators(r))}}if(e.asyncValidator!==null){let s=qg(n);if(Array.isArray(s)&&s.length>0){let r=s.filter(a=>a!==e.asyncValidator);r.length!==s.length&&(t=!0,n.setAsyncValidators(r))}}}let i=()=>{};return Ho(e._rawValidators,i),Ho(e._rawAsyncValidators,i),t}function sT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Jg(n,e)})}function rT(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Jg(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Jg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oT(n,e){let t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function aT(n,e){n==null,Jl(n,e)}function cT(n,e){return zo(n,e)}function lT(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function uT(n){return Object.getPrototypeOf(n.constructor)===Bb}function hT(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dT(n,e){if(!e)return null;Array.isArray(e);let t,i,s;return e.forEach(r=>{r.constructor===Wo?t=r:uT(r)?i=r:s=r}),s||i||t||null}function fT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ig(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sg(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Uo=class extends Wi{constructor(e=null,t,i){super(Wl(t),Kl(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ko(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Sg(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Ig(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Ig(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Sg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pT=n=>n instanceof Uo;var Yg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=bt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var Xg=new se("");var mT={provide:zi,useExisting:js(()=>Yl)},Yl=(()=>{let e=class e extends zi{constructor(i,s,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new bn,this._setValidators(i),this._setAsyncValidators(s)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let s=this.form.get(i.path);return Tg(s,i,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),s}getControl(i){return this.form.get(i.path)}removeControl(i){Eg(i.control||null,i,!1),fT(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,s){this.form.get(i.path).setValue(s)}onSubmit(i){return this.submitted=!0,hT(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let s=i.control,r=this.form.get(i.path);s!==r&&(Eg(s||null,i),pT(r)&&(Tg(r,i,this.callSetDisabledState),i.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let s=this.form.get(i.path);aT(s,i),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let s=this.form.get(i.path);s&&cT(s,i)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jl(this.form,this),this._oldForm&&zo(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(s){return new(s||e)(ue(Pg,10),ue(Mg,10),ue(Qg,8))},e.\u0275dir=bt({type:e,selectors:[["","formGroup",""]],hostBindings:function(s,r){s&1&&st("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:[xi.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zs([mT]),Tn,uo]});let n=e;return n})();var gT={provide:rr,useExisting:js(()=>Xl)},Xl=(()=>{let e=class e extends rr{set isDisabled(i){}constructor(i,s,r,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new bn,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=dT(this,a)}ngOnChanges(i){this._added||this._setUpControl(),lT(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return nT(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(s){return new(s||e)(ue(zi,13),ue(Pg,10),ue(Mg,10),ue(Rg,10),ue(Xg,8))},e.\u0275dir=bt({type:e,selectors:[["","formControlName",""]],inputs:{name:[xi.None,"formControlName","name"],isDisabled:[xi.None,"disabled","isDisabled"],model:[xi.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zs([gT]),Tn,uo]});let n=e;return n})();var _T=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),zl=class extends Wi{constructor(e,t,i){super(Wl(t),Kl(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Kg(this,!1,e),e.forEach((i,s)=>{Wg(this,!1,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Ag(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Zg=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,s=null){let r=this._reduceControls(i),a={};return Ag(s)?a=s:s!==null&&(a.validators=s.validator,a.asyncValidators=s.asyncValidator),new qo(r,a)}record(i,s=null){let r=this._reduceControls(i);return new Hl(r,s)}control(i,s,r){let a={};return this.useNonNullable?(Ag(s)?a=s:(a.validators=s,a.asyncValidators=r),new Uo(i,de(K({},a),{nonNullable:!0}))):new Uo(i,s,r)}array(i,s,r){let a=i.map(c=>this._createControl(c));return new zl(a,s,r)}_reduceControls(i){let s={};return Object.keys(i).forEach(r=>{s[r]=this._createControl(i[r])}),s}_createControl(i){if(i instanceof Uo)return i;if(i instanceof Wi)return i;if(Array.isArray(i)){let s=i[0],r=i.length>1?i[1]:null,a=i.length>2?i[2]:null;return this.control(s,r,a)}else return this.control(i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var e_=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Xg,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Qg,useValue:i.callSetDisabledState??Ql}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({imports:[_T]});let n=e;return n})();function wT(n,e){if(n&1){let t=An();In(0),he(1,"div",1)(2,"div",2),Ve(3,"img",3),he(4,"h3",4),Le(5,"Welcome to Isaom"),Te(),he(6,"form",5),st("submit",function(){vn(t);let s=Me();return wn(s.login())}),he(7,"div",6),Ve(8,"input",7),he(9,"label",8),Le(10,"Email"),Te()(),he(11,"div",6),Ve(12,"input",9),he(13,"label",10),Le(14,"Password"),Te()(),he(15,"button",11),Le(16," Forgot Password ? "),Te(),he(17,"button",12),Ve(18,"span",13),he(19,"span",14),Le(20),Te()()()()(),Sn()}if(n&2){let t=e.ngIf,i=Me();le(6),me("formGroup",i.loginForm$),le(11),me("disabled",t.isLoading),le(),me("hidden",!t.isLoading),le(2),Hs(t.isLoading?"Logging in...":"Login")}}var t_=(()=>{let e=class e{constructor(i,s,r){this.store=i,this.router=s,this.fb=r,this.loginState$=Wc({isLoading:this.store.select(_g),admin:this.store.select(Lo),errors:this.store.select(yg)}),this.loginForm$=r.nonNullable.group({email:["",[Hi.required,Hi.email]],password:["",Hi.required]})}ngOnDestroy(){}ngOnInit(){}login(){this.loginForm$.valid&&this.store.dispatch(_e.login(this.loginForm$.getRawValue()))}forgotPassword(i){}};e.\u0275fac=function(s){return new(s||e)(ue(Ct),ue(go),ue(Zg))},e.\u0275cmp=gt({type:e,selectors:[["app-login"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","vh-100",2,"background-color","var(--primary)"],[1,"d-flex","flex-column","align-items-center","justify-content-center","gap-3","w-25"],["src","../../../../assets/images/logo.png","alt","logo","height","80px"],[1,"text-primary"],[1,"w-100","gap-3",3,"submit","formGroup"],[1,"form-floating","mb-3","w-100"],["formControlName","email","id","email","type","email",1,"form-control"],["for","email"],["formControlName","password","id","password","type","password",1,"form-control"],["for","password"],["type","button",1,"btn","text-primary","mb-3","align-self-end"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill","w-100",3,"disabled"],["aria-hidden","true",1,"spinner-grow","spinner-grow-sm","me-3",3,"hidden"],["role","status"]],template:function(s,r){s&1&&(Tt(0,wT,21,4,"ng-container",0),Ws(1,"async")),s&2&&me("ngIf",Ks(1,1,r.loginState$))},dependencies:[Zn,Yg,Wo,Hg,zg,Yl,Xl,po]});let n=e;return n})();var bT=n=>({collapsed:n});function TT(n,e){if(n&1&&(he(0,"li",14)(1,"a"),Ve(2,"i",15),Le(3),Te()()),n&2){let t=e.$implicit;me("routerLink",t.route),le(2),me("ngClass",t.selectedIcon),le(),Dt(" ",t.name,"")}}function ET(n,e){if(n&1){let t=An();In(0),he(1,"div",1)(2,"div",2),Ve(3,"img",3),he(4,"div",4)(5,"ul"),Tt(6,TT,4,3,"li",5),Te()()(),he(7,"div",6)(8,"div",7)(9,"button",8),st("click",function(){vn(t);let s=Me();return wn(s.expand())}),Ve(10,"i",9),Te(),he(11,"div",10),Ve(12,"img",11),he(13,"h6",12),Le(14),Te()()(),he(15,"div",13),Ve(16,"router-outlet"),Te()()(),Sn()}if(n&2){let t=e.ngIf,i=Me();le(2),me("ngClass",il(4,bT,i.isExpanded$)),le(4),me("ngForOf",i.menuItems$),le(6),me("src",t.profile!==""?t.profile:"../../../../assets/images/profile.jpg",am),le(2),Hs(t.name)}}var n_=(()=>{let e=class e{ngOnInit(){this.menuItems$.push(),this.detectScreenSizes()}expand(){this.isExpanded$=!this.isExpanded$}detectScreenSizes(){let i=window.matchMedia("(min-width: 992px)").matches;this.isExpanded$=!i}onResize(i){this.detectScreenSizes()}constructor(i){this.store=i,this.isExpanded$=!1,this.menuItems$=[{name:"Dashboard",route:"dashboard",selectedIcon:"fa-solid fa-house",unselectedIcon:"fa-regular fa-house"},{name:"Section",route:"section",selectedIcon:"fa-solid fa-layer-group",unselectedIcon:"fa-regular fa-layer-group"},{name:"Users",route:"users",selectedIcon:"fa-solid fa-users",unselectedIcon:"fa-regular fa-users"},{name:"Student Report",route:"student-report",selectedIcon:"fa-solid fa-book",unselectedIcon:"fa-regular fa-book"},{name:"Logs",route:"logs",selectedIcon:"fa-solid fa-clipboard-list",unselectedIcon:"fa-solid fa-clipboard-list"}],this.admin$=this.store.select(Lo)}};e.\u0275fac=function(s){return new(s||e)(ue(Ct))},e.\u0275cmp=gt({type:e,selectors:[["app-main"]],hostBindings:function(s,r){s&1&&st("resize",function(c){return r.onResize(c)},!1,cm)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"d-flex","align-items-stretch","vh-100",2,"background-color","var(--primary)"],[1,"align-self-stretch","overflow-auto","sidebar","d-flex","flex-column","align-items-center","gap-3",3,"ngClass"],["src","../../../../assets/images/logo.png","alt","logo","width","80px","height","80px","routerLink","dashboard"],[1,"navigation"],["routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],[1,"flex-grow-1","overflow-hidden",2,"background-color","var(--background)"],[1,"d-flex","align-items-center","justify-content-between","p-2","bg-white","shadow-sm"],[1,"btn","btn-light","btn-lg",3,"click"],[1,"fa-solid","fa-bars"],[1,"d-flex","gap-3","align-items-center","justify-content-center"],["width","40px","height","40px","alt","profile",1,"rounded-circle",3,"src"],[1,"text-muted","fw-normal"],[1,"h-100","overflow-y-auto"],["routerLinkActive","active",3,"routerLink"],[1,"me-3",3,"ngClass"]],template:function(s,r){s&1&&(Tt(0,ET,17,6,"ng-container",0),Ws(1,"async")),s&2&&me("ngIf",Ks(1,1,r.admin$))},dependencies:[Tm,Em,Zn,mo,Dm,Cm,po],styles:[".sidebar[_ngcontent-%COMP%]{width:300px;transition:width .3s ease-in-out;padding:1rem}.sidebar.collapsed[_ngcontent-%COMP%]{padding:0;width:0;overflow:hidden}.navigation[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;justify-content:space-between}.navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;padding:0px 1rem}.navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0;padding:0}.navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#d3d3d3;font-size:medium;font-weight:400;cursor:pointer;padding:10px 1rem;text-decoration:none;transition:background-color .2s ease}.navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:#000;border-radius:10px}.navigation[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;color:var(--text-primary)}"]});let n=e;return n})();var IT=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:t_},{path:"main",component:n_,loadChildren:()=>import("./chunk-SXPNJS52.js").then(n=>n.MainRoutingModule)}],i_=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({imports:[ol.forRoot(IT),ol]});let n=e;return n})();var s_=(()=>{let e=class e{constructor(i){this.store=i,this.title="isaom-web"}ngOnInit(){this.store.dispatch(_e.getCurrentUser())}};e.\u0275fac=function(s){return new(s||e)(ue(Ct))},e.\u0275cmp=gt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(s,r){s&1&&Ve(0,"router-outlet")},dependencies:[mo],styles:[".col-fixed[_ngcontent-%COMP%]{width:60px;transition:width .3s ease}"]});let n=e;return n})();var o_=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ST=function(n){let e=[],t=0,i=0;for(;t<n.length;){let s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){let r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){let r=n[t++],a=n[t++],c=n[t++],l=((s&7)<<18|(r&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let r=n[t++],a=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},a_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){let r=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,h=l?n[s+2]:0,f=r>>2,m=(r&3)<<4|c>>4,v=(c&15)<<2|h>>6,A=h&63;l||(A=64,a||(v=64)),i.push(t[f],t[m],t[v],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ST(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){let r=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;let h=s<n.length?t[n.charAt(s)]:64;++s;let m=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||c==null||h==null||m==null)throw new tu;let v=r<<2|c>>4;if(i.push(v),h!==64){let A=c<<4&240|h>>2;if(i.push(A),m!==64){let D=h<<6&192|m;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AT=function(n){let e=o_(n);return a_.encodeByteArray(e,!0)},or=function(n){return AT(n).replace(/\./g,"")},iu=function(n){try{return a_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CT=()=>DT().__FIREBASE_DEFAULTS__,RT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&iu(n[1]);return e&&JSON.parse(e)},Yo=()=>{try{return CT()||RT()||OT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},su=n=>{var e,t;return(t=(e=Yo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Xo=n=>{let e=su(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ru=()=>{var n;return(n=Yo())===null||n===void 0?void 0:n.config},ou=n=>{var e;return(e=Yo())===null||e===void 0?void 0:e[`_${n}`]};var Jo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Zo(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[or(JSON.stringify(t)),or(JSON.stringify(a)),""].join(".")}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function c_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function PT(){var n;let e=(n=Yo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h_(){let n=Be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function d_(){return!PT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function au(){try{return typeof indexedDB=="object"}catch{return!1}}function f_(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}var MT="FirebaseError",tt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=MT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}},Xt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?kT(r,i):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new tt(s,c,i)}};function kT(n,e){return n.replace(NT,(t,i)=>{let s=e[i];return s!=null?String(s):`<${i}?>`})}var NT=/\{\$([^}]+)}/g;function p_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ai(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let s of t){if(!i.includes(s))return!1;let r=n[s],a=e[s];if(r_(r)&&r_(a)){if(!ai(r,a))return!1}else if(r!==a)return!1}for(let s of i)if(!t.includes(s))return!1;return!0}function r_(n){return n!==null&&typeof n=="object"}function ar(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ki(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Qi(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function m_(n,e){let t=new nu(n,e);return t.subscribe.bind(t)}var nu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");xT(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=eu),s.error===void 0&&(s.error=eu),s.complete===void 0&&(s.complete=eu);let r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function xT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eu(){}var mP=4*60*60*1e3;function rt(n){return n&&n._delegate?n._delegate:n}var ot=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ci="[DEFAULT]";var cu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Jo;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VT(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(t);try{let r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[r,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(r);i===c&&a.resolve(s)}return s}onInit(e,t){var i;let s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);let a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FT(n){return n===ci?void 0:n}function VT(n){return n.instantiationMode==="EAGER"}var ea=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new cu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var LT=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),BT={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},UT=ne.INFO,$T={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},jT=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),s=$T[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},On=class{constructor(e){this.name=e,this._logLevel=UT,this._logHandler=jT,this._userLogHandler=null,LT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var GT=(n,e)=>e.some(t=>n instanceof t),g_,__;function qT(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HT(){return __||(__=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var y_=new WeakMap,uu=new WeakMap,v_=new WeakMap,lu=new WeakMap,du=new WeakMap;function zT(n){let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(Pt(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,n)}).catch(()=>{}),du.set(e,n),e}function WT(n){if(uu.has(n))return;let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});uu.set(n,e)}var hu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function w_(n){hu=n(hu)}function KT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(ta(this),e,...t);return v_.set(i,e.sort?e.sort():[e]),Pt(i)}:HT().includes(n)?function(...e){return n.apply(ta(this),e),Pt(y_.get(this))}:function(...e){return Pt(n.apply(ta(this),e))}}function QT(n){return typeof n=="function"?KT(n):(n instanceof IDBTransaction&&WT(n),GT(n,qT())?new Proxy(n,hu):n)}function Pt(n){if(n instanceof IDBRequest)return zT(n);if(lu.has(n))return lu.get(n);let e=QT(n);return e!==n&&(lu.set(n,e),du.set(e,n)),e}var ta=n=>du.get(n);function T_(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){let a=indexedDB.open(n,e),c=Pt(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Pt(a.result),l.oldVersion,l.newVersion,Pt(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var JT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],fu=new Map;function b_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fu.get(e))return fu.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,s=YT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||JT.includes(t)))return;let r=function(a,...c){return b(this,null,function*(){let l=this.transaction(a,s?"readwrite":"readonly"),h=l.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),s&&l.done]))[0]})};return fu.set(e,r),r}w_(n=>de(K({},n),{get:(e,t,i)=>b_(e,t)||n.get(e,t,i),has:(e,t)=>!!b_(e,t)||n.has(e,t)}));var mu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XT(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function XT(n){let e=n.getComponent();return e?.type==="VERSION"}var gu="@firebase/app",E_="0.10.6";var li=new On("@firebase/app"),ZT="@firebase/app-compat",eE="@firebase/analytics-compat",tE="@firebase/analytics",nE="@firebase/app-check-compat",iE="@firebase/app-check",sE="@firebase/auth",rE="@firebase/auth-compat",oE="@firebase/database",aE="@firebase/database-compat",cE="@firebase/functions",lE="@firebase/functions-compat",uE="@firebase/installations",hE="@firebase/installations-compat",dE="@firebase/messaging",fE="@firebase/messaging-compat",pE="@firebase/performance",mE="@firebase/performance-compat",gE="@firebase/remote-config",_E="@firebase/remote-config-compat",yE="@firebase/storage",vE="@firebase/storage-compat",wE="@firebase/firestore",bE="@firebase/vertexai-preview",TE="@firebase/firestore-compat",EE="firebase",IE="10.12.3";var _u="[DEFAULT]",SE={[gu]:"fire-core",[ZT]:"fire-core-compat",[tE]:"fire-analytics",[eE]:"fire-analytics-compat",[iE]:"fire-app-check",[nE]:"fire-app-check-compat",[sE]:"fire-auth",[rE]:"fire-auth-compat",[oE]:"fire-rtdb",[aE]:"fire-rtdb-compat",[cE]:"fire-fn",[lE]:"fire-fn-compat",[uE]:"fire-iid",[hE]:"fire-iid-compat",[dE]:"fire-fcm",[fE]:"fire-fcm-compat",[pE]:"fire-perf",[mE]:"fire-perf-compat",[gE]:"fire-rc",[_E]:"fire-rc-compat",[yE]:"fire-gcs",[vE]:"fire-gcs-compat",[wE]:"fire-fst",[TE]:"fire-fst-compat",[bE]:"fire-vertex","fire-js":"fire-js",[EE]:"fire-js-all"};var cr=new Map,AE=new Map,yu=new Map;function I_(n,e){try{n.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mt(n){let e=n.name;if(yu.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;yu.set(e,n);for(let t of cr.values())I_(t,n);for(let t of AE.values())I_(t,n);return!0}function ui(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kt(n){return n.settings!==void 0}var DE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new Xt("app","Firebase",DE);var vu=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ot("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}};var Nt=IE;function Tu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:_u,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Pn.create("bad-app-name",{appName:String(s)});if(t||(t=ru()),!t)throw Pn.create("no-options");let r=cr.get(s);if(r){if(ai(t,r.options)&&ai(i,r.config))return r;throw Pn.create("duplicate-app",{appName:s})}let a=new ea(s);for(let l of yu.values())a.addComponent(l);let c=new vu(t,i,a);return cr.set(s,c),c}function Mn(n=_u){let e=cr.get(n);if(!e&&n===_u&&ru())return Tu();if(!e)throw Pn.create("no-app",{appName:n});return e}function na(){return Array.from(cr.values())}function be(n,e,t){var i;let s=(i=SE[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);let r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){let c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(c.join(" "));return}Mt(new ot(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var CE="firebase-heartbeat-database",RE=1,lr="firebase-heartbeat-store",pu=null;function C_(){return pu||(pu=T_(CE,RE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Pn.create("idb-open",{originalErrorMessage:n.message})})),pu}function OE(n){return b(this,null,function*(){try{let t=(yield C_()).transaction(lr),i=yield t.objectStore(lr).get(R_(n));return yield t.done,i}catch(e){if(e instanceof tt)li.warn(e.message);else{let t=Pn.create("idb-get",{originalErrorMessage:e?.message});li.warn(t.message)}}})}function S_(n,e){return b(this,null,function*(){try{let i=(yield C_()).transaction(lr,"readwrite");yield i.objectStore(lr).put(e,R_(n)),yield i.done}catch(t){if(t instanceof tt)li.warn(t.message);else{let i=Pn.create("idb-set",{originalErrorMessage:t?.message});li.warn(i.message)}}})}function R_(n){return`${n.name}!${n.options.appId}`}var PE=1024,ME=30*24*60*60*1e3,wu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new bu(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return b(this,null,function*(){var e,t;let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=A_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=ME}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return b(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=A_(),{heartbeatsToSend:i,unsentEntries:s}=kE(this._heartbeatsCache.heartbeats),r=or(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r})}};function A_(){return new Date().toISOString().substring(0,10)}function kE(n,e=PE){let t=[],i=n.slice();for(let s of n){let r=t.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),D_(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),D_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var bu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return au()?f_().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield OE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}};function D_(n){return or(JSON.stringify({version:2,heartbeats:n})).length}function NE(n){Mt(new ot("platform-logger",e=>new mu(e),"PRIVATE")),Mt(new ot("heartbeat",e=>new wu(e),"PRIVATE")),be(gu,E_,n),be(gu,E_,"esm2017"),be("fire-js","")}NE("");var xE="firebase",FE="10.12.3";be(xE,FE,"app");var Zt=new sl("ANGULARFIRE2_VERSION");function Yi(n,e,t){if(e){if(e.length===1)return e[0];let r=e.filter(a=>a.app===t);if(r.length===1)return r[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var di=(n,e)=>{let t=e?[e]:na(),i=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},kn=class{constructor(){return di(VE)}},VE="app-check";function Ji(){}var ia=class{zone;delegate;constructor(e,t=oo){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let s=this.zone,r=function(a){s.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(r,t,i)}},Eu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)),t.pipe(Qt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Nn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ia(Zone.current)),this.insideAngular=t.run(()=>new ia(Zone.current,Qp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(q(Re))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function LE(n){return sa().ngZone.runOutsideAngular(()=>n())}function hi(n){return sa().ngZone.run(()=>n())}function BE(n){return UE(sa())(n)}function UE(n){return function(t){return t=t.lift(new Eu(n.ngZone)),t.pipe(zc(n.outsideAngular),Us(n.insideAngular))}}var $E=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),hi(()=>n.apply(void 0,i))},yt=(n,e)=>function(){let t,i=arguments;for(let r=0;r<arguments.length;r++)typeof i[r]=="function"&&(e&&(t||=hi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji))),i[r]=$E(i[r],t));let s=LE(()=>n.apply(this,i));if(!e)if(s instanceof pt){let r=sa();return s.pipe(zc(r.outsideAngular),Us(r.insideAngular))}else return hi(()=>s);return s instanceof pt?s.pipe(BE):s instanceof Promise?hi(()=>new Promise((r,a)=>s.then(c=>hi(()=>r(c)),c=>hi(()=>a(c))))):typeof s=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),s.apply(this,arguments)}:hi(()=>s)};var It=class{constructor(e){return e}},en=class{constructor(){return na()}};function jE(n){return n&&n.length===1?n[0]:new It(Mn())}var Iu=new se("angularfire2._apps"),GE={provide:It,useFactory:jE,deps:[[new qe,Iu]]},qE={provide:en,deps:[[new qe,Iu]]};function HE(n){return(e,t)=>{let i=t.get(Zc);be("angularfire",Zt.full,"core"),be("angularfire",Zt.full,"app"),be("angular",vm.full,i.toString());let s=e.runOutsideAngular(()=>n(t));return new It(s)}}function O_(n,...e){return ct([GE,qE,{provide:Iu,useFactory:HE(n),multi:!0,deps:[Re,He,Nn,...e]}])}var P_=yt(Tu,!0);function Q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var J_=Q_,Y_=new Xt("auth","Firebase",Q_());var ua=new On("@firebase/auth");function zE(n,...e){ua.logLevel<=ne.WARN&&ua.warn(`Auth (${Nt}): ${n}`,...e)}function oa(n,...e){ua.logLevel<=ne.ERROR&&ua.error(`Auth (${Nt}): ${n}`,...e)}function Ft(n,...e){throw zu(n,...e)}function fi(n,...e){return zu(n,...e)}function X_(n,e,t){let i=Object.assign(Object.assign({},J_()),{[e]:t});return new Xt("auth","Firebase",i).create(e,{appName:n.name})}function Fn(n){return X_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zu(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Y_.create(n,...e)}function W(n,e,...t){if(!n)throw zu(e,...t)}function tn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw oa(e),new Error(e)}function Vn(n,e){n||tn(e)}function Cu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function WE(){return M_()==="http:"||M_()==="https:"}function M_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function KE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WE()||l_()||"connection"in navigator)?navigator.onLine:!0}function QE(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var pi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vn(t>e,"Short delay should be less than long delay!"),this.isMobile=c_()||u_()}get(){return KE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Wu(n,e){Vn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ha=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var JE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YE=new pi(3e4,6e4);function gi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ln(r,a,c,l){return b(this,arguments,function*(n,e,t,i,s={}){return Z_(n,s,()=>b(this,null,function*(){let h={},f={};i&&(e==="GET"?f=i:h={body:JSON.stringify(i)});let m=ar(Object.assign({key:n.config.apiKey},f)).slice(1),v=yield n._getAdditionalHeaders();return v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode),ha.fetch()(ey(n,n.config.apiHost,t,m),Object.assign({method:e,headers:v,referrerPolicy:"no-referrer"},h))}))})}function Z_(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},JE),e);try{let s=new Ru(n),r=yield Promise.race([t(),s.promise]);s.clearNetworkTimeout();let a=yield r.json();if("needConfirmation"in a)throw ra(n,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{let c=r.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ra(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ra(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw ra(n,"user-disabled",a);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw X_(n,f,h);Ft(n,f)}}catch(s){if(s instanceof tt)throw s;Ft(n,"network-request-failed",{message:String(s)})}})}function ba(r,a,c,l){return b(this,arguments,function*(n,e,t,i,s={}){let h=yield Ln(n,e,t,i,s);return"mfaPendingCredential"in h&&Ft(n,"multi-factor-auth-required",{_serverResponse:h}),h})}function ey(n,e,t,i){let s=`${e}${t}?${i}`;return n.config.emulator?Wu(n.config,s):`${n.config.apiScheme}://${s}`}function XE(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ru=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),YE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ra(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let s=fi(n,e,i);return s.customData._tokenResponse=t,s}function k_(n){return n!==void 0&&n.enterprise!==void 0}var Ou=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return XE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function ZE(n,e){return b(this,null,function*(){return Ln(n,"GET","/v2/recaptchaConfig",gi(n,e))})}function eI(n,e){return b(this,null,function*(){return Ln(n,"POST","/v1/accounts:delete",e)})}function ty(n,e){return b(this,null,function*(){return Ln(n,"POST","/v1/accounts:lookup",e)})}function ur(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ku(n,e=!1){return b(this,null,function*(){let t=rt(n),i=yield t.getIdToken(e),s=Qu(i);W(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");let r=typeof s.firebase=="object"?s.firebase:void 0,a=r?.sign_in_provider;return{claims:s,token:i,authTime:ur(Su(s.auth_time)),issuedAtTime:ur(Su(s.iat)),expirationTime:ur(Su(s.exp)),signInProvider:a||null,signInSecondFactor:r?.sign_in_second_factor||null}})}function Su(n){return Number(n)*1e3}function Qu(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return oa("JWT malformed, contained fewer than 3 sections"),null;try{let s=iu(t);return s?JSON.parse(s):(oa("Failed to decode base64 JWT payload"),null)}catch(s){return oa("Caught error parsing JWT payload as JSON",s?.toString()),null}}function N_(n){let e=Qu(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function dr(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof tt&&tI(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function tI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Pu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function da(n){return b(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),s=yield dr(n,ty(t,{idToken:i}));W(s?.users.length,t,"internal-error");let r=s.users[0];n._notifyReloadListener(r);let a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?ny(r.providerUserInfo):[],c=nI(n.providerData,a),l=n.isAnonymous,h=!(n.email&&r.passwordHash)&&!c?.length,f=l?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new fr(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function Ju(n){return b(this,null,function*(){let e=rt(n);yield da(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function nI(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function ny(n){return n.map(e=>{var{providerId:t}=e,i=Hc(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function iI(n,e){return b(this,null,function*(){let t=yield Z_(n,{},()=>b(this,null,function*(){let i=ar({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,a=ey(n,s,"/v1/token",`key=${r}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ha.fetch()(a,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function sI(n,e){return b(this,null,function*(){return Ln(n,"POST","/v2/accounts:revokeToken",gi(n,e))})}var hr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=N_(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:i,refreshToken:s,expiresIn:r}=yield iI(e,t);this.updateTokensAndExpiration(i,s,Number(r))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:s,expirationTime:r}=t,a=new n;return i&&(W(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return tn("not implemented")}};function xn(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Xi=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,r=Hc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fr(r.createdAt||void 0,r.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield dr(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ku(this,e)}reload(){return Ju(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield da(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(kt(this.auth.app))return Promise.reject(Fn(this.auth));let e=yield this.getIdToken();return yield dr(this,eI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,r,a,c,l,h,f;let m=(i=t.displayName)!==null&&i!==void 0?i:void 0,v=(s=t.email)!==null&&s!==void 0?s:void 0,A=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,D=(a=t.photoURL)!==null&&a!==void 0?a:void 0,R=(c=t.tenantId)!==null&&c!==void 0?c:void 0,O=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,F=(h=t.createdAt)!==null&&h!==void 0?h:void 0,L=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:U,emailVerified:P,isAnonymous:z,providerData:x,stsTokenManager:w}=t;W(U&&w,e,"internal-error");let g=hr.fromJSON(this.name,w);W(typeof U=="string",e,"internal-error"),xn(m,e.name),xn(v,e.name),W(typeof P=="boolean",e,"internal-error"),W(typeof z=="boolean",e,"internal-error"),xn(A,e.name),xn(D,e.name),xn(R,e.name),xn(O,e.name),xn(F,e.name),xn(L,e.name);let _=new n({uid:U,auth:e,email:v,emailVerified:P,displayName:m,isAnonymous:z,photoURL:D,phoneNumber:A,tenantId:R,stsTokenManager:g,createdAt:F,lastLoginAt:L});return x&&Array.isArray(x)&&(_.providerData=x.map(T=>Object.assign({},T))),O&&(_._redirectEventId=O),_}static _fromIdTokenResponse(e,t,i=!1){return b(this,null,function*(){let s=new hr;s.updateFromServerResponse(t);let r=new n({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return yield da(r),r})}static _fromGetAccountInfoResponse(e,t,i){return b(this,null,function*(){let s=t.users[0];W(s.localId!==void 0,"internal-error");let r=s.providerUserInfo!==void 0?ny(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!r?.length,c=new hr;c.updateFromIdToken(i);let l=new n({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new fr(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(l,h),l})}};var x_=new Map;function nn(n){Vn(n instanceof Function,"Expected a class definition");let e=x_.get(n);return e?(Vn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,x_.set(n,e),e)}var rI=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,i){return b(this,null,function*(){this.storage[t]=i})}_get(t){return b(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Mu=rI;function aa(n,e,t){return`firebase:${n}:${e}:${t}`}var fa=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:s,name:r}=this.auth;this.fullUserKey=aa(this.userKey,s.apiKey,r),this.fullPersistenceKey=aa("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Xi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return b(this,null,function*(){if(!t.length)return new n(nn(Mu),e,i);let s=(yield Promise.all(t.map(h=>b(this,null,function*(){if(yield h._isAvailable())return h})))).filter(h=>h),r=s[0]||nn(Mu),a=aa(i,e.config.apiKey,e.name),c=null;for(let h of t)try{let f=yield h._get(a);if(f){let m=Xi._fromJSON(e,f);h!==r&&(c=m),r=h;break}}catch{}let l=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new n(r,e,i):(r=l[0],c&&(yield r._set(a,c.toJSON())),yield Promise.all(t.map(h=>b(this,null,function*(){if(h!==r)try{yield h._remove(a)}catch{}}))),new n(r,e,i))})}};function F_(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ry(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ay(e))return"Blackberry";if(cy(e))return"Webos";if(Yu(e))return"Safari";if((e.includes("chrome/")||sy(e))&&!e.includes("edge/"))return"Chrome";if(oy(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function iy(n=Be()){return/firefox\//i.test(n)}function Yu(n=Be()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sy(n=Be()){return/crios\//i.test(n)}function ry(n=Be()){return/iemobile/i.test(n)}function oy(n=Be()){return/android/i.test(n)}function ay(n=Be()){return/blackberry/i.test(n)}function cy(n=Be()){return/webos/i.test(n)}function Ta(n=Be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oI(n=Be()){var e;return Ta(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aI(){return h_()&&document.documentMode===10}function ly(n=Be()){return Ta(n)||oy(n)||cy(n)||ay(n)||/windows phone/i.test(n)||ry(n)}function cI(){try{return!!(window&&window!==window.top)}catch{return!1}}function uy(n,e=[]){let t;switch(n){case"Browser":t=F_(Be());break;case"Worker":t=`${F_(Be())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nt}/${i}`}var ku=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=r=>new Promise((a,c)=>{try{let l=e(r);a(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function lI(t){return b(this,arguments,function*(n,e={}){return Ln(n,"GET","/v2/passwordPolicy",gi(n,e))})}var uI=6,Nu=class{constructor(e){var t,i,s,r;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:uI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,r,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}};var xu=class{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pa(this),this.idTokenSubscription=new pa(this),this.beforeStateQueue=new ku(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nn(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var i,s;if(!this._deleted&&(this.persistenceManager=yield fa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield ty(this,{idToken:e}),i=yield Xi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(kt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),s=i,r=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{yield this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield da(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=QE()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(kt(this.app))return Promise.reject(Fn(this));let t=e?rt(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return kt(this.app)?Promise.reject(Fn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return kt(this.app)?Promise.reject(Fn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(nn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield lI(this),t=new Nu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield sI(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&nn(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield fa.create(this,[nn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};let r=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{a||r(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,s);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let s=yield this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&zE(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zi(n){return rt(n)}var pa=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=m_(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ea={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hI(n){Ea=n}function hy(n){return Ea.loadJS(n)}function dI(){return Ea.recaptchaEnterpriseScript}function fI(){return Ea.gapiScript}function dy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var pI="recaptcha-enterprise",mI="NO_RECAPTCHA",Fu=class{constructor(e){this.type=pI,this.auth=Zi(e)}verify(e="verify",t=!1){return b(this,null,function*(){function i(r){return b(this,null,function*(){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise((a,c)=>b(this,null,function*(){ZE(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let h=new Ou(l);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(l=>{c(l)})}))})}function s(r,a,c){let l=window.grecaptcha;k_(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(mI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,a)=>{i(this.auth).then(c=>{if(!t&&k_(window.grecaptcha))s(c,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=dI();l.length!==0&&(l+=c),hy(l).then(()=>{s(c,r,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})})}};function V_(n,e,t,i=!1){return b(this,null,function*(){let s=new Fu(n),r;try{r=yield s.verify(t)}catch{r=yield s.verify(t,!0)}let a=Object.assign({},e);return i?Object.assign(a,{captchaResp:r}):Object.assign(a,{captchaResponse:r}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function L_(n,e,t,i){return b(this,null,function*(){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let r=yield V_(n,e,t,t==="getOobCode");return i(n,r)}else return i(n,e).catch(r=>b(this,null,function*(){if(r.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield V_(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(r)}))})}function Xu(n,e){let t=ui(n,"auth");if(t.isInitialized()){let s=t.getImmediate(),r=t.getOptions();if(ai(r,e??{}))return s;Ft(s,"already-initialized")}return t.initialize({options:e})}function gI(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(nn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Zu(n,e,t){let i=Zi(n);W(i._canInitEmulator,i,"emulator-config-failed"),W(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let s=!!t?.disableWarnings,r=fy(e),{host:a,port:c}=_I(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${r}//${a}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||yI()}function fy(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _I(n){let e=fy(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let r=s[1];return{host:r,port:B_(i.substr(r.length+1))}}else{let[r,a]=i.split(":");return{host:r,port:B_(a)}}}function B_(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function yI(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var pr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tn("not implemented")}_getIdTokenResponse(e){return tn("not implemented")}_linkToIdToken(e,t){return tn("not implemented")}_getReauthenticationResolver(e){return tn("not implemented")}};function vI(n,e){return b(this,null,function*(){return Ln(n,"POST","/v1/accounts:signUp",e)})}function wI(n,e){return b(this,null,function*(){return ba(n,"POST","/v1/accounts:signInWithPassword",gi(n,e))})}function bI(n,e){return b(this,null,function*(){return ba(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,e))})}function TI(n,e){return b(this,null,function*(){return ba(n,"POST","/v1/accounts:signInWithEmailLink",gi(n,e))})}var mr=class n extends pr{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return L_(e,t,"signInWithPassword",wI);case"emailLink":return bI(e,{email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return L_(e,i,"signUpPassword",vI);case"emailLink":return TI(e,{idToken:t,email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Au(n,e){return b(this,null,function*(){return ba(n,"POST","/v1/accounts:signInWithIdp",gi(n,e))})}function EI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function II(n){let e=Ki(Qi(n)).link,t=e?Ki(Qi(e)).deep_link_id:null,i=Ki(Qi(n)).deep_link_id;return(i?Ki(Qi(i)).link:null)||i||t||e||n}var ma=class n{constructor(e){var t,i,s,r,a,c;let l=Ki(Qi(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,m=EI((s=l.mode)!==null&&s!==void 0?s:null);W(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=II(e);try{return new n(t)}catch{return null}}};var py=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return mr._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let s=ma.parseLink(i);return W(s,"argument-error"),mr._fromEmailAndCode(t,s.code,s.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ga=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vu=class extends ga{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,s=!1){return b(this,null,function*(){let r=yield Xi._fromIdTokenResponse(e,i,s),a=U_(i);return new n({user:r,providerId:a,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return b(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let s=U_(i);return new n({user:e,providerId:s,_tokenResponse:i,operationType:t})})}};function U_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Lu=class n extends tt{constructor(e,t,i,s){var r;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new n(e,t,i,s)}};function my(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Lu._fromErrorAndOperation(n,r,e,i):r})}function SI(n,e,t=!1){return b(this,null,function*(){let i=yield dr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return gr._forOperation(n,"link",i)})}function AI(n,e,t=!1){return b(this,null,function*(){let{auth:i}=n;if(kt(i.app))return Promise.reject(Fn(i));let s="reauthenticate";try{let r=yield dr(n,my(i,s,e,n),t);W(r.idToken,i,"internal-error");let a=Qu(r.idToken);W(a,i,"internal-error");let{sub:c}=a;return W(n.uid===c,i,"user-mismatch"),gr._forOperation(n,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&Ft(i,"user-mismatch"),r}})}function gy(n,e,t=!1){return b(this,null,function*(){if(kt(n.app))return Promise.reject(Fn(n));let i="signIn",s=yield my(n,i,e),r=yield gr._fromIdTokenResponse(n,i,s);return t||(yield n._updateCurrentUser(r.user)),r})}function eh(n,e){return b(this,null,function*(){return gy(Zi(n),e)})}function DI(n){return b(this,null,function*(){let e=Zi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function th(n,e,t){return kt(n.app)?Promise.reject(Fn(n)):eh(rt(n),py.credential(e,t)).catch(i=>b(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&DI(n),i}))}function nh(n,e,t,i){return rt(n).onIdTokenChanged(e,t,i)}function ih(n,e,t){return rt(n).beforeAuthStateChanged(e,t)}function sh(n){return rt(n).signOut()}var _a="__sak";var ya=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_a,"1"),this.storage.removeItem(_a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function CI(){let n=Be();return Yu(n)||Ta(n)}var RI=1e3,OI=10,PI=(()=>{class n extends ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CI()&&cI(),this.fallbackToPolling=ly(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let s=this.storage.getItem(i),r=this.localCache[i];s!==r&&t(i,r,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,h)=>{this.notifyListeners(c,h)});return}let s=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(s);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!i)return}let r=()=>{let c=this.storage.getItem(s);!i&&this.localCache[s]===c||this.notifyListeners(s,c)},a=this.storage.getItem(s);aI()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,OI):r()}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let r of Array.from(s))r(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},RI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return b(this,null,function*(){yield _n(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return b(this,null,function*(){let i=yield _n(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return b(this,null,function*(){yield _n(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),_y=PI;var MI=(()=>{class n extends ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),rh=MI;function kI(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var NI=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(r=>r.isListeningto(t));if(i)return i;let s=new n(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let i=t,{eventId:s,eventType:r,data:a}=i.data,c=this.handlersMap[r];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:r});let l=Array.from(c).map(f=>b(this,null,function*(){return f(i.origin,a)})),h=yield kI(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:h})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function yy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Bu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return b(this,null,function*(){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((c,l)=>{let h=yy("",20);s.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(m){let v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(f),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(v.data.response);break;default:clearTimeout(f),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function xt(){return window}function xI(n){xt().location.href=n}function vy(){return typeof xt().WorkerGlobalScope<"u"&&typeof xt().importScripts=="function"}function FI(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VI(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function LI(){return vy()?self:null}var wy="firebaseLocalStorageDb",BI=1,va="firebaseLocalStorage",by="fbase_key",mi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ia(n,e){return n.transaction([va],e?"readwrite":"readonly").objectStore(va)}function UI(){let n=indexedDB.deleteDatabase(wy);return new mi(n).toPromise()}function Uu(){let n=indexedDB.open(wy,BI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(va,{keyPath:by})}catch(s){t(s)}}),n.addEventListener("success",()=>b(this,null,function*(){let i=n.result;i.objectStoreNames.contains(va)?e(i):(i.close(),yield UI(),e(yield Uu()))}))})}function $_(n,e,t){return b(this,null,function*(){let i=Ia(n,!0).put({[by]:e,value:t});return new mi(i).toPromise()})}function $I(n,e){return b(this,null,function*(){let t=Ia(n,!1).get(e),i=yield new mi(t).toPromise();return i===void 0?null:i.value})}function j_(n,e){let t=Ia(n,!0).delete(e);return new mi(t).toPromise()}var jI=800,GI=3,qI=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Uu(),this.db)})}_withRetries(t){return b(this,null,function*(){let i=0;for(;;)try{let s=yield this._openDb();return yield t(s)}catch(s){if(i++>GI)throw s;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return vy()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=NI._getInstance(LI()),this.receiver._subscribe("keyChanged",(t,i)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,i;if(this.activeServiceWorker=yield FI(),!this.activeServiceWorker)return;this.sender=new Bu(this.activeServiceWorker);let s=yield this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((i=s[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VI()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Uu();return yield $_(t,_a,"1"),yield j_(t,_a),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(s=>$_(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let i=yield this._withRetries(s=>$I(s,t));return this.localCache[t]=i,i})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>j_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(r=>{let a=Ia(r,!1).getAll();return new mi(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],s=new Set;if(t.length!==0)for(let{fbase_key:r,value:a}of t)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),i.push(r));for(let r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),i.push(r));return i})}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let r of Array.from(s))r(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),jI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ty=qI;var cM=dy("rcb"),lM=new pi(3e4,6e4);function HI(n,e){return e?nn(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var _r=class extends pr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Au(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zI(n){return gy(n.auth,new _r(n),n.bypassAuthState)}function WI(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),AI(t,new _r(n),n.bypassAuthState)}function KI(n){return b(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),SI(t,new _r(n),n.bypassAuthState)})}var $u=class{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(h){this.reject(h)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zI;case"linkViaPopup":case"linkViaRedirect":return KI;case"reauthViaPopup":case"reauthViaRedirect":return WI;default:Ft(this.auth,"internal-error")}}resolve(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var uM=new pi(2e3,1e4);var QI="pendingRedirect",ca=new Map,ju=class n extends $u{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return b(this,null,function*(){let e=ca.get(this.auth._key());if(!e){try{let i=(yield JI(this.resolver,this.auth))?yield _n(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ca.set(this.auth._key(),e)}return this.bypassAuthState||ca.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return _n(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,_n(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function JI(n,e){return b(this,null,function*(){let t=ZI(e),i=XI(n);if(!(yield i._isAvailable()))return!1;let s=(yield i._get(t))==="true";return yield i._remove(t),s})}function YI(n,e){ca.set(n._key(),e)}function XI(n){return nn(n._redirectPersistence)}function ZI(n){return aa(QI,n.config.apiKey,n.name)}function eS(n,e,t=!1){return b(this,null,function*(){if(kt(n.app))return Promise.reject(Fn(n));let i=Zi(n),s=HI(i,e),a=yield new ju(i,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield i._persistUserIfCurrent(a.user),yield i._setRedirectUser(null,e)),a})}var tS=10*60*1e3,Gu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ey(e)){let s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tS&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}};function G_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ey({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ey(n);default:return!1}}function iS(t){return b(this,arguments,function*(n,e={}){return Ln(n,"GET","/v1/projects",e)})}var sS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rS=/^https?/;function oS(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield iS(n);for(let t of e)try{if(aS(t))return}catch{}Ft(n,"unauthorized-domain")})}function aS(n){let e=Cu(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!rS.test(t))return!1;if(sS.test(n))return i===n;let s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var cS=new pi(3e4,6e4);function q_(){let n=xt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lS(n){return new Promise((e,t)=>{var i,s,r;function a(){q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q_(),t(fi(n,"network-request-failed"))},timeout:cS.get()})}if(!((s=(i=xt().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=xt().gapi)===null||r===void 0)&&r.load)a();else{let c=dy("iframefcb");return xt()[c]=()=>{gapi.load?a():t(fi(n,"network-request-failed"))},hy(`${fI()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw la=null,e})}var la=null;function uS(n){return la=la||lS(n),la}var hS=new pi(5e3,15e3),dS="__/auth/iframe",fS="emulator/auth/iframe",pS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gS(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Wu(e,fS):`https://${n.config.authDomain}/${dS}`,i={apiKey:e.apiKey,appName:n.name,v:Nt},s=mS.get(n.config.apiHost);s&&(i.eid=s);let r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${ar(i).slice(1)}`}function _S(n){return b(this,null,function*(){let e=yield uS(n),t=xt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:gS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pS,dontclear:!0},i=>new Promise((s,r)=>b(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let a=fi(n,"network-request-failed"),c=xt().setTimeout(()=>{r(a)},hS.get());function l(){xt().clearTimeout(c),s(i)}i.ping(l).then(l,()=>{r(a)})})))})}var yS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vS=500,wS=600,bS="_blank",TS="http://localhost",wa=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ES(n,e,t,i=vS,s=wS){let r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},yS),{width:i.toString(),height:s.toString(),top:r,left:a}),h=Be().toLowerCase();t&&(c=sy(h)?bS:t),iy(h)&&(e=e||TS,l.scrollbars="yes");let f=Object.entries(l).reduce((v,[A,D])=>`${v}${A}=${D},`,"");if(oI(h)&&c!=="_self")return IS(e||"",c),new wa(null);let m=window.open(e||"",c,f);W(m,n,"popup-blocked");try{m.focus()}catch{}return new wa(m)}function IS(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var SS="__/auth/handler",AS="emulator/auth/handler",DS=encodeURIComponent("fac");function H_(n,e,t,i,s,r){return b(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Nt,eventId:s};if(e instanceof ga){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",p_(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(r||{}))a[f]=m}if(e instanceof Vu){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),h=l?`#${DS}=${encodeURIComponent(l)}`:"";return`${CS(n)}?${ar(c).slice(1)}${h}`})}function CS({config:n}){return n.emulator?Wu(n,AS):`https://${n.authDomain}/${SS}`}var Du="webStorageSupport",qu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=eS,this._overrideRedirectResult=YI}_openPopup(e,t,i,s){return b(this,null,function*(){var r;Vn((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");let a=yield H_(e,t,i,Cu(),s);return ES(e,a,yy())})}_openRedirect(e,t,i,s){return b(this,null,function*(){yield this._originValidation(e);let r=yield H_(e,t,i,Cu(),s);return xI(r),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Vn(r,"If manager is not set, promise should be"),r)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return b(this,null,function*(){let t=yield _S(e),i=new Gu(e);return t.register("authEvent",s=>(W(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Du,{type:Du},s=>{var r;let a=(r=s?.[0])===null||r===void 0?void 0:r[Du];a!==void 0&&t(!!a),Ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ly()||Yu()||Ta()}},Iy=qu;var z_="@firebase/auth",W_="1.7.5";var Hu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OS(n){Mt(new ot("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uy(n)},h=new xu(i,s,r,l);return gI(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Mt(new ot("auth-internal",e=>{let t=Zi(e.getProvider("auth").getImmediate());return(i=>new Hu(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(z_,W_,RS(n)),be(z_,W_,"esm2017")}var PS=5*60,MS=ou("authIdTokenMaxAge")||PS,K_=null,kS=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MS)return;let s=t?.token;K_!==s&&(K_=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});function oh(n=Mn()){let e=ui(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Xu(n,{popupRedirectResolver:Iy,persistence:[Ty,_y,rh]}),i=ou("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let r=new URL(i,location.origin);if(location.origin===r.origin){let a=kS(r.toString());ih(t,a,()=>a(t.currentUser)),nh(t,c=>a(c))}}let s=su("auth");return s&&Zu(t,`http://${s}`),t}function NS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}hI({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{let r=fi("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",NS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OS("Browser");var Sy="auth",_i=class{constructor(e){return e}},yi=class{constructor(){return di(Sy)}};var ah=new se("angularfire2.auth-instances");function SA(n,e){let t=Yi(Sy,n,e);return t&&new _i(t)}function AA(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new _i(i)}}var DA={provide:yi,deps:[[new qe,ah]]},CA={provide:_i,useFactory:SA,deps:[[new qe,ah],It]};function Ay(n,...e){return be("angularfire",Zt.full,"auth"),ct([CA,DA,{provide:ah,useFactory:AA(n),multi:!0,deps:[Re,He,Nn,en,[new qe,kn],...e]}])}var Dy=yt(oh,!0);var Cy=yt(th,!0);var Ry=yt(sh,!0);var Oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Py={};var Bn,ch;(function(){var n;function e(w,g){function _(){}_.prototype=g.prototype,w.D=g.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(T,E,S){for(var y=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)y[dt-2]=arguments[dt];return g.prototype[E].apply(T,y)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,_){_||(_=0);var T=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)T[E]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(E=0;16>E;++E)T[E]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=w.g[0],_=w.g[1],E=w.g[2];var S=w.g[3],y=g+(S^_&(E^S))+T[0]+3614090360&4294967295;g=_+(y<<7&4294967295|y>>>25),y=S+(E^g&(_^E))+T[1]+3905402710&4294967295,S=g+(y<<12&4294967295|y>>>20),y=E+(_^S&(g^_))+T[2]+606105819&4294967295,E=S+(y<<17&4294967295|y>>>15),y=_+(g^E&(S^g))+T[3]+3250441966&4294967295,_=E+(y<<22&4294967295|y>>>10),y=g+(S^_&(E^S))+T[4]+4118548399&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(E^g&(_^E))+T[5]+1200080426&4294967295,S=g+(y<<12&4294967295|y>>>20),y=E+(_^S&(g^_))+T[6]+2821735955&4294967295,E=S+(y<<17&4294967295|y>>>15),y=_+(g^E&(S^g))+T[7]+4249261313&4294967295,_=E+(y<<22&4294967295|y>>>10),y=g+(S^_&(E^S))+T[8]+1770035416&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(E^g&(_^E))+T[9]+2336552879&4294967295,S=g+(y<<12&4294967295|y>>>20),y=E+(_^S&(g^_))+T[10]+4294925233&4294967295,E=S+(y<<17&4294967295|y>>>15),y=_+(g^E&(S^g))+T[11]+2304563134&4294967295,_=E+(y<<22&4294967295|y>>>10),y=g+(S^_&(E^S))+T[12]+1804603682&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(E^g&(_^E))+T[13]+4254626195&4294967295,S=g+(y<<12&4294967295|y>>>20),y=E+(_^S&(g^_))+T[14]+2792965006&4294967295,E=S+(y<<17&4294967295|y>>>15),y=_+(g^E&(S^g))+T[15]+1236535329&4294967295,_=E+(y<<22&4294967295|y>>>10),y=g+(E^S&(_^E))+T[1]+4129170786&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^E&(g^_))+T[6]+3225465664&4294967295,S=g+(y<<9&4294967295|y>>>23),y=E+(g^_&(S^g))+T[11]+643717713&4294967295,E=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(E^S))+T[0]+3921069994&4294967295,_=E+(y<<20&4294967295|y>>>12),y=g+(E^S&(_^E))+T[5]+3593408605&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^E&(g^_))+T[10]+38016083&4294967295,S=g+(y<<9&4294967295|y>>>23),y=E+(g^_&(S^g))+T[15]+3634488961&4294967295,E=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(E^S))+T[4]+3889429448&4294967295,_=E+(y<<20&4294967295|y>>>12),y=g+(E^S&(_^E))+T[9]+568446438&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^E&(g^_))+T[14]+3275163606&4294967295,S=g+(y<<9&4294967295|y>>>23),y=E+(g^_&(S^g))+T[3]+4107603335&4294967295,E=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(E^S))+T[8]+1163531501&4294967295,_=E+(y<<20&4294967295|y>>>12),y=g+(E^S&(_^E))+T[13]+2850285829&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^E&(g^_))+T[2]+4243563512&4294967295,S=g+(y<<9&4294967295|y>>>23),y=E+(g^_&(S^g))+T[7]+1735328473&4294967295,E=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(E^S))+T[12]+2368359562&4294967295,_=E+(y<<20&4294967295|y>>>12),y=g+(_^E^S)+T[5]+4294588738&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^E)+T[8]+2272392833&4294967295,S=g+(y<<11&4294967295|y>>>21),y=E+(S^g^_)+T[11]+1839030562&4294967295,E=S+(y<<16&4294967295|y>>>16),y=_+(E^S^g)+T[14]+4259657740&4294967295,_=E+(y<<23&4294967295|y>>>9),y=g+(_^E^S)+T[1]+2763975236&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^E)+T[4]+1272893353&4294967295,S=g+(y<<11&4294967295|y>>>21),y=E+(S^g^_)+T[7]+4139469664&4294967295,E=S+(y<<16&4294967295|y>>>16),y=_+(E^S^g)+T[10]+3200236656&4294967295,_=E+(y<<23&4294967295|y>>>9),y=g+(_^E^S)+T[13]+681279174&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^E)+T[0]+3936430074&4294967295,S=g+(y<<11&4294967295|y>>>21),y=E+(S^g^_)+T[3]+3572445317&4294967295,E=S+(y<<16&4294967295|y>>>16),y=_+(E^S^g)+T[6]+76029189&4294967295,_=E+(y<<23&4294967295|y>>>9),y=g+(_^E^S)+T[9]+3654602809&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^E)+T[12]+3873151461&4294967295,S=g+(y<<11&4294967295|y>>>21),y=E+(S^g^_)+T[15]+530742520&4294967295,E=S+(y<<16&4294967295|y>>>16),y=_+(E^S^g)+T[2]+3299628645&4294967295,_=E+(y<<23&4294967295|y>>>9),y=g+(E^(_|~S))+T[0]+4096336452&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~E))+T[7]+1126891415&4294967295,S=g+(y<<10&4294967295|y>>>22),y=E+(g^(S|~_))+T[14]+2878612391&4294967295,E=S+(y<<15&4294967295|y>>>17),y=_+(S^(E|~g))+T[5]+4237533241&4294967295,_=E+(y<<21&4294967295|y>>>11),y=g+(E^(_|~S))+T[12]+1700485571&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~E))+T[3]+2399980690&4294967295,S=g+(y<<10&4294967295|y>>>22),y=E+(g^(S|~_))+T[10]+4293915773&4294967295,E=S+(y<<15&4294967295|y>>>17),y=_+(S^(E|~g))+T[1]+2240044497&4294967295,_=E+(y<<21&4294967295|y>>>11),y=g+(E^(_|~S))+T[8]+1873313359&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~E))+T[15]+4264355552&4294967295,S=g+(y<<10&4294967295|y>>>22),y=E+(g^(S|~_))+T[6]+2734768916&4294967295,E=S+(y<<15&4294967295|y>>>17),y=_+(S^(E|~g))+T[13]+1309151649&4294967295,_=E+(y<<21&4294967295|y>>>11),y=g+(E^(_|~S))+T[4]+4149444226&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~E))+T[11]+3174756917&4294967295,S=g+(y<<10&4294967295|y>>>22),y=E+(g^(S|~_))+T[2]+718787259&4294967295,E=S+(y<<15&4294967295|y>>>17),y=_+(S^(E|~g))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(E+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+E&4294967295,w.g[3]=w.g[3]+S&4294967295}i.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var _=g-this.blockSize,T=this.B,E=this.h,S=0;S<g;){if(E==0)for(;S<=_;)s(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<g;)if(T[E++]=w.charCodeAt(S++),E==this.blockSize){s(this,T),E=0;break}}else for(;S<g;)if(T[E++]=w[S++],E==this.blockSize){s(this,T),E=0;break}}this.h=E,this.o+=g},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var _=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=_&255,_/=256;for(this.u(w),w=Array(16),g=_=0;4>g;++g)for(var T=0;32>T;T+=8)w[_++]=this.g[g]>>>T&255;return w};function r(w,g){var _=c;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=g(w)}function a(w,g){this.h=g;for(var _=[],T=!0,E=w.length-1;0<=E;E--){var S=w[E]|0;T&&S==g||(_[E]=S,T=!1)}this.g=_}var c={};function l(w){return-128<=w&&128>w?r(w,function(g){return new a([g|0],0>g?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return O(h(-w));for(var g=[],_=1,T=0;w>=_;T++)g[T]=w/_|0,_*=4294967296;return new a(g,0)}function f(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return O(f(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(g,8)),T=m,E=0;E<w.length;E+=8){var S=Math.min(8,w.length-E),y=parseInt(w.substring(E,E+S),g);8>S?(S=h(Math.pow(g,S)),T=T.j(S).add(h(y))):(T=T.j(_),T=T.add(h(y)))}return T}var m=l(0),v=l(1),A=l(16777216);n=a.prototype,n.m=function(){if(R(this))return-O(this).m();for(var w=0,g=1,_=0;_<this.g.length;_++){var T=this.i(_);w+=(0<=T?T:4294967296+T)*g,g*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(R(this))return"-"+O(this).toString(w);for(var g=h(Math.pow(w,6)),_=this,T="";;){var E=P(_,g).g;_=F(_,E.j(g));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=E,D(_))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function R(w){return w.h==-1}n.l=function(w){return w=F(this,w),R(w)?-1:D(w)?0:1};function O(w){for(var g=w.g.length,_=[],T=0;T<g;T++)_[T]=~w.g[T];return new a(_,~w.h).add(v)}n.abs=function(){return R(this)?O(this):this},n.add=function(w){for(var g=Math.max(this.g.length,w.g.length),_=[],T=0,E=0;E<=g;E++){var S=T+(this.i(E)&65535)+(w.i(E)&65535),y=(S>>>16)+(this.i(E)>>>16)+(w.i(E)>>>16);T=y>>>16,S&=65535,y&=65535,_[E]=y<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function F(w,g){return w.add(O(g))}n.j=function(w){if(D(this)||D(w))return m;if(R(this))return R(w)?O(this).j(O(w)):O(O(this).j(w));if(R(w))return O(this.j(O(w)));if(0>this.l(A)&&0>w.l(A))return h(this.m()*w.m());for(var g=this.g.length+w.g.length,_=[],T=0;T<2*g;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var E=0;E<w.g.length;E++){var S=this.i(T)>>>16,y=this.i(T)&65535,dt=w.i(E)>>>16,hn=w.i(E)&65535;_[2*T+2*E]+=y*hn,L(_,2*T+2*E),_[2*T+2*E+1]+=S*hn,L(_,2*T+2*E+1),_[2*T+2*E+1]+=y*dt,L(_,2*T+2*E+1),_[2*T+2*E+2]+=S*dt,L(_,2*T+2*E+2)}for(T=0;T<g;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=g;T<2*g;T++)_[T]=0;return new a(_,0)};function L(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function U(w,g){this.g=w,this.h=g}function P(w,g){if(D(g))throw Error("division by zero");if(D(w))return new U(m,m);if(R(w))return g=P(O(w),g),new U(O(g.g),O(g.h));if(R(g))return g=P(w,O(g)),new U(O(g.g),g.h);if(30<w.g.length){if(R(w)||R(g))throw Error("slowDivide_ only works with positive integers.");for(var _=v,T=g;0>=T.l(w);)_=z(_),T=z(T);var E=x(_,1),S=x(T,1);for(T=x(T,2),_=x(_,2);!D(T);){var y=S.add(T);0>=y.l(w)&&(E=E.add(_),S=y),T=x(T,1),_=x(_,1)}return g=F(w,E.j(g)),new U(E,g)}for(E=m;0<=w.l(g);){for(_=Math.max(1,Math.floor(w.m()/g.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=h(_),y=S.j(g);R(y)||0<y.l(w);)_-=T,S=h(_),y=S.j(g);D(S)&&(S=v),E=E.add(S),w=F(w,y)}return new U(E,w)}n.A=function(w){return P(this,w).h},n.and=function(w){for(var g=Math.max(this.g.length,w.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)&w.i(T);return new a(_,this.h&w.h)},n.or=function(w){for(var g=Math.max(this.g.length,w.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)|w.i(T);return new a(_,this.h|w.h)},n.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),_=[],T=0;T<g;T++)_[T]=this.i(T)^w.i(T);return new a(_,this.h^w.h)};function z(w){for(var g=w.g.length+1,_=[],T=0;T<g;T++)_[T]=w.i(T)<<1|w.i(T-1)>>>31;return new a(_,w.h)}function x(w,g){var _=g>>5;g%=32;for(var T=w.g.length-_,E=[],S=0;S<T;S++)E[S]=0<g?w.i(S+_)>>>g|w.i(S+_+1)<<32-g:w.i(S+_);return new a(E,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ch=Py.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Bn=Py.Integer=a}).apply(typeof Oy<"u"?Oy:typeof self<"u"?self:typeof window<"u"?window:{});var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sn={};var lh,uh,es,hh,yr,Aa,dh,fh,ph;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sa=="object"&&Sa];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var i=t(this);function s(o,u){if(u)e:{var d=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var I=o[p];if(!(I in d))break e;d=d[I]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function r(o,u){o instanceof String&&(o+="");var d=0,p=!1,I={next:function(){if(!p&&d<o.length){var C=d++;return{value:u(C,o[C]),done:!1}}return p=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}s("Array.prototype.values",function(o){return o||function(){return r(this,function(u,d){return d})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,d){return o.call.apply(o.bind,arguments)}function m(o,u,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,p),o.apply(u,I)}}return function(){return o.apply(u,arguments)}}function v(o,u,d){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function A(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,I,C){for(var k=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)k[ge-2]=arguments[ge];return u.prototype[I].apply(p,k)}}function R(o){let u=o.length;if(0<u){let d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function O(o,u){for(let d=1;d<arguments.length;d++){let p=arguments[d];if(l(p)){let I=o.length||0,C=p.length||0;o.length=I+C;for(let k=0;k<C;k++)o[I+k]=p[k]}else o.push(p)}}class F{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function L(o){return/^[\s\xa0]*$/.test(o)}function U(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function P(o){return P[" "](o),o}P[" "]=function(){};var z=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function x(o,u,d){for(let p in o)u.call(d,o[p],p,o)}function w(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let d,p;for(let I=1;I<arguments.length;I++){p=arguments[I];for(d in p)o[d]=p[d];for(let C=0;C<_.length;C++)d=_[C],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function E(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function S(o){c.setTimeout(()=>{throw o},0)}function y(){var o=ee;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class dt{constructor(){this.h=this.g=null}add(u,d){let p=hn.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var hn=new F(()=>new V,o=>o.reset());class V{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let $,j=!1,ee=new dt,Ce=()=>{let o=c.Promise.resolve(void 0);$=()=>{o.then(ft)}};var ft=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(d){S(d)}var u=hn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}j=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o}();function dn(o,u){if(ye.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(z){e:{try{P(u.nodeName);var I=!0;break e}catch{}I=!1}I||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:wc[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&dn.aa.h.call(this)}}D(dn,ye);var wc={2:"touch",3:"pen",4:"mouse"};dn.prototype.h=function(){dn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function it(o,u,d,p,I){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=I,this.key=++Gt,this.da=this.fa=!1}function qt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function fn(o){this.src=o,this.g={},this.h=0}fn.prototype.add=function(o,u,d,p,I){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var k=Tc(o,u,p,I);return-1<k?(u=o[k],d||(u.fa=!1)):(u=new it(u,this.src,C,!!p,I),u.fa=d,o.push(u)),u};function bc(o,u){var d=u.type;if(d in o.g){var p=o.g[d],I=Array.prototype.indexOf.call(p,u,void 0),C;(C=0<=I)&&Array.prototype.splice.call(p,I,1),C&&(qt(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Tc(o,u,d,p){for(var I=0;I<o.length;++I){var C=o[I];if(!C.da&&C.listener==u&&C.capture==!!d&&C.ha==p)return I}return-1}var Ec="closure_lm_"+(1e6*Math.random()|0),Ic={};function Wf(o,u,d,p,I){if(p&&p.once)return Qf(o,u,d,p,I);if(Array.isArray(u)){for(var C=0;C<u.length;C++)Wf(o,u[C],d,p,I);return null}return d=Cc(d),o&&o[Ie]?o.K(u,d,h(p)?!!p.capture:!!p,I):Kf(o,u,d,!1,p,I)}function Kf(o,u,d,p,I,C){if(!u)throw Error("Invalid event type");var k=h(I)?!!I.capture:!!I,ge=Ac(o);if(ge||(o[Ec]=ge=new fn(o)),d=ge.add(u,d,p,k,C),d.proxy)return d;if(p=Nw(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)ve||(I=k),I===void 0&&(I=!1),o.addEventListener(u.toString(),p,I);else if(o.attachEvent)o.attachEvent(Yf(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Nw(){function o(d){return u.call(o.src,o.listener,d)}let u=xw;return o}function Qf(o,u,d,p,I){if(Array.isArray(u)){for(var C=0;C<u.length;C++)Qf(o,u[C],d,p,I);return null}return d=Cc(d),o&&o[Ie]?o.L(u,d,h(p)?!!p.capture:!!p,I):Kf(o,u,d,!0,p,I)}function Jf(o,u,d,p,I){if(Array.isArray(u))for(var C=0;C<u.length;C++)Jf(o,u[C],d,p,I);else p=h(p)?!!p.capture:!!p,d=Cc(d),o&&o[Ie]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],d=Tc(C,d,p,I),-1<d&&(qt(C[d]),Array.prototype.splice.call(C,d,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=Ac(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Tc(u,d,p,I)),(d=-1<o?u[o]:null)&&Sc(d))}function Sc(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ie])bc(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(Yf(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=Ac(u))?(bc(d,o),d.h==0&&(d.src=null,u[Ec]=null)):qt(o)}}}function Yf(o){return o in Ic?Ic[o]:Ic[o]="on"+o}function xw(o,u){if(o.da)o=!0;else{u=new dn(u,this);var d=o.listener,p=o.ha||o.src;o.fa&&Sc(o),o=d.call(p,u)}return o}function Ac(o){return o=o[Ec],o instanceof fn?o:null}var Dc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cc(o){return typeof o=="function"?o:(o[Dc]||(o[Dc]=function(u){return o.handleEvent(u)}),o[Dc])}function ze(){Ee.call(this),this.i=new fn(this),this.M=this,this.F=null}D(ze,Ee),ze.prototype[Ie]=!0,ze.prototype.removeEventListener=function(o,u,d,p){Jf(this,o,u,d,p)};function Ze(o,u){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new ye(u,o);else if(u instanceof ye)u.target=u.target||o;else{var I=u;u=new ye(p,o),T(u,I)}if(I=!0,d)for(var C=d.length-1;0<=C;C--){var k=u.g=d[C];I=Hr(k,p,!0,u)&&I}if(k=u.g=o,I=Hr(k,p,!0,u)&&I,I=Hr(k,p,!1,u)&&I,d)for(C=0;C<d.length;C++)k=u.g=d[C],I=Hr(k,p,!1,u)&&I}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],p=0;p<d.length;p++)qt(d[p]);delete o.g[u],o.h--}}this.F=null},ze.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},ze.prototype.L=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function Hr(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var I=!0,C=0;C<u.length;++C){var k=u[C];if(k&&!k.da&&k.capture==d){var ge=k.listener,je=k.ha||k.src;k.fa&&bc(o.i,k),I=ge.call(je,p)!==!1&&I}}return I&&!p.defaultPrevented}function Xf(o,u,d){if(typeof o=="function")d&&(o=v(o,d));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function Zf(o){o.g=Xf(()=>{o.g=null,o.i&&(o.i=!1,Zf(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Fw extends Ee{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Zf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(o){Ee.call(this),this.h=o,this.g={}}D(As,Ee);var ep=[];function tp(o){x(o.g,function(u,d){this.g.hasOwnProperty(d)&&Sc(u)},o),o.g={}}As.prototype.N=function(){As.aa.N.call(this),tp(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rc=c.JSON.stringify,Vw=c.JSON.parse,Lw=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Oc(){}Oc.prototype.h=null;function np(o){return o.h||(o.h=o.i())}function ip(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pc(){ye.call(this,"d")}D(Pc,ye);function Mc(){ye.call(this,"c")}D(Mc,ye);var zn={},sp=null;function zr(){return sp=sp||new ze}zn.La="serverreachability";function rp(o){ye.call(this,zn.La,o)}D(rp,ye);function Cs(o){let u=zr();Ze(u,new rp(u))}zn.STAT_EVENT="statevent";function op(o,u){ye.call(this,zn.STAT_EVENT,o),this.stat=u}D(op,ye);function et(o){let u=zr();Ze(u,new op(u,o))}zn.Ma="timingevent";function ap(o,u){ye.call(this,zn.Ma,o),this.size=u}D(ap,ye);function Rs(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Bw(o,u,d,p,I,C){o.info(function(){if(o.g)if(C)for(var k="",ge=C.split("&"),je=0;je<ge.length;je++){var ae=ge[je].split("=");if(1<ae.length){var We=ae[0];ae=ae[1];var Ke=We.split("_");k=2<=Ke.length&&Ke[1]=="type"?k+(We+"="+ae+"&"):k+(We+"=redacted&")}}else k=null;else k=C;return"XMLHTTP REQ ("+p+") [attempt "+I+"]: "+u+`
`+d+`
`+k})}function Uw(o,u,d,p,I,C,k){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+I+"]: "+u+`
`+d+`
`+C+" "+k})}function Ci(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+jw(o,d)+(p?" "+p:"")})}function $w(o,u){o.info(function(){return"TIMEOUT: "+u})}Os.prototype.info=function(){};function jw(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var I=p[1];if(Array.isArray(I)&&!(1>I.length)){var C=I[0];if(C!="noop"&&C!="stop"&&C!="close")for(var k=1;k<I.length;k++)I[k]=""}}}}return Rc(d)}catch{return u}}var Wr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kc;function Kr(){}D(Kr,Oc),Kr.prototype.g=function(){return new XMLHttpRequest},Kr.prototype.i=function(){return{}},kc=new Kr;function pn(o,u,d,p){this.j=o,this.i=u,this.l=d,this.R=p||1,this.U=new As(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lp}function lp(){this.i=null,this.g="",this.h=!1}var up={},Nc={};function xc(o,u,d){o.L=1,o.v=Xr(Ht(u)),o.m=d,o.P=!0,hp(o,null)}function hp(o,u){o.F=Date.now(),Qr(o),o.A=Ht(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Sp(d.i,"t",p),o.C=0,d=o.j.J,o.h=new lp,o.g=Gp(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Fw(v(o.Y,o,o.g),o.O)),u=o.U,d=o.g,p=o.ca;var I="readystatechange";Array.isArray(I)||(I&&(ep[0]=I.toString()),I=ep);for(var C=0;C<I.length;C++){var k=Wf(d,I[C],p||u.handleEvent,!1,u.h||u);if(!k)break;u.g[k.key]=k}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Cs(),Bw(o.i,o.u,o.A,o.l,o.R,o.m)}pn.prototype.ca=function(o){o=o.target;let u=this.M;u&&zt(o)==3?u.j():this.Y(o)},pn.prototype.Y=function(o){try{if(o==this.g)e:{let Ke=zt(this.g);var u=this.g.Ba();let Pi=this.g.Z();if(!(3>Ke)&&(Ke!=3||this.g&&(this.h.h||this.g.oa()||Mp(this.g)))){this.J||Ke!=4||u==7||(u==8||0>=Pi?Cs(3):Cs(2)),Fc(this);var d=this.g.Z();this.X=d;t:if(dp(this)){var p=Mp(this.g);o="";var I=p.length,C=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Ps(this);var k="";break t}this.h.i=new c.TextDecoder}for(u=0;u<I;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(C&&u==I-1)});p.length=0,this.h.g+=o,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=d==200,Uw(this.i,this.u,this.A,this.l,this.R,Ke,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,je=this.g;if((ge=je.g?je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(ge)){var ae=ge;break t}}ae=null}if(d=ae)Ci(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vc(this,d);else{this.o=!1,this.s=3,et(12),Wn(this),Ps(this);break e}}if(this.P){d=!0;let wt;for(;!this.J&&this.C<k.length;)if(wt=Gw(this,k),wt==Nc){Ke==4&&(this.s=4,et(14),d=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==up){this.s=4,et(15),Ci(this.i,this.l,k,"[Invalid Chunk]"),d=!1;break}else Ci(this.i,this.l,wt,null),Vc(this,wt);if(dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||k.length!=0||this.h.h||(this.s=1,et(16),d=!1),this.o=this.o&&d,!d)Ci(this.i,this.l,k,"[Invalid Chunked Response]"),Wn(this),Ps(this);else if(0<k.length&&!this.W){this.W=!0;var We=this.j;We.g==this&&We.ba&&!We.M&&(We.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Gc(We),We.M=!0,et(11))}}else Ci(this.i,this.l,k,null),Vc(this,k);Ke==4&&Wn(this),this.o&&!this.J&&(Ke==4?Bp(this.j,this):(this.o=!1,Qr(this)))}else o1(this.g),d==400&&0<k.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),Wn(this),Ps(this)}}}catch{}finally{}};function dp(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Gw(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?Nc:(d=Number(u.substring(d,p)),isNaN(d)?up:(p+=1,p+d>u.length?Nc:(u=u.slice(p,p+d),o.C=p+d,u)))}pn.prototype.cancel=function(){this.J=!0,Wn(this)};function Qr(o){o.S=Date.now()+o.I,fp(o,o.I)}function fp(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Rs(v(o.ba,o),u)}function Fc(o){o.B&&(c.clearTimeout(o.B),o.B=null)}pn.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?($w(this.i,this.A),this.L!=2&&(Cs(),et(17)),Wn(this),this.s=2,Ps(this)):fp(this,this.S-o)};function Ps(o){o.j.G==0||o.J||Bp(o.j,o)}function Wn(o){Fc(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,tp(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Vc(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Lc(d.h,o))){if(!o.K&&Lc(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var I=p;if(I[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)io(d),to(d);else break e;jc(d),et(18)}}else d.za=I[1],0<d.za-d.T&&37500>I[2]&&d.F&&d.v==0&&!d.C&&(d.C=Rs(v(d.Za,d),6e3));if(1>=gp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Qn(d,11)}else if((o.K||d.g==o)&&io(d),!L(u))for(I=d.Da.g.parse(u),u=0;u<I.length;u++){let ae=I[u];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];let We=ae[3];We!=null&&(d.la=We,d.j.info("VER="+d.la));let Ke=ae[4];Ke!=null&&(d.Aa=Ke,d.j.info("SVER="+d.Aa));let Pi=ae[5];Pi!=null&&typeof Pi=="number"&&0<Pi&&(p=1.5*Pi,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;let wt=o.g;if(wt){let ro=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var C=p.h;C.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Bc(C,C.h),C.h=null))}if(p.D){let qc=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;qc&&(p.ya=qc,we(p.I,p.D,qc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var k=o;if(p.qa=jp(p,p.J?p.ia:null,p.W),k.K){_p(p.h,k);var ge=k,je=p.L;je&&(ge.I=je),ge.B&&(Fc(ge),Qr(ge)),p.g=k}else Vp(p);0<d.i.length&&no(d)}else ae[0]!="stop"&&ae[0]!="close"||Qn(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Qn(d,7):$c(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}Cs(4)}catch{}}var qw=class{constructor(o,u){this.g=o,this.map=u}};function pp(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function gp(o){return o.h?1:o.g?o.g.size:0}function Lc(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Bc(o,u){o.g?o.g.add(u):o.h=u}function _p(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}pp.prototype.cancel=function(){if(this.i=yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function yp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return R(o.i)}function Hw(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],d=o.length,p=0;p<d;p++)u.push(o[p]);return u}u=[],d=0;for(p in o)u[d++]=o[p];return u}function zw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let p in o)u[d++]=p;return u}}}function vp(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=zw(o),p=Hw(o),I=p.length,C=0;C<I;C++)u.call(void 0,p[C],d&&d[C],o)}var wp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ww(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),I=null;if(0<=p){var C=o[d].substring(0,p);I=o[d].substring(p+1)}else C=o[d];u(C,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Kn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Kn){this.h=o.h,Jr(this,o.j),this.o=o.o,this.g=o.g,Yr(this,o.s),this.l=o.l;var u=o.i,d=new Ns;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),bp(this,d),this.m=o.m}else o&&(u=String(o).match(wp))?(this.h=!1,Jr(this,u[1]||"",!0),this.o=Ms(u[2]||""),this.g=Ms(u[3]||"",!0),Yr(this,u[4]),this.l=Ms(u[5]||"",!0),bp(this,u[6]||"",!0),this.m=Ms(u[7]||"")):(this.h=!1,this.i=new Ns(null,this.h))}Kn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(ks(u,Tp,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(ks(u,Tp,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(ks(d,d.charAt(0)=="/"?Jw:Qw,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",ks(d,Xw)),o.join("")};function Ht(o){return new Kn(o)}function Jr(o,u,d){o.j=d?Ms(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Yr(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function bp(o,u,d){u instanceof Ns?(o.i=u,Zw(o.i,o.h)):(d||(u=ks(u,Yw)),o.i=new Ns(u,o.h))}function we(o,u,d){o.i.set(u,d)}function Xr(o){return we(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ms(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ks(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Kw),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Kw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Tp=/[#\/\?@]/g,Qw=/[#\?:]/g,Jw=/[#\?]/g,Yw=/[#\?@]/g,Xw=/#/g;function Ns(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function mn(o){o.g||(o.g=new Map,o.h=0,o.i&&Ww(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Ns.prototype,n.add=function(o,u){mn(this),this.i=null,o=Ri(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Ep(o,u){mn(o),u=Ri(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Ip(o,u){return mn(o),u=Ri(o,u),o.g.has(u)}n.forEach=function(o,u){mn(this),this.g.forEach(function(d,p){d.forEach(function(I){o.call(u,I,p,this)},this)},this)},n.na=function(){mn(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){let I=o[p];for(let C=0;C<I.length;C++)d.push(u[p])}return d},n.V=function(o){mn(this);let u=[];if(typeof o=="string")Ip(this,o)&&(u=u.concat(this.g.get(Ri(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return mn(this),this.i=null,o=Ri(this,o),Ip(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Sp(o,u,d){Ep(o,u),0<d.length&&(o.i=null,o.g.set(Ri(o,u),R(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];let C=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var I=C;k[p]!==""&&(I+="="+encodeURIComponent(String(k[p]))),o.push(I)}}return this.i=o.join("&")};function Ri(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Zw(o,u){u&&!o.j&&(mn(o),o.i=null,o.g.forEach(function(d,p){var I=p.toLowerCase();p!=I&&(Ep(this,p),Sp(this,I,d))},o)),o.j=u}function e1(o,u){let d=new Os;if(c.Image){let p=new Image;p.onload=A(gn,d,"TestLoadImage: loaded",!0,u,p),p.onerror=A(gn,d,"TestLoadImage: error",!1,u,p),p.onabort=A(gn,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=A(gn,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function t1(o,u){let d=new Os,p=new AbortController,I=setTimeout(()=>{p.abort(),gn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(I),C.ok?gn(d,"TestPingServer: ok",!0,u):gn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(I),gn(d,"TestPingServer: error",!1,u)})}function gn(o,u,d,p,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),p(d)}catch{}}function n1(){this.g=new Lw}function i1(o,u,d){let p=d||"";try{vp(o,function(I,C){let k=I;h(I)&&(k=Rc(I)),u.push(p+C+"="+encodeURIComponent(k))})}catch(I){throw u.push(p+"type="+encodeURIComponent("_badmap")),I}}function xs(o){this.l=o.Ub||null,this.j=o.eb||!1}D(xs,Oc),xs.prototype.g=function(){return new Zr(this.l,this.j)},xs.prototype.i=function(o){return function(){return o}}({});function Zr(o,u){ze.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Zr,ze),n=Zr.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Vs(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ap(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ap(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Fs(this):Vs(this),this.readyState==3&&Ap(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Fs(this))},n.Qa=function(o){this.g&&(this.response=o,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Vs(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Vs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Zr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Dp(o){let u="";return x(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Uc(o,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Dp(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):we(o,u,d))}function Se(o){ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Se,ze);var s1=/^https?$/i,r1=["POST","PUT"];n=Se.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kc.g(),this.v=this.o?np(this.o):np(kc),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){Cp(this,C);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var I in p)d.set(I,p[I]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let C of p.keys())d.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(C=>C.toLowerCase()=="content-type"),I=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(r1,u,void 0))||p||I||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,k]of d)this.g.setRequestHeader(C,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pp(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){Cp(this,C)}};function Cp(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Rp(o),eo(o)}function Rp(o){o.A||(o.A=!0,Ze(o,"complete"),Ze(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ze(this,"complete"),Ze(this,"abort"),eo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eo(this,!0)),Se.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Op(this):this.bb())},n.bb=function(){Op(this)};function Op(o){if(o.h&&typeof a<"u"&&(!o.v[1]||zt(o)!=4||o.Z()!=2)){if(o.u&&zt(o)==4)Xf(o.Ea,0,o);else if(Ze(o,"readystatechange"),zt(o)==4){o.h=!1;try{let k=o.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=k===0){var I=String(o.D).match(wp)[1]||null;!I&&c.self&&c.self.location&&(I=c.self.location.protocol.slice(0,-1)),p=!s1.test(I?I.toLowerCase():"")}d=p}if(d)Ze(o,"complete"),Ze(o,"success");else{o.m=6;try{var C=2<zt(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Rp(o)}}finally{eo(o)}}}}function eo(o,u){if(o.g){Pp(o);let d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ze(o,"ready");try{d.onreadystatechange=p}catch{}}}function Pp(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function zt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Vw(u)}};function Mp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function o1(o){let u={};o=(o.g&&2<=zt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(L(o[p]))continue;var d=E(o[p]);let I=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let C=u[I]||[];u[I]=C,C.push(d)}w(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function kp(o){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,o),this.cb=Ls("retryDelaySeedMs",1e4,o),this.Wa=Ls("forwardChannelMaxRetries",2,o),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new pp(o&&o.concurrentRequestLimit),this.Da=new n1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kp.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,p){et(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=jp(this,null,this.W),no(this)};function $c(o){if(Np(o),o.G==3){var u=o.U++,d=Ht(o.I);if(we(d,"SID",o.K),we(d,"RID",u),we(d,"TYPE","terminate"),Bs(o,d),u=new pn(o,o.j,u),u.L=2,u.v=Xr(Ht(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=Gp(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Qr(u)}$p(o)}function to(o){o.g&&(Gc(o),o.g.cancel(),o.g=null)}function Np(o){to(o),o.u&&(c.clearTimeout(o.u),o.u=null),io(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function no(o){if(!mp(o.h)&&!o.s){o.s=!0;var u=o.Ga;$||Ce(),j||($(),j=!0),ee.add(u,o),o.B=0}}function a1(o,u){return gp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Rs(v(o.Ga,o,u),Up(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let I=new pn(this,this.j,o),C=this.o;if(this.S&&(C?(C=g(C),T(C,this.S)):C=this.S),this.m!==null||this.O||(I.H=C,C=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Fp(this,I,u),d=Ht(this.I),we(d,"RID",o),we(d,"CVER",22),this.D&&we(d,"X-HTTP-Session-Id",this.D),Bs(this,d),C&&(this.O?u="headers="+encodeURIComponent(String(Dp(C)))+"&"+u:this.m&&Uc(d,this.m,C)),Bc(this.h,I),this.Ua&&we(d,"TYPE","init"),this.P?(we(d,"$req",u),we(d,"SID","null"),I.T=!0,xc(I,d,null)):xc(I,d,u),this.G=2}}else this.G==3&&(o?xp(this,o):this.i.length==0||mp(this.h)||xp(this))};function xp(o,u){var d;u?d=u.l:d=o.U++;let p=Ht(o.I);we(p,"SID",o.K),we(p,"RID",d),we(p,"AID",o.T),Bs(o,p),o.m&&o.o&&Uc(p,o.m,o.o),d=new pn(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Fp(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Bc(o.h,d),xc(d,p,u)}function Bs(o,u){o.H&&x(o.H,function(d,p){we(u,p,d)}),o.l&&vp({},function(d,p){we(u,p,d)})}function Fp(o,u,d){d=Math.min(o.i.length,d);var p=o.l?v(o.l.Na,o.l,o):null;e:{var I=o.i;let C=-1;for(;;){let k=["count="+d];C==-1?0<d?(C=I[0].g,k.push("ofs="+C)):C=0:k.push("ofs="+C);let ge=!0;for(let je=0;je<d;je++){let ae=I[je].g,We=I[je].map;if(ae-=C,0>ae)C=Math.max(0,I[je].g-100),ge=!1;else try{i1(We,k,"req"+ae+"_")}catch{p&&p(We)}}if(ge){p=k.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,p}function Vp(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;$||Ce(),j||($(),j=!0),ee.add(u,o),o.v=0}}function jc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Rs(v(o.Fa,o),Up(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Lp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Rs(v(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),to(this),Lp(this))};function Gc(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Lp(o){o.g=new pn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ht(o.qa);we(u,"RID","rpc"),we(u,"SID",o.K),we(u,"AID",o.T),we(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&we(u,"TO",o.ja),we(u,"TYPE","xmlhttp"),Bs(o,u),o.m&&o.o&&Uc(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Xr(Ht(u)),d.m=null,d.P=!0,hp(d,o)}n.Za=function(){this.C!=null&&(this.C=null,to(this),jc(this),et(19))};function io(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Bp(o,u){var d=null;if(o.g==u){io(o),Gc(o),o.g=null;var p=2}else if(Lc(o.h,u))d=u.D,_p(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var I=o.B;p=zr(),Ze(p,new ap(p,d)),no(o)}else Vp(o);else if(I=u.s,I==3||I==0&&0<u.X||!(p==1&&a1(o,u)||p==2&&jc(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),I){case 1:Qn(o,5);break;case 4:Qn(o,10);break;case 3:Qn(o,6);break;default:Qn(o,2)}}}function Up(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Qn(o,u){if(o.j.info("Error code "+u),u==2){var d=v(o.fb,o),p=o.Xa;let I=!p;p=new Kn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jr(p,"https"),Xr(p),I?e1(p.toString(),d):t1(p.toString(),d)}else et(2);o.G=0,o.l&&o.l.sa(u),$p(o),Np(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function $p(o){if(o.G=0,o.ka=[],o.l){let u=yp(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function jp(o,u,d){var p=d instanceof Kn?Ht(d):new Kn(d);if(p.g!="")u&&(p.g=u+"."+p.g),Yr(p,p.s);else{var I=c.location;p=I.protocol,u=u?u+"."+I.hostname:I.hostname,I=+I.port;var C=new Kn(null);p&&Jr(C,p),u&&(C.g=u),I&&Yr(C,I),d&&(C.l=d),p=C}return d=o.D,u=o.ya,d&&u&&we(p,d,u),we(p,"VER",o.la),Bs(o,p),p}function Gp(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Se(new xs({eb:d})):new Se(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qp(){}n=qp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function so(){}so.prototype.g=function(o,u){return new at(o,u)};function at(o,u){ze.call(this),this.g=new kp(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!L(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!L(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Oi(this)}D(at,ze),at.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},at.prototype.close=function(){$c(this.g)},at.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Rc(o),o=d);u.i.push(new qw(u.Ya++,o)),u.G==3&&no(u)},at.prototype.N=function(){this.g.l=null,delete this.j,$c(this.g),delete this.g,at.aa.N.call(this)};function Hp(o){Pc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(Hp,Pc);function zp(){Mc.call(this),this.status=1}D(zp,Mc);function Oi(o){this.g=o}D(Oi,qp),Oi.prototype.ua=function(){Ze(this.g,"a")},Oi.prototype.ta=function(o){Ze(this.g,new Hp(o))},Oi.prototype.sa=function(o){Ze(this.g,new zp)},Oi.prototype.ra=function(){Ze(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,at.prototype.send=at.prototype.o,at.prototype.open=at.prototype.m,at.prototype.close=at.prototype.close,ph=sn.createWebChannelTransport=function(){return new so},fh=sn.getStatEventTarget=function(){return zr()},dh=sn.Event=zn,Aa=sn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,yr=sn.ErrorCode=Wr,cp.COMPLETE="complete",hh=sn.EventType=cp,ip.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",ze.prototype.listen=ze.prototype.K,es=sn.WebChannel=ip,uh=sn.FetchXmlHttpFactory=xs,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,lh=sn.XhrIo=Se}).apply(typeof Sa<"u"?Sa:typeof self<"u"?self:typeof window<"u"?window:{});var My="@firebase/firestore";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var ws="10.12.3";var Ei=new On("@firebase/firestore");function vr(){return Ei.logLevel}function B(n,...e){if(Ei.logLevel<=ne.DEBUG){let t=e.map(zd);Ei.debug(`Firestore (${ws}): ${n}`,...t)}}function an(n,...e){if(Ei.logLevel<=ne.ERROR){let t=e.map(zd);Ei.error(`Firestore (${ws}): ${n}`,...t)}}function cs(n,...e){if(Ei.logLevel<=ne.WARN){let t=e.map(zd);Ei.warn(`Firestore (${ws}): ${n}`,...t)}}function zd(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function J(n="Unexpected state"){let e=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: `+n;throw an(e),new Error(e)}function Fe(n,e){n||J()}function oe(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Un=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Pa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($e.UNAUTHENTICATED))}shutdown(){}},bh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Th=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),r=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Un,e.enqueueRetryable(()=>s(this.currentUser))};let a=()=>{let l=r;e.enqueueRetryable(()=>b(this,null,function*(){yield l.promise,yield s(this.currentUser)}))},c=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Un)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string"),new Pa(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new $e(e)}},Eh=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ih=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Eh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Sh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ah=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=r=>{r.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let a=r.token!==this.R;return this.R=r.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};let s=r=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?s(r):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string"),this.R=t.token,new Sh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function OA(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ma=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let s=OA(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}};function pe(n,e){return n<e?-1:n>e?1:0}function ls(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}var vt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new vt(0,0))}static max(){return new n(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ka=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&J(),i===void 0?i=e.length-t:i>e.length-t&&J(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let s=0;s<i;s++){let r=e.get(s),a=t.get(s);if(r<a)return-1;if(r>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},xe=class n extends ka{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new G(N.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new n(t)}static emptyPath(){return new n([])}},PA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class n extends ka{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return PA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",s=0,r=()=>{if(i.length===0)throw new G(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},a=!1;for(;s<e.length;){let c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(i+=c,s++):(r(),s++)}if(r(),a)throw new G(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};var Dh=class{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}};Dh.UNKNOWN_ID=-1;function MA(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Ii(s,H.empty(),e)}function kA(n){return new Ii(n.readTime,n.key,-1)}var Ii=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Z.min(),H.empty(),-1)}static max(){return new n(Z.max(),H.empty(),-1)}};function NA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var xA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ch=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Wd(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==xA)throw n;B("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let s=0,r=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++r,a&&r===s&&t()},l=>i(l))}),a=!0,r===s&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(s=>s?n.resolve(s):i());return t}static forEach(e,t){let i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new n((i,s)=>{let r=e.length,a=new Array(r),c=0;for(let l=0;l<r;l++){let h=l;t(e[h]).next(f=>{a[h]=f,++c,c===r&&i(a)},f=>s(f))}})}static doWhile(e,t){return new n((i,s)=>{let r=()=>{e()===!0?t().next(()=>{r()},s):i()};r()})}};function FA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Br(n){return n.name==="IndexedDbTransactionError"}var l0=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ie(s),this.se=s=>i.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sc(n){return n==null}function Na(n){return n===0&&1/n==-1/0}var VA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rk=[...VA,"documentOverlays"],LA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BA=LA,ok=[...BA,"indexConfiguration","indexState","indexEntries"];function ky(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function rc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Lt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lt=class n{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=r??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new n(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this,r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,i,s,r){return this}insert(e,t,i){return new Lt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xe=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xa(this.data.getIterator())}getIteratorFrom(e){return new xa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vi=class n{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xe(St.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Fa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Fa("Invalid base64 string: "+r):r}}(e);return new n(t)}static fromUint8Array(e){let t=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var $A=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cn(n){if(Fe(!!n),typeof n=="string"){let e=0,t=$A.exec(n);if(Fe(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:De(n.seconds),nanos:De(n.nanos)}}function De(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $n(n){return typeof n=="string"?nt.fromBase64String(n):nt.fromUint8Array(n)}function Kd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Qd(n){let e=n.mapValue.fields.__previous_value__;return Kd(e)?Qd(e):e}function Ar(n){let e=cn(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}var Rh=class{constructor(e,t,i,s,r,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},Va=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Da={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Si(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kd(n)?4:u0(n)?9007199254740991:10:J()}function Ut(n,e){if(n===e)return!0;let t=Si(n);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ar(n).isEqual(Ar(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;let a=cn(s.timestampValue),c=cn(r.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,r){return $n(s.bytesValue).isEqual($n(r.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,r){return De(s.geoPointValue.latitude)===De(r.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(r.geoPointValue.longitude)}(n,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return De(s.integerValue)===De(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){let a=De(s.doubleValue),c=De(r.doubleValue);return a===c?Na(a)===Na(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return ls(n.arrayValue.values||[],e.arrayValue.values||[],Ut);case 10:return function(s,r){let a=s.mapValue.fields||{},c=r.mapValue.fields||{};if(ky(a)!==ky(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Ut(a[l],c[l])))return!1;return!0}(n,e);default:return J()}}function Dr(n,e){return(n.values||[]).find(t=>Ut(t,e))!==void 0}function us(n,e){if(n===e)return 0;let t=Si(n),i=Si(e);if(t!==i)return pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(r,a){let c=De(r.integerValue||r.doubleValue),l=De(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Ny(n.timestampValue,e.timestampValue);case 4:return Ny(Ar(n),Ar(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(r,a){let c=$n(r),l=$n(a);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(r,a){let c=r.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){let f=pe(c[h],l[h]);if(f!==0)return f}return pe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,a){let c=pe(De(r.latitude),De(a.latitude));return c!==0?c:pe(De(r.longitude),De(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,a){let c=r.values||[],l=a.values||[];for(let h=0;h<c.length&&h<l.length;++h){let f=us(c[h],l[h]);if(f)return f}return pe(c.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,a){if(r===Da.mapValue&&a===Da.mapValue)return 0;if(r===Da.mapValue)return 1;if(a===Da.mapValue)return-1;let c=r.fields||{},l=Object.keys(c),h=a.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let v=pe(l[m],f[m]);if(v!==0)return v;let A=us(c[l[m]],h[f[m]]);if(A!==0)return A}return pe(l.length,f.length)}(n.mapValue,e.mapValue);default:throw J()}}function Ny(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=cn(n),i=cn(e),s=pe(t.seconds,i.seconds);return s!==0?s:pe(t.nanos,i.nanos)}function hs(n){return Oh(n)}function Oh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=cn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $n(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(let r of t.values||[])s?s=!1:i+=",",i+=Oh(r);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),s="{",r=!0;for(let a of i)r?r=!1:s+=",",s+=`${a}:${Oh(t.fields[a])}`;return s+"}"}(n.mapValue):J()}function Ph(n){return!!n&&"integerValue"in n}function Jd(n){return!!n&&"arrayValue"in n}function xy(n){return!!n&&"nullValue"in n}function Fy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mh(n){return!!n&&"mapValue"in n}function br(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return rc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=br(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=br(n.arrayValue.values[t]);return e}return Object.assign({},n)}function u0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var rn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=br(t)}setAll(e){let t=St.emptyPath(),i={},s=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=c.popLast()}a?i[c.lastSegment()]=br(a):s.push(c.lastSegment())});let r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){let t=this.field(e.popLast());mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];mh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){rc(t,(s,r)=>e[s]=r);for(let s of i)delete e[s]}clone(){return new n(br(this.value))}};var At=class n{constructor(e,t,i,s,r,a,c){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),rn.empty(),0)}static newFoundDocument(e,t,i,s){return new n(e,1,t,Z.min(),i,s,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ds=class{constructor(e,t){this.position=e,this.inclusive=t}};function Vy(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){let r=e[s],a=n.position[s];if(r.field.isKeyField()?i=H.comparator(H.fromName(a.referenceValue),t.key):i=us(a,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ly(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ut(n.position[t],e.position[t]))return!1;return!0}var fs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function jA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var La=class{},Ue=class n extends La{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kh(e,t,i):t==="array-contains"?new Fh(e,i):t==="in"?new Vh(e,i):t==="not-in"?new Lh(e,i):t==="array-contains-any"?new Bh(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Nh(e,i):new xh(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(us(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(us(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends La{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return h0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function h0(n){return n.op==="and"}function d0(n){return GA(n)&&h0(n)}function GA(n){for(let e of n.filters)if(e instanceof $t)return!1;return!0}function Mh(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+hs(n.value);if(d0(n))return n.filters.map(e=>Mh(e)).join(",");{let e=n.filters.map(t=>Mh(t)).join(",");return`${n.op}(${e})`}}function f0(n,e){return n instanceof Ue?function(i,s){return s instanceof Ue&&i.op===s.op&&i.field.isEqual(s.field)&&Ut(i.value,s.value)}(n,e):n instanceof $t?function(i,s){return s instanceof $t&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,c)=>r&&f0(a,s.filters[c]),!0):!1}(n,e):void J()}function p0(n){return n instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${hs(t.value)}`}(n):n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(p0).join(" ,")+"}"}(n):"Filter"}var kh=class extends Ue{constructor(e,t,i){super(e,t,i),this.key=H.fromName(i.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},Nh=class extends Ue{constructor(e,t){super(e,"in",t),this.keys=m0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},xh=class extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=m0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function m0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>H.fromName(i.referenceValue))}var Fh=class extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jd(t)&&Dr(t.arrayValue,this.value)}},Vh=class extends Ue{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Dr(this.value.arrayValue,t)}},Lh=class extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Dr(this.value.arrayValue,t)}},Bh=class extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Dr(this.value.arrayValue,i))}};var Uh=class{constructor(e,t=null,i=[],s=[],r=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=c,this.ue=null}};function By(n,e=null,t=[],i=[],s=null,r=null,a=null){return new Uh(n,e,t,i,s,r,a)}function Yd(n){let e=oe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Mh(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>hs(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>hs(i)).join(",")),e.ue=t}return e.ue}function Xd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!f0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ly(n.startAt,e.startAt)&&Ly(n.endAt,e.endAt)}function $h(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ps=class{constructor(e,t=null,i=[],s=[],r=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qA(n,e,t,i,s,r,a,c){return new ps(n,e,t,i,s,r,a,c)}function Zd(n){return new ps(n)}function Uy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HA(n){return n.collectionGroup!==null}function Tr(n){let e=oe(n);if(e.ce===null){e.ce=[];let t=new Set;for(let r of e.explicitOrderBy)e.ce.push(r),t.add(r.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Xe(St.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new fs(r,i))}),t.has(St.keyField().canonicalString())||e.ce.push(new fs(St.keyField(),i))}return e.ce}function Bt(n){let e=oe(n);return e.le||(e.le=zA(e,Tr(n))),e.le}function zA(n,e){if(n.limitType==="F")return By(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{let r=s.dir==="desc"?"asc":"desc";return new fs(s.field,r)});let t=n.endAt?new ds(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ds(n.startAt.position,n.startAt.inclusive):null;return By(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function jh(n,e,t){return new ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oc(n,e){return Xd(Bt(n),Bt(e))&&n.limitType===e.limitType}function g0(n){return`${Yd(Bt(n))}|lt:${n.limitType}`}function ts(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>p0(s)).join(", ")}]`),sc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>hs(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>hs(s)).join(",")),`Target(${i})`}(Bt(n))}; limitType=${n.limitType})`}function ac(n,e){return e.isFoundDocument()&&function(i,s){let r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):H.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(n,e)&&function(i,s){for(let r of Tr(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(n,e)&&function(i,s){for(let r of i.filters)if(!r.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(a,c,l){let h=Vy(a,c,l);return a.inclusive?h<=0:h<0}(i.startAt,Tr(i),s)||i.endAt&&!function(a,c,l){let h=Vy(a,c,l);return a.inclusive?h>=0:h>0}(i.endAt,Tr(i),s))}(n,e)}function WA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _0(n){return(e,t)=>{let i=!1;for(let s of Tr(n)){let r=KA(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function KA(n,e,t){let i=n.field.isKeyField()?H.comparator(e.key,t.key):function(r,a,c){let l=a.data.field(r),h=c.data.field(r);return l!==null&&h!==null?us(l,h):J()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}var jn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){rc(this.inner,(t,i)=>{for(let[s,r]of i)e(s,r)})}isEmpty(){return UA(this.inner)}size(){return this.innerSize}};var QA=new Oe(H.comparator);function Gn(){return QA}var y0=new Oe(H.comparator);function wr(...n){let e=y0;for(let t of n)e=e.insert(t.key,t);return e}function JA(n){let e=y0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function wi(){return Er()}function v0(){return Er()}function Er(){return new jn(n=>n.toString(),(n,e)=>n.isEqual(e))}var ck=new Oe(H.comparator),YA=new Xe(H.comparator);function re(...n){let e=YA;for(let t of n)e=e.add(t);return e}var XA=new Xe(pe);function ZA(){return XA}function eD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Na(e)?"-0":e}}function tD(n){return{integerValue:""+n}}var ms=class{constructor(){this._=void 0}};function nD(n,e,t){return n instanceof Cr?function(s,r){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Kd(r)&&(r=Qd(r)),r&&(a.fields.__previous_value__=r),{mapValue:a}}(t,e):n instanceof gs?w0(n,e):n instanceof _s?b0(n,e):function(s,r){let a=sD(s,r),c=$y(a)+$y(s.Pe);return Ph(a)&&Ph(s.Pe)?tD(c):eD(s.serializer,c)}(n,e)}function iD(n,e,t){return n instanceof gs?w0(n,e):n instanceof _s?b0(n,e):t}function sD(n,e){return n instanceof Rr?function(i){return Ph(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}var Cr=class extends ms{},gs=class extends ms{constructor(e){super(),this.elements=e}};function w0(n,e){let t=T0(e);for(let i of n.elements)t.some(s=>Ut(s,i))||t.push(i);return{arrayValue:{values:t}}}var _s=class extends ms{constructor(e){super(),this.elements=e}};function b0(n,e){let t=T0(e);for(let i of n.elements)t=t.filter(s=>!Ut(s,i));return{arrayValue:{values:t}}}var Rr=class extends ms{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function $y(n){return De(n.integerValue||n.doubleValue)}function T0(n){return Jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rD(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof gs&&s instanceof gs||i instanceof _s&&s instanceof _s?ls(i.elements,s.elements,Ut):i instanceof Rr&&s instanceof Rr?Ut(i.Pe,s.Pe):i instanceof Cr&&s instanceof Cr}(n.transform,e.transform)}var Ir=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ra(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Or=class{};function E0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gh(n.key,Ir.none()):new Pr(n.key,n.data,Ir.none());{let t=n.data,i=rn.empty(),s=new Xe(St.comparator);for(let r of e.fields)if(!s.has(r)){let a=t.field(r);a===null&&r.length>1&&(r=r.popLast(),a=t.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ys(n.key,i,new vi(s.toArray()),Ir.none())}}function oD(n,e,t){n instanceof Pr?function(s,r,a){let c=s.value.clone(),l=Gy(s.fieldTransforms,r,a.transformResults);c.setAll(l),r.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ys?function(s,r,a){if(!Ra(s.precondition,r))return void r.convertToUnknownDocument(a.version);let c=Gy(s.fieldTransforms,r,a.transformResults),l=r.data;l.setAll(I0(s)),l.setAll(c),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Sr(n,e,t,i){return n instanceof Pr?function(r,a,c,l){if(!Ra(r.precondition,a))return c;let h=r.value.clone(),f=qy(r.fieldTransforms,l,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,e,t,i):n instanceof ys?function(r,a,c,l){if(!Ra(r.precondition,a))return c;let h=qy(r.fieldTransforms,l,a),f=a.data;return f.setAll(I0(r)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(n,e,t,i):function(r,a,c){return Ra(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ls(i,s,(r,a)=>rD(r,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Pr=class extends Or{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},ys=class extends Or{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function I0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Gy(n,e,t){let i=new Map;Fe(n.length===t.length);for(let s=0;s<t.length;s++){let r=n[s],a=r.transform,c=e.data.field(r.field);i.set(r.field,iD(a,c,t[s]))}return i}function qy(n,e,t){let i=new Map;for(let s of n){let r=s.transform,a=t.data.field(s.field);i.set(s.field,nD(r,a,e))}return i}var Gh=class extends Or{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var qh=class{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){let r=this.mutations[s];r.key.isEqual(e.key)&&oD(r,e,i[s])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Sr(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Sr(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=v0();return this.mutations.forEach(s=>{let r=e.get(s.key),a=r.overlayedDocument,c=this.applyToLocalView(a,r.mutatedFields);c=t.has(s.key)?null:c;let l=E0(a,c);l!==null&&i.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(t,i)=>jy(t,i))&&ls(this.baseMutations,e.baseMutations,(t,i)=>jy(t,i))}};var Hh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ke,ie;function S0(n){if(n===void 0)return an("GRPC error has no .code"),N.UNKNOWN;switch(n){case ke.OK:return N.OK;case ke.CANCELLED:return N.CANCELLED;case ke.UNKNOWN:return N.UNKNOWN;case ke.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ke.INTERNAL:return N.INTERNAL;case ke.UNAVAILABLE:return N.UNAVAILABLE;case ke.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ke.NOT_FOUND:return N.NOT_FOUND;case ke.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ke.ABORTED:return N.ABORTED;case ke.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ke.DATA_LOSS:return N.DATA_LOSS;default:return J()}}(ie=ke||(ke={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var Hy=null;function aD(){return new TextEncoder}var cD=new Bn([4294967295,4294967295],0);function zy(n){let e=aD().encode(n),t=new ch;return t.update(e),new Uint8Array(t.digest())}function Wy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Bn([t,i],0),new Bn([s,r],0)]}var Wh=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bi(`Invalid padding: ${t}`);if(i<0)throw new bi(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Bn.fromNumber(this.Ie)}Ee(e,t,i){let s=e.add(t.multiply(Bn.fromNumber(i)));return s.compare(cD)===1&&(s=new Bn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=zy(e),[i,s]=Wy(t);for(let r=0;r<this.hashCount;r++){let a=this.Ee(i,s,r);if(!this.de(a))return!1}return!0}static create(e,t,i){let s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new n(r,s,t);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=zy(e),[i,s]=Wy(t);for(let r=0;r<this.hashCount;r++){let a=this.Ee(i,s,r);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ba=class n{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let s=new Map;return s.set(e,Mr.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Z.min(),s,new Oe(pe),Gn(),re())}},Mr=class n{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,re(),re(),re())}};var rs=class{constructor(e,t,i,s){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=s}},Ua=class{constructor(e,t){this.targetId=e,this.me=t}},$a=class{constructor(e,t,i=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}},ja=class{constructor(){this.fe=0,this.ge=Qy(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=re(),t=re(),i=re();return this.ge.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:J()}}),new Mr(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=Qy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Kh=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=Ky(),this.Qe=new Oe(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,s)=>{this.ze(s)&&t(s)})}He(e){let t=e.targetId,i=e.me.count,s=this.Je(t);if(s){let r=s.target;if($h(r))if(i===0){let a=new H(r.path);this.Ue(t,a,At.newNoDocument(a,Z.min()))}else Fe(i===1);else{let a=this.Ye(t);if(a!==i){let c=this.Ze(e),l=c?this.Xe(c,e,a):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}Hy?.et(function(f,m,v,A,D){var R,O,F,L,U,P;let z={localCacheCount:f,existenceFilterCount:m.count,databaseId:v.database,projectId:v.projectId},x=m.unchangedNames;return x&&(z.bloomFilter={applied:D===0,hashCount:(R=x?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(L=(F=(O=x?.bits)===null||O===void 0?void 0:O.bitmap)===null||F===void 0?void 0:F.length)!==null&&L!==void 0?L:0,padding:(P=(U=x?.bits)===null||U===void 0?void 0:U.padding)!==null&&P!==void 0?P:0,mightContain:w=>{var g;return(g=A?.mightContain(w))!==null&&g!==void 0&&g}}),z}(a,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t,a,c;try{a=$n(i).toUint8Array()}catch(l){if(l instanceof Fa)return cs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Wh(a,s,r)}catch(l){return cs(l instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),s=0;return i.forEach(r=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,r,null),s++)}),s}rt(e){let t=new Map;this.Be.forEach((r,a)=>{let c=this.Je(a);if(c){if(r.current&&$h(c.target)){let l=new H(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,At.newNoDocument(l,e))}r.be&&(t.set(a,r.Ce()),r.ve())}});let i=re();this.qe.forEach((r,a)=>{let c=!0;a.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(r))}),this.ke.forEach((r,a)=>a.setReadTime(e));let s=new Ba(e,t,this.Qe,this.ke,i);return this.ke=Gn(),this.qe=Ky(),this.Qe=new Oe(pe),s}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ja,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xe(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ja),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Ky(){return new Oe(H.comparator)}function Qy(){return new Oe(H.comparator)}var lD={asc:"ASCENDING",desc:"DESCENDING"},uD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hD={and:"AND",or:"OR"},Qh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Jh(n,e){return n.useProto3Json||sc(e)?e:{value:e}}function dD(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function os(n){return Fe(!!n),Z.fromTimestamp(function(t){let i=cn(t);return new vt(i.seconds,i.nanos)}(n))}function pD(n,e){return Yh(n,e).canonicalString()}function Yh(n,e){let t=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function A0(n){let e=xe.fromString(n);return Fe(P0(e)),e}function gh(n,e){let t=A0(e);if(t.get(1)!==n.databaseId.projectId)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(C0(t))}function D0(n,e){return pD(n.databaseId,e)}function mD(n){let e=A0(n);return e.length===4?xe.emptyPath():C0(e)}function Jy(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function C0(n){return Fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function gD(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(h,f){return h.useProto3Json?(Fe(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(Fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){let f=h.code===void 0?N.UNKNOWN:S0(h.code);return new G(f,h.message||"")}(a);t=new $a(i,s,r,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let s=gh(n,i.document.name),r=os(i.document.updateTime),a=i.document.createTime?os(i.document.createTime):Z.min(),c=new rn({mapValue:{fields:i.document.fields}}),l=At.newFoundDocument(s,r,a,c),h=i.targetIds||[],f=i.removedTargetIds||[];t=new rs(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let s=gh(n,i.document),r=i.readTime?os(i.readTime):Z.min(),a=At.newNoDocument(s,r),c=i.removedTargetIds||[];t=new rs([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let s=gh(n,i.document),r=i.removedTargetIds||[];t=new rs([],r,s,null)}else{if(!("filter"in e))return J();{e.filter;let i=e.filter;i.targetId;let{count:s=0,unchangedNames:r}=i,a=new zh(s,r),c=i.targetId;t=new Ua(c,a)}}return t}function _D(n,e){return{documents:[D0(n,e.path)]}}function yD(n,e){let t={structuredQuery:{}},i=e.path,s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=D0(n,s);let r=function(h){if(h.length!==0)return O0($t.create(h,"and"))}(e.filters);r&&(t.structuredQuery.where=r);let a=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:ns(v.field),direction:bD(v.dir)}}(f))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=Jh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:s}}function vD(n){let e=mD(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,s=null;if(i>0){Fe(i===1);let f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let r=[];t.where&&(r=function(m){let v=R0(m);return v instanceof $t&&d0(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(v=>function(D){return new fs(is(D.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(m){let v;return v=typeof m=="object"?m.value:m,sc(v)?null:v}(t.limit));let l=null;t.startAt&&(l=function(m){let v=!!m.before,A=m.values||[];return new ds(A,v)}(t.startAt));let h=null;return t.endAt&&(h=function(m){let v=!m.before,A=m.values||[];return new ds(A,v)}(t.endAt)),qA(e,s,a,r,c,"F",l,h)}function wD(n,e){let t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=is(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=is(t.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=is(t.unaryFilter.field);return Ue.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=is(t.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(n):n.fieldFilter!==void 0?function(t){return Ue.create(is(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $t.create(t.compositeFilter.filters.map(i=>R0(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(t.compositeFilter.op))}(n):J()}function bD(n){return lD[n]}function TD(n){return uD[n]}function ED(n){return hD[n]}function ns(n){return{fieldPath:n.canonicalString()}}function is(n){return St.fromServerFormat(n.fieldPath)}function O0(n){return n instanceof Ue?function(t){if(t.op==="=="){if(Fy(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NAN"}};if(xy(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Fy(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NOT_NAN"}};if(xy(t.value))return{unaryFilter:{field:ns(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(t.field),op:TD(t.op),value:t.value}}}(n):n instanceof $t?function(t){let i=t.getFilters().map(s=>O0(s));return i.length===1?i[0]:{compositeFilter:{op:ED(t.op),filters:i}}}(n):J()}function P0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var kr=class n{constructor(e,t,i,s,r=Z.min(),a=Z.min(),c=nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xh=class{constructor(e){this.ct=e}};function ID(n){let e=vD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jh(e,e.limit,"L"):e}var Ga=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(De(e.integerValue));else if("doubleValue"in e){let i=De(e.doubleValue);isNaN(i)?this.Et(t,13):(this.Et(t,15),Na(i)?t.dt(0):t.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(t,20),typeof i=="string"&&(i=cn(i)),t.At(`${i.seconds||""}`),t.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($n(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(t,45),t.dt(i.latitude||0),t.dt(i.longitude||0)}else"mapValue"in e?u0(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):J()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let i=e.fields||{};this.Et(t,55);for(let s of Object.keys(i))this.Rt(s,t),this.It(i[s],t)}wt(e,t){let i=e.values||[];this.Et(t,50);for(let s of i)this.It(s,t)}gt(e,t){this.Et(t,37),H.fromName(e).path.forEach(i=>{this.Et(t,60),this.St(i,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Ga.bt=new Ga;var Zh=class{constructor(){this._n=new ed}addToCollectionParentIndex(e,t){return this._n.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Ii.min())}updateCollectionGroup(e,t,i){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},ed=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Xe(xe.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){let t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Xe(xe.comparator)).toArray()}};var lk=new Uint8Array(0);var Vt=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Nr=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var td=class{constructor(){this.changes=new jn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?M.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nd=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var id=class{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&Sr(i.mutation,s,vi.empty(),vt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,re()).next(()=>i))}getLocalViewOfDocuments(e,t,i=re()){let s=wi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let a=wr();return r.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let i=wi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,re()))}populateOverlays(e,t,i){let s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,i,s){let r=Gn(),a=Er(),c=function(){return Er()}();return t.forEach((l,h)=>{let f=i.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof ys)?r=r.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Sr(f.mutation,h,f.mutation.getFieldMask(),vt.now())):a.set(h.key,vi.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((h,f)=>a.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new nd(f,(m=a.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Er(),s=new Oe((a,c)=>a-c),r=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let f=i.get(l)||vi.empty();f=c.applyToLocalView(h,f),i.set(l,f);let m=(s.get(c.batchId)||re()).add(l);s=s.insert(c.batchId,m)})}).next(()=>{let a=[],c=s.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,f=l.value,m=v0();f.forEach(v=>{if(!r.has(v)){let A=E0(t.get(v),i.get(v));A!==null&&m.set(v,A),r=r.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(a){return H.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{let a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):M.resolve(wi()),c=-1,l=r;return a.next(h=>M.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),r.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{l=l.insert(f,v)}))).next(()=>this.populateOverlays(e,h,r)).next(()=>this.computeViews(e,l,h,re())).next(f=>({batchId:c,changes:JA(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(i=>{let s=wr();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){let r=t.collectionGroup,a=wr();return this.indexManager.getCollectionParents(e,r).next(c=>M.forEach(c,l=>{let h=function(m,v){return new ps(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next(f=>{f.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s))).next(a=>{r.forEach((l,h)=>{let f=h.getKey();a.get(f)===null&&(a=a.insert(f,At.newInvalidDocument(f)))});let c=wr();return a.forEach((l,h)=>{let f=r.get(l);f!==void 0&&Sr(f.mutation,h,vi.empty(),vt.now()),ac(t,h)&&(c=c.insert(l,h))}),c})}};var sd=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return M.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:os(s.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(s){return{name:s.name,query:ID(s.bundledQuery),readTime:os(s.readTime)}}(t)),M.resolve()}};var rd=class{constructor(){this.overlays=new Oe(H.comparator),this.hr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let i=wi();return M.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.ht(e,t,r)}),M.resolve()}removeOverlaysForBatchId(e,t,i){let s=this.hr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(i)),M.resolve()}getOverlaysForCollection(e,t,i){let s=wi(),r=t.length+1,a=new H(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new Oe((h,f)=>h-f),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let f=r.get(h.largestBatchId);f===null&&(f=wi(),r=r.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let c=wi(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=s)););return M.resolve(c)}ht(e,t,i){let s=this.overlays.get(i.key);if(s!==null){let a=this.hr.get(s.largestBatchId).delete(i.key);this.hr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Hh(t,i));let r=this.hr.get(t);r===void 0&&(r=re(),this.hr.set(t,r)),this.hr.set(t,r.add(i.key))}};var xr=class{constructor(){this.Pr=new Xe(Ne.Ir),this.Tr=new Xe(Ne.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let i=new Ne(e,t);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ar(new Ne(e,t))}Rr(e,t){e.forEach(i=>this.removeReference(i,t))}Vr(e){let t=new H(new xe([])),i=new Ne(t,e),s=new Ne(t,e+1),r=[];return this.Tr.forEachInRange([i,s],a=>{this.Ar(a),r.push(a.key)}),r}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new H(new xe([])),i=new Ne(t,e),s=new Ne(t,e+1),r=re();return this.Tr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){let t=new Ne(e,0),i=this.Pr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Ne=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return H.comparator(e.key,t.key)||pe(e.pr,t.pr)}static Er(e,t){return pe(e.pr,t.pr)||H.comparator(e.key,t.key)}};var od=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Xe(Ne.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){let r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new qh(r,t,i,s);this.mutationQueue.push(a);for(let c of s)this.wr=this.wr.add(new Ne(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,t){return M.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,s=this.br(i),r=s<0?0:s;return M.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Ne(t,0),s=new Ne(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([i,s],a=>{let c=this.Sr(a.pr);r.push(c)}),M.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xe(pe);return t.forEach(s=>{let r=new Ne(s,0),a=new Ne(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,a],c=>{i=i.add(c.pr)})}),M.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,s=i.length+1,r=i;H.isDocumentKey(r)||(r=r.child(""));let a=new Ne(new H(r),0),c=new Xe(pe);return this.wr.forEachWhile(l=>{let h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.pr)),!0)},a),M.resolve(this.Dr(c))}Dr(e){let t=[];return e.forEach(i=>{let s=this.Sr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Fe(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return M.forEach(t.mutations,s=>{let r=new Ne(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,t){let i=new Ne(t,0),s=this.wr.firstAfterOrEqual(i);return M.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ad=class{constructor(e){this.vr=e,this.docs=function(){return new Oe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,s=this.docs.get(i),r=s?s.size:0,a=this.vr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return M.resolve(i?i.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let i=Gn();return t.forEach(s=>{let r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():At.newInvalidDocument(s))}),M.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=Gn(),a=t.path,c=new H(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:f}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||NA(kA(f),i)<=0||(s.has(f.key)||ac(t,f))&&(r=r.insert(f.key,f.mutableCopy()))}return M.resolve(r)}getAllFromCollectionGroup(e,t,i,s){J()}Fr(e,t){return M.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new cd(this)}getSize(e){return M.resolve(this.size)}},cd=class extends td{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(i)}),M.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var ld=class{constructor(e){this.persistence=e,this.Mr=new jn(t=>Yd(t),Xd),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xr,this.targetCount=0,this.Lr=Nr.Nn()}forEachTarget(e,t){return this.Mr.forEach((i,s)=>t(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Or&&(this.Or=t),M.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Nr(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.qn(t),M.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,i){let s=0,r=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Mr.delete(a),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),M.waitFor(r).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let i=this.Mr.get(t)||null;return M.resolve(i)}addMatchingKeys(e,t,i){return this.Nr.dr(t,i),M.resolve()}removeMatchingKeys(e,t,i){this.Nr.Rr(t,i);let s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),M.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Nr.gr(t);return M.resolve(i)}containsKey(e,t){return M.resolve(this.Nr.containsKey(t))}};var ud=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new l0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ld(this),this.indexManager=new Zh,this.remoteDocumentCache=function(s){return new ad(s)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Xh(t),this.$r=new sd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new od(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,i){B("MemoryPersistence","Starting transaction:",e);let s=new hd(this.kr.next());return this.referenceDelegate.Ur(),i(s).next(r=>this.referenceDelegate.Wr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gr(e,t){return M.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}},hd=class extends Ch{constructor(e){super(),this.currentSequenceNumber=e}},dd=class n{constructor(e){this.persistence=e,this.zr=new xr,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw J()}addReference(e,t,i){return this.zr.addReference(i,t),this.Jr.delete(i.toString()),M.resolve()}removeReference(e,t,i){return this.zr.removeReference(i,t),this.Jr.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),M.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Jr.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,i=>{let s=H.fromPath(i);return this.Yr(e,s).next(r=>{r||t.removeEntry(s,Z.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(i=>{i?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return M.or([()=>M.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var fd=class n{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.qi=i,this.Qi=s}static Ki(e,t){let i=re(),s=re();for(let r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new n(e,t.fromCache,i,s)}};var pd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var md=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return d_()?8:FA(Be())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,i,s){let r={result:null};return this.ji(e,t).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.Hi(e,t,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;let a=new pd;return this.Ji(e,t,a).next(c=>{if(r.result=c,this.Ui)return this.Yi(e,t,a,c.size)})}).next(()=>r.result)}Yi(e,t,i,s){return i.documentReadCount<this.Wi?(vr()<=ne.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(vr()<=ne.DEBUG&&B("QueryEngine","Query:",ts(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Gi*s?(vr()<=ne.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(t))):M.resolve())}ji(e,t){if(Uy(t))return M.resolve(null);let i=Bt(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=jh(t,null,"F"),i=Bt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{let a=re(...r);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let h=this.Zi(t,c);return this.Xi(t,h,a,l.readTime)?this.ji(e,jh(t,null,"F")):this.es(e,h,t,l)}))})))}Hi(e,t,i,s){return Uy(t)||s.isEqual(Z.min())?M.resolve(null):this.zi.getDocuments(e,i).next(r=>{let a=this.Zi(t,r);return this.Xi(t,a,i,s)?M.resolve(null):(vr()<=ne.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ts(t)),this.es(e,a,t,MA(s,-1)).next(c=>c))})}Zi(e,t){let i=new Xe(_0(e));return t.forEach((s,r)=>{ac(e,r)&&(i=i.add(r))}),i}Xi(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ji(e,t,i){return vr()<=ne.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ts(t)),this.zi.getDocumentsMatchingQuery(e,t,Ii.min(),i)}es(e,t,i,s){return this.zi.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(a=>{r=r.insert(a.key,a)}),r))}};var gd=class{constructor(e,t,i,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new Oe(pe),this.rs=new jn(r=>Yd(r),Xd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new id(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function SD(n,e,t,i){return new gd(n,e,t,i)}function M0(n,e){return b(this,null,function*(){let t=oe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t._s(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{let a=[],c=[],l=re();for(let h of s){a.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}for(let h of r){c.push(h.batchId);for(let f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(h=>({us:h,removedBatchIds:a,addedBatchIds:c}))})})})}function k0(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function AD(n,e){let t=oe(n),i=e.snapshotVersion,s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let a=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;let c=[];e.targetChanges.forEach((f,m)=>{let v=s.get(m);if(!v)return;c.push(t.Qr.removeMatchingKeys(r,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(r,f.addedDocuments,m)));let A=v.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(nt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(f.resumeToken,i)),s=s.insert(m,A),function(R,O,F){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(v,A,f)&&c.push(t.Qr.updateTargetData(r,A))});let l=Gn(),h=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(r,f))}),c.push(DD(r,a,e.documentUpdates).next(f=>{l=f.cs,h=f.ls})),!i.isEqual(Z.min())){let f=t.Qr.getLastRemoteSnapshotVersion(r).next(m=>t.Qr.setTargetsMetadata(r,r.currentSequenceNumber,i));c.push(f)}return M.waitFor(c).next(()=>a.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,l,h)).next(()=>l)}).then(r=>(t.ns=s,r))}function DD(n,e,t){let i=re(),s=re();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let a=Gn();return t.forEach((c,l)=>{let h=r.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):B("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{cs:a,ls:s}})}function CD(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Qr.getTargetData(i,e).next(r=>r?(s=r,M.resolve(s)):t.Qr.allocateTargetId(i).next(a=>(s=new kr(e,a,"TargetPurposeListen",i.currentSequenceNumber),t.Qr.addTargetData(i,s).next(()=>s))))}).then(i=>{let s=t.ns.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(i.targetId,i),t.rs.set(e,i.targetId)),i})}function _d(n,e,t){return b(this,null,function*(){let i=oe(n),s=i.ns.get(e),r=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Br(a))throw a;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(s.target)})}function Yy(n,e,t){let i=oe(n),s=Z.min(),r=re();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,h,f){let m=oe(l),v=m.rs.get(f);return v!==void 0?M.resolve(m.ns.get(v)):m.Qr.getTargetData(h,f)}(i,a,Bt(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(l=>{r=l})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,t?s:Z.min(),t?r:re())).next(c=>(RD(i,WA(e),c),{documents:c,hs:r})))}function RD(n,e,t){let i=n.ss.get(e)||Z.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.ss.set(e,i)}var qa=class{constructor(){this.activeTargetIds=ZA()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yd=class{constructor(){this.no=new qa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,i){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qa,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vd=class{io(e){}shutdown(){}};var Ha=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ca=null;function _h(){return Ca===null?Ca=function(){return 268435456+Math.round(2147483648*Math.random())}():Ca++,"0x"+Ca.toString(16)}var OD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wd=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ye="WebChannelConnection",bd=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+t.host,this.So=`projects/${s}/databases/${r}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Do(){return!1}Co(t,i,s,r,a){let c=_h(),l=this.vo(t,i.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${c}:`,l,s);let h={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(h,r,a),this.Mo(t,l,h,s).then(f=>(B("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw cs("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",s),f})}xo(t,i,s,r,a,c){return this.Co(t,i,s,r,a)}Fo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ws}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,a)=>t[a]=r),s&&s.headers.forEach((r,a)=>t[a]=r)}vo(t,i){let s=OD[t];return`${this.wo}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,i,s){let r=_h();return new Promise((a,c)=>{let l=new lh;l.setWithCredentials(!0),l.listenOnce(hh.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yr.NO_ERROR:let f=l.getResponseJson();B(Ye,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(f)),a(f);break;case yr.TIMEOUT:B(Ye,`RPC '${e}' ${r} timed out`),c(new G(N.DEADLINE_EXCEEDED,"Request time out"));break;case yr.HTTP_ERROR:let m=l.getStatus();if(B(Ye,`RPC '${e}' ${r} failed with status:`,m,"response text:",l.getResponseText()),m>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);let A=v?.error;if(A&&A.status&&A.message){let D=function(O){let F=O.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(F)>=0?F:N.UNKNOWN}(A.status);c(new G(D,A.message))}else c(new G(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new G(N.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{B(Ye,`RPC '${e}' ${r} completed.`)}});let h=JSON.stringify(s);B(Ye,`RPC '${e}' ${r} sending request:`,s),l.send(t,"POST",h,i,15)})}Oo(e,t,i){let s=_h(),r=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ph(),c=fh(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.xmlHttpFactory=new uh({})),this.Fo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=r.join("");B(Ye,`Creating RPC '${e}' stream ${s}: ${f}`,l);let m=a.createWebChannel(f,l),v=!1,A=!1,D=new wd({lo:O=>{A?B(Ye,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(v||(B(Ye,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),B(Ye,`RPC '${e}' stream ${s} sending:`,O),m.send(O))},ho:()=>m.close()}),R=(O,F,L)=>{O.listen(F,U=>{try{L(U)}catch(P){setTimeout(()=>{throw P},0)}})};return R(m,es.EventType.OPEN,()=>{A||(B(Ye,`RPC '${e}' stream ${s} transport opened.`),D.mo())}),R(m,es.EventType.CLOSE,()=>{A||(A=!0,B(Ye,`RPC '${e}' stream ${s} transport closed`),D.po())}),R(m,es.EventType.ERROR,O=>{A||(A=!0,cs(Ye,`RPC '${e}' stream ${s} transport errored:`,O),D.po(new G(N.UNAVAILABLE,"The operation could not be completed")))}),R(m,es.EventType.MESSAGE,O=>{var F;if(!A){let L=O.data[0];Fe(!!L);let U=L,P=U.error||((F=U[0])===null||F===void 0?void 0:F.error);if(P){B(Ye,`RPC '${e}' stream ${s} received error:`,P);let z=P.status,x=function(_){let T=ke[_];if(T!==void 0)return S0(T)}(z),w=P.message;x===void 0&&(x=N.INTERNAL,w="Unknown error status: "+z+" with message "+P.message),A=!0,D.po(new G(x,w)),m.close()}else B(Ye,`RPC '${e}' stream ${s} received:`,L),D.yo(L)}}),R(c,dh.STAT_EVENT,O=>{O.stat===Aa.PROXY?B(Ye,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===Aa.NOPROXY&&B(Ye,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function yh(){return typeof document<"u"?document:null}function N0(n){return new Qh(n,!0)}var za=class{constructor(e,t,i=1e3,s=1.5,r=6e4){this.oi=e,this.timerId=t,this.No=i,this.Lo=s,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),s=Math.max(0,t-i);s>0&&B("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Td=class{constructor(e,t,i,s,r,a,c,l){this.oi=e,this.Go=i,this.zo=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new za(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return b(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return b(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return b(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(an(t.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.jo===t&&this.u_(i,s)},i=>{e(()=>{let s=new G(N.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(s)})})}u_(e,t){let i=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{i(()=>this.c_(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(()=>b(this,null,function*(){this.state=0,this.start()}))}c_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ed=class extends Td{constructor(e,t,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,a),this.serializer=r}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=gD(this.serializer,e),i=function(r){if(!("targetChange"in r))return Z.min();let a=r.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?os(a.readTime):Z.min()}(e);return this.listener.h_(t,i)}P_(e){let t={};t.database=Jy(this.serializer),t.addTarget=function(r,a){let c,l=a.target;if(c=$h(l)?{documents:_D(r,l)}:{query:yD(r,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=fD(r,a.resumeToken);let h=Jh(r,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){c.readTime=dD(r,a.snapshotVersion.toTimestamp());let h=Jh(r,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);let i=wD(this.serializer,e);i&&(t.labels=i),this.i_(t)}I_(e){let t={};t.database=Jy(this.serializer),t.removeTarget=e,this.i_(t)}};var Id=class extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Co(e,Yh(t,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new G(N.UNKNOWN,r.toString())})}xo(e,t,i,s,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,Yh(t,i),s,a,c,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(N.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Sd=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(an(t),this.y_=!1):B("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Ad=class{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io(a=>{i.enqueueAndForget(()=>b(this,null,function*(){$r(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(l){return b(this,null,function*(){let h=oe(l);h.M_.add(4),yield Ur(h),h.N_.set("Unknown"),h.M_.delete(4),yield cc(h)})}(this))}))}),this.N_=new Sd(i,s)}};function cc(n){return b(this,null,function*(){if($r(n))for(let e of n.x_)yield e(!0)})}function Ur(n){return b(this,null,function*(){for(let e of n.x_)yield e(!1)})}function x0(n,e){let t=oe(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),sf(t)?nf(t):bs(t).Xo()&&tf(t,e))}function ef(n,e){let t=oe(n),i=bs(t);t.F_.delete(e),i.Xo()&&F0(t,e),t.F_.size===0&&(i.Xo()?i.n_():$r(t)&&t.N_.set("Unknown"))}function tf(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}bs(n).P_(e)}function F0(n,e){n.L_.xe(e),bs(n).I_(e)}function nf(n){n.L_=new Kh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),bs(n).start(),n.N_.w_()}function sf(n){return $r(n)&&!bs(n).Zo()&&n.F_.size>0}function $r(n){return oe(n).M_.size===0}function V0(n){n.L_=void 0}function PD(n){return b(this,null,function*(){n.N_.set("Online")})}function MD(n){return b(this,null,function*(){n.F_.forEach((e,t)=>{tf(n,e)})})}function kD(n,e){return b(this,null,function*(){V0(n),sf(n)?(n.N_.D_(e),nf(n)):n.N_.set("Unknown")})}function ND(n,e,t){return b(this,null,function*(){if(n.N_.set("Online"),e instanceof $a&&e.state===2&&e.cause)try{yield function(s,r){return b(this,null,function*(){let a=r.cause;for(let c of r.targetIds)s.F_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.F_.delete(c),s.L_.removeTarget(c))})}(n,e)}catch(i){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Xy(n,i)}else if(e instanceof rs?n.L_.Ke(e):e instanceof Ua?n.L_.He(e):n.L_.We(e),!t.isEqual(Z.min()))try{let i=yield k0(n.localStore);t.compareTo(i)>=0&&(yield function(r,a){let c=r.L_.rt(a);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let f=r.F_.get(h);f&&r.F_.set(h,f.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,h)=>{let f=r.F_.get(l);if(!f)return;r.F_.set(l,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),F0(r,l);let m=new kr(f.target,l,h,f.sequenceNumber);tf(r,m)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){B("RemoteStore","Failed to raise snapshot:",i),yield Xy(n,i)}})}function Xy(n,e,t){return b(this,null,function*(){if(!Br(e))throw e;n.M_.add(1),yield Ur(n),n.N_.set("Offline"),t||(t=()=>k0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield cc(n)}))})}function Zy(n,e){return b(this,null,function*(){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let i=$r(t);t.M_.add(3),yield Ur(t),i&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield cc(t)})}function xD(n,e){return b(this,null,function*(){let t=oe(n);e?(t.M_.delete(2),yield cc(t)):e||(t.M_.add(2),yield Ur(t),t.N_.set("Unknown"))})}function bs(n){return n.B_||(n.B_=function(t,i,s){let r=oe(t);return r.f_(),new Ed(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(n.datastore,n.asyncQueue,{Po:PD.bind(null,n),To:MD.bind(null,n),Ao:kD.bind(null,n),h_:ND.bind(null,n)}),n.x_.push(e=>b(this,null,function*(){e?(n.B_.t_(),sf(n)?nf(n):n.N_.set("Unknown")):(yield n.B_.stop(),V0(n))}))),n.B_}var Dd=class n{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){let a=Date.now()+i,c=new n(e,t,a,s,r);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function L0(n,e){if(an("AsyncQueue",`${e}: ${n}`),Br(n))return new G(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Wa=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||H.comparator(t.key,i.key):(t,i)=>H.comparator(t.key,i.key),this.keyedMap=wr(),this.sortedSet=new Oe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ka=class{constructor(){this.q_=new Oe(H.comparator)}track(e){let t=e.doc.key,i=this.q_.get(t);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(t,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(t):e.type===1&&i.type===2?this.q_=this.q_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):J():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,i)=>{e.push(i)}),e}},vs=class n{constructor(e,t,i,s,r,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,s,r){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,Wa.emptySet(t),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}};var Cd=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Rd=class{constructor(){this.queries=new jn(e=>g0(e),oc),this.onlineState="Unknown",this.z_=new Set}};function FD(n,e){return b(this,null,function*(){let t=oe(n),i=3,s=e.query,r=t.queries.get(s);r?!r.W_()&&e.G_()&&(i=2):(r=new Cd,i=e.G_()?0:1);try{switch(i){case 0:r.K_=yield t.onListen(s,!0);break;case 1:r.K_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(a){let c=L0(a,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,r),r.U_.push(e),e.j_(t.onlineState),r.K_&&e.H_(r.K_)&&rf(t)})}function VD(n,e){return b(this,null,function*(){let t=oe(n),i=e.query,s=3,r=t.queries.get(i);if(r){let a=r.U_.indexOf(e);a>=0&&(r.U_.splice(a,1),r.U_.length===0?s=e.G_()?0:1:!r.W_()&&e.G_()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function LD(n,e){let t=oe(n),i=!1;for(let s of e){let r=s.query,a=t.queries.get(r);if(a){for(let c of a.U_)c.H_(s)&&(i=!0);a.K_=s}}i&&rf(t)}function BD(n,e,t){let i=oe(n),s=i.queries.get(e);if(s)for(let r of s.U_)r.onError(t);i.queries.delete(e)}function rf(n){n.z_.forEach(e=>{e.next()})}var Od,e0;(e0=Od||(Od={})).J_="default",e0.Cache="cache";var Pd=class{constructor(e,t,i){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let s of e.docChanges)s.type!==3&&i.push(s);e=new vs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let i=t!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Od.Cache}};var Qa=class{constructor(e){this.key=e}},Ja=class{constructor(e){this.key=e}},Md=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=re(),this.mutatedKeys=re(),this.Ia=_0(e),this.Ta=new Wa(this.Ia)}get Ea(){return this.la}da(e,t){let i=t?t.Aa:new Ka,s=t?t.Ta:this.Ta,r=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1,l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{let v=s.get(f),A=ac(this.query,m)?m:null,D=!!v&&this.mutatedKeys.has(v.key),R=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations),O=!1;v&&A?v.data.isEqual(A.data)?D!==R&&(i.track({type:3,doc:A}),O=!0):this.Ra(v,A)||(i.track({type:2,doc:A}),O=!0,(l&&this.Ia(A,l)>0||h&&this.Ia(A,h)<0)&&(c=!0)):!v&&A?(i.track({type:0,doc:A}),O=!0):v&&!A&&(i.track({type:1,doc:v}),O=!0,(l||h)&&(c=!0)),O&&(A?(a=a.add(A),r=R?r.add(f):r.delete(f)):(a=a.delete(f),r=r.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),r=r.delete(f.key),i.track({type:1,doc:f})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:r}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){let r=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((f,m)=>function(A,D){let R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return R(A)-R(D)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(i),s=s!=null&&s;let c=t&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,h=l!==this.ha;return this.ha=l,a.length!==0||h?{snapshot:new vs(this.query,e.Ta,r,a,e.mutatedKeys,l===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ka,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=re(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let t=[];return e.forEach(i=>{this.Pa.has(i)||t.push(new Ja(i))}),this.Pa.forEach(i=>{e.has(i)||t.push(new Qa(i))}),t}pa(e){this.la=e.hs,this.Pa=re();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return vs.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},kd=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Nd=class{constructor(e){this.key=e,this.wa=!1}},xd=class{constructor(e,t,i,s,r,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new jn(c=>g0(c),oc),this.Da=new Map,this.Ca=new Set,this.va=new Oe(H.comparator),this.Fa=new Map,this.Ma=new xr,this.xa={},this.Oa=new Map,this.Na=Nr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function UD(n,e,t=!0){return b(this,null,function*(){let i=G0(n),s,r=i.ba.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.ya()):s=yield B0(i,e,t,!0),s})}function $D(n,e){return b(this,null,function*(){let t=G0(n);yield B0(t,e,!0,!1)})}function B0(n,e,t,i){return b(this,null,function*(){let s=yield CD(n.localStore,Bt(e)),r=s.targetId,a=t?n.sharedClientState.addLocalQueryTarget(r):"not-current",c;return i&&(c=yield jD(n,e,r,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&x0(n.remoteStore,s),c})}function jD(n,e,t,i,s){return b(this,null,function*(){n.Ba=(m,v,A)=>function(R,O,F,L){return b(this,null,function*(){let U=O.view.da(F);U.Xi&&(U=yield Yy(R.localStore,O.query,!1).then(({documents:w})=>O.view.da(w,U)));let P=L&&L.targetChanges.get(O.targetId),z=L&&L.targetMismatches.get(O.targetId)!=null,x=O.view.applyChanges(U,R.isPrimaryClient,P,z);return n0(R,O.targetId,x.fa),x.snapshot})}(n,m,v,A);let r=yield Yy(n.localStore,e,!0),a=new Md(e,r.hs),c=a.da(r.documents),l=Mr.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,l);n0(n,t,h.fa);let f=new kd(e,t,a);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),h.snapshot})}function GD(n,e,t){return b(this,null,function*(){let i=oe(n),s=i.ba.get(e),r=i.Da.get(s.targetId);if(r.length>1)return i.Da.set(s.targetId,r.filter(a=>!oc(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield _d(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&ef(i.remoteStore,s.targetId),Fd(i,s.targetId)}).catch(Wd))):(Fd(i,s.targetId),yield _d(i.localStore,s.targetId,!0))})}function qD(n,e){return b(this,null,function*(){let t=oe(n),i=t.ba.get(e),s=t.Da.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ef(t.remoteStore,i.targetId))})}function U0(n,e){return b(this,null,function*(){let t=oe(n);try{let i=yield AD(t.localStore,e);e.targetChanges.forEach((s,r)=>{let a=t.Fa.get(r);a&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.wa=!0:s.modifiedDocuments.size>0?Fe(a.wa):s.removedDocuments.size>0&&(Fe(a.wa),a.wa=!1))}),yield j0(t,i,e)}catch(i){yield Wd(i)}})}function t0(n,e,t){let i=oe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let s=[];i.ba.forEach((r,a)=>{let c=a.view.j_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){let l=oe(a);l.onlineState=c;let h=!1;l.queries.forEach((f,m)=>{for(let v of m.U_)v.j_(c)&&(h=!0)}),h&&rf(l)}(i.eventManager,e),s.length&&i.Sa.h_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function HD(n,e,t){return b(this,null,function*(){let i=oe(n);i.sharedClientState.updateQueryState(e,"rejected",t);let s=i.Fa.get(e),r=s&&s.key;if(r){let a=new Oe(H.comparator);a=a.insert(r,At.newNoDocument(r,Z.min()));let c=re().add(r),l=new Ba(Z.min(),new Map,new Oe(pe),a,c);yield U0(i,l),i.va=i.va.remove(r),i.Fa.delete(e),of(i)}else yield _d(i.localStore,e,!1).then(()=>Fd(i,e,t)).catch(Wd)})}function Fd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Da.get(e))n.ba.delete(i),t&&n.Sa.ka(i,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(i=>{n.Ma.containsKey(i)||$0(n,i)})}function $0(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(ef(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),of(n))}function n0(n,e,t){for(let i of t)i instanceof Qa?(n.Ma.addReference(i.key,e),zD(n,i)):i instanceof Ja?(B("SyncEngine","Document no longer in limbo: "+i.key),n.Ma.removeReference(i.key,e),n.Ma.containsKey(i.key)||$0(n,i.key)):J()}function zD(n,e){let t=e.key,i=t.path.canonicalString();n.va.get(t)||n.Ca.has(i)||(B("SyncEngine","New document in limbo: "+t),n.Ca.add(i),of(n))}function of(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new H(xe.fromString(e)),i=n.Na.next();n.Fa.set(i,new Nd(t)),n.va=n.va.insert(t,i),x0(n.remoteStore,new kr(Bt(Zd(t.path)),i,"TargetPurposeLimboResolution",l0.oe))}}function j0(n,e,t){return b(this,null,function*(){let i=oe(n),s=[],r=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{a.push(i.Ba(l,e,t).then(h=>{var f;if((h||t)&&i.isPrimaryClient){let m=h?!h.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(h){s.push(h);let m=fd.Ki(l.targetId,h);r.push(m)}}))}),yield Promise.all(a),i.Sa.h_(s),yield function(l,h){return b(this,null,function*(){let f=oe(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(h,v=>M.forEach(v.qi,A=>f.persistence.referenceDelegate.addReference(m,v.targetId,A)).next(()=>M.forEach(v.Qi,A=>f.persistence.referenceDelegate.removeReference(m,v.targetId,A)))))}catch(m){if(!Br(m))throw m;B("LocalStore","Failed to update sequence numbers: "+m)}for(let m of h){let v=m.targetId;if(!m.fromCache){let A=f.ns.get(v),D=A.snapshotVersion,R=A.withLastLimboFreeSnapshotVersion(D);f.ns=f.ns.insert(v,R)}}})}(i.localStore,r))})}function WD(n,e){return b(this,null,function*(){let t=oe(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let i=yield M0(t.localStore,e);t.currentUser=e,function(r,a){r.Oa.forEach(c=>{c.forEach(l=>{l.reject(new G(N.CANCELLED,a))})}),r.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield j0(t,i.us)}})}function KD(n,e){let t=oe(n),i=t.Fa.get(e);if(i&&i.wa)return re().add(i.key);{let s=re(),r=t.Da.get(e);if(!r)return s;for(let a of r){let c=t.ba.get(a);s=s.unionWith(c.view.Ea)}return s}}function G0(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=U0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HD.bind(null,e),e.Sa.h_=LD.bind(null,e.eventManager),e.Sa.ka=BD.bind(null,e.eventManager),e}var Ya=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=N0(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return SD(this.persistence,new md,e.initialUser,this.serializer)}createPersistence(e){return new ud(dd.Hr,this.serializer)}createSharedClientState(e){return new yd}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Vd=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>t0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=WD.bind(null,this.syncEngine),yield xD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Rd}()}createDatastore(e){let t=N0(e.databaseInfo.databaseId),i=function(r){return new bd(r)}(e.databaseInfo);return function(r,a,c,l){return new Id(r,a,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,r,a,c){return new Ad(i,s,r,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>t0(this.syncEngine,t,0),function(){return Ha.D()?new Ha:new vd}())}createSyncEngine(e,t){return function(s,r,a,c,l,h,f){let m=new xd(s,r,a,c,l,h);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e;yield function(i){return b(this,null,function*(){let s=oe(i);B("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield Ur(s),s.O_.shutdown(),s.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ld=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):an("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Bd=class{constructor(e,t,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=$e.UNAUTHENTICATED,this.clientId=Ma.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,r=>b(this,null,function*(){B("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(i,r=>(B("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=L0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function vh(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(s=>b(this,null,function*(){i.isEqual(s)||(yield M0(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function i0(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield JD(n);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Zy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Zy(e.remoteStore,s)),n._onlineComponents=e})}function QD(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function JD(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!QD(t))throw t;cs("Error using user provided cache. Falling back to memory cache: "+t),yield vh(n,new Ya)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield vh(n,new Ya);return n._offlineComponents})}function YD(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield i0(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield i0(n,new Vd))),n._onlineComponents})}function s0(n){return b(this,null,function*(){let e=yield YD(n),t=e.eventManager;return t.onListen=UD.bind(null,e.syncEngine),t.onUnlisten=GD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$D.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qD.bind(null,e.syncEngine),t})}function q0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var r0=new Map;function XD(n,e,t){if(!t)throw new G(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZD(n,e,t,i){if(e===!0&&i===!0)throw new G(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function o0(n){if(!H.isDocumentKey(n))throw new G(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eC(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function Oa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=eC(n);throw new G(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Xa=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fr=class{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xa({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xa(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wh;switch(i.type){case"firstParty":return new Ih(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=r0.get(t);i&&(B("ComponentProvider","Removing Datastore"),r0.delete(t),i.terminate())}(this),Promise.resolve()}};function H0(n,e,t,i={}){var s;let r=(n=Oa(n,Fr))._getSettings(),a=`${e}:${t}`;if(r.host!=="firestore.googleapis.com"&&r.host!==a&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=$e.MOCK_USER;else{c=Zo(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);let h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new G(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $e(h)}n._authCredentials=new bh(new Pa(c,l))}}var Za=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},on=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Vr=class n extends Za{constructor(e,t,i){super(e,t,Zd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function z0(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Ma.newId()),XD("doc","path",e),n instanceof Fr){let i=xe.fromString(e,...t);return o0(i),new on(n,null,new H(i))}{if(!(n instanceof on||n instanceof Vr))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(xe.fromString(e,...t));return o0(i),new on(n.firestore,n instanceof Vr?n.converter:null,new H(i))}}var Ud=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new za(this,"async_queue_retry"),this.hu=()=>{let t=yh();t&&B("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=yh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new Un;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return b(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Br(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw an("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.uu=!1,i))));return this.iu=t,t}enqueueAfterDelay(e,t,i){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let s=Dd.createAndSchedule(this,e,t,i,r=>this.Eu(r));return this._u.push(s),s}Pu(){this.au&&J()}verifyOperationInProgress(){}du(){return b(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function a0(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let s=t;for(let r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(n,["next","error","complete"])}var Lr=class extends Fr{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=function(){return new Ud}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||K0(this),this._firestoreClient.terminate()}};function W0(n,e){let t=typeof n=="object"?n:Mn(),i=typeof n=="string"?n:e||"(default)",s=ui(t,"firestore").getImmediate({identifier:i});if(!s._initialized){let r=Xo("firestore");r&&H0(s,...r)}return s}function tC(n){return n._firestoreClient||K0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function K0(n){var e,t,i;let s=n._freezeSettings(),r=function(c,l,h,f){return new Rh(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,q0(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new Bd(n._authCredentials,n._appCheckCredentials,n._queue,r),!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}var $d=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nt.fromBase64String(e))}catch(t){throw new G(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ec=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var jd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var nC=new RegExp("[~\\*/\\[\\]]");function iC(n,e,t){if(e.search(nC)>=0)throw c0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ec(...e.split("."))._internalPath}catch{throw c0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function c0(n,e,t,i,s){let r=i&&!i.isEmpty(),a=s!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(r||a)&&(l+=" (found",r&&(l+=` in field ${i}`),a&&(l+=` in document ${s}`),l+=")"),new G(N.INVALID_ARGUMENT,c+n+l)}var tc=class{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Q0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Gd=class extends tc{data(){return super.data()}};function Q0(n,e){return typeof e=="string"?iC(n,e):e instanceof ec?e._internalPath:e._delegate._internalPath}function sC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qd=class{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return rc(e,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new jd(De(e.latitude),De(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=Qd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ar(e));default:return null}}convertTimestamp(e){let t=cn(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=xe.fromString(e);Fe(P0(i));let s=new Va(i.get(1),i.get(3)),r=new H(i.popFirst(5));return s.isEqual(t)||an(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}};var Ti=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nc=class extends tc{constructor(e,t,i,s,r,a){super(e,t,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new as(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Q0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},as=class extends nc{data(e={}){return super.data(e)}},Hd=class{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ti(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new as(this._firestore,this._userDataWriter,i.key,i,new Ti(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{let l=new as(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ti(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>r||c.type!==3).map(c=>{let l=new as(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ti(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter),h=-1,f=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:rC(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function rC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}var ic=class extends qd{constructor(e){super(),this.firestore=e}convertBytes(e){return new $d(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}};function af(n,...e){var t,i,s;n=rt(n);let r={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||a0(e[a])||(r=e[a],a++);let c={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(a0(e[a])){let m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let l,h,f;if(n instanceof on)h=Oa(n.firestore,Lr),f=Zd(n._key.path),l={next:m=>{e[a]&&e[a](oC(h,n,m))},error:e[a+1],complete:e[a+2]};else{let m=Oa(n,Za);h=Oa(m.firestore,Lr),f=m._query;let v=new ic(h);l={next:A=>{e[a]&&e[a](new Hd(h,v,m,A))},error:e[a+1],complete:e[a+2]},sC(n._query)}return function(v,A,D,R){let O=new Ld(R),F=new Pd(A,O,D);return v.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return FD(yield s0(v),F)})),()=>{O.$a(),v.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return VD(yield s0(v),F)}))}}(tC(h),f,c,l)}function oC(n,e,t){let i=t.docs.get(e._key),s=new ic(n);return new nc(n,s,e._key,i,new Ti(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){ws=s})(Nt),Mt(new ot("firestore",(i,{instanceIdentifier:s,options:r})=>{let a=i.getProvider("app").getImmediate(),c=new Lr(new Th(i.getProvider("auth-internal")),new Ah(i.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(h.options.projectId,f)}(a,s),a);return r=Object.assign({useFetchStreams:t},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),be(My,"4.6.4",e),be(My,"4.6.4","esm2017")})();var lc=function(){return lc=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lc.apply(this,arguments)};var hC={includeMetadataChanges:!1};function J0(n,e){return e===void 0&&(e=hC),new pt(function(t){var i=af(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:i}})}function Y0(n){return J0(n,{includeMetadataChanges:!0})}function X0(n,e){return e===void 0&&(e={}),Y0(n).pipe(Ae(function(t){return Z0(t,e)}))}function Z0(n,e){var t;e===void 0&&(e={});var i=n.data(e);return!n.exists()||typeof i!="object"||i===null||!e.idField?i:lc(lc({},i),(t={},t[e.idField]=n.id,t))}var Ai=class{constructor(e){return e}},ev="firestore",cf=class{constructor(){return di(ev)}};var lf=new se("angularfire2.firestore-instances");function dC(n,e){let t=Yi(ev,n,e);return t&&new Ai(t)}function fC(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Ai(i)}}var pC={provide:cf,deps:[[new qe,lf]]},mC={provide:Ai,useFactory:dC,deps:[[new qe,lf],It]};function tv(n,...e){return be("angularfire",Zt.full,"fst"),ct([mC,pC,{provide:lf,useFactory:fC(n),multi:!0,deps:[Re,He,Nn,en,[new qe,yi],[new qe,kn],...e]}])}var uf=yt(X0,!0);var hf=yt(z0,!0);var nv=yt(W0,!0);var cv="firebasestorage.googleapis.com",_C="storageBucket",yC=2*60*1e3,vC=10*60*1e3;var jt=class n extends tt{constructor(e,t,i=0){super(df(e),`Firebase Storage: ${t} (${df(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},un=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(un||{});function df(n){return"storage/"+n}function wC(){let n="An unknown error occurred, please check the error payload for server response.";return new jt(un.UNKNOWN,n)}function bC(){return new jt(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TC(){return new jt(un.CANCELED,"User canceled the upload/download.")}function EC(n){return new jt(un.INVALID_URL,"Invalid URL '"+n+"'.")}function IC(n){return new jt(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function iv(n){return new jt(un.INVALID_ARGUMENT,n)}function lv(){return new jt(un.APP_DELETED,"The Firebase app was deleted.")}function SC(n){return new jt(un.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var ln=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(i.path==="")return i;throw IC(e)}static makeFromUrl(e,t){let i=null,s="([A-Za-z0-9.\\-_]+)";function r(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}let a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}let f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",A=new RegExp(`^https?://${m}/${f}/b/${s}/o${v}`,"i"),D={bucket:1,path:3},R=t===cv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",F=new RegExp(`^https?://${R}/${s}/${O}`,"i"),U=[{regex:c,indices:l,postModify:r},{regex:A,indices:D,postModify:h},{regex:F,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<U.length;P++){let z=U[P],x=z.regex.exec(e);if(x){let w=x[z.indices.bucket],g=x[z.indices.path];g||(g=""),i=new n(w,g),z.postModify(i);break}}if(i==null)throw EC(e);return i}},ff=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function AC(n,e,t){let i=1,s=null,r=null,a=!1,c=0;function l(){return c===2}let h=!1;function f(...O){h||(h=!0,e.apply(null,O))}function m(O){s=setTimeout(()=>{s=null,n(A,l())},O)}function v(){r&&clearTimeout(r)}function A(O,...F){if(h){v();return}if(O){v(),f.call(null,O,...F);return}if(l()||a){v(),f.call(null,O,...F);return}i<64&&(i*=2);let U;c===1?(c=2,U=0):U=(i+Math.random())*1e3,m(U)}let D=!1;function R(O){D||(D=!0,v(),!h&&(s!==null?(O||(c=2),clearTimeout(s),m(0)):O||(c=1)))}return m(0),r=setTimeout(()=>{a=!0,R(!0)},t),R}function DC(n){n(!1)}function CC(n){return n!==void 0}function sv(n,e,t,i){if(i<e)throw iv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw iv(`Invalid value for '${n}'. Expected ${t} or less.`)}function RC(n){let e=encodeURIComponent,t="?";for(let i in n)if(n.hasOwnProperty(i)){let s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var pf=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(pf||{});function OC(n,e){let t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,r=e.indexOf(n)!==-1;return t||s||r}var mf=class{constructor(e,t,i,s,r,a,c,l,h,f,m,v=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,D)=>{this.resolve_=A,this.reject_=D,this.start_()})}start_(){let e=(i,s)=>{if(s){i(!1,new Ts(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let a=c=>{let l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&r.addUploadProgressListener(a),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(a),this.pendingConnection_=null;let c=r.getErrorCode()===pf.NO_ERROR,l=r.getStatus();if(!c||OC(l,this.additionalRetryCodes_)&&this.retry){let f=r.getErrorCode()===pf.ABORT;i(!1,new Ts(!1,null,f));return}let h=this.successCodes_.indexOf(l)!==-1;i(!0,new Ts(h,r))})},t=(i,s)=>{let r=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());CC(l)?r(l):r()}catch(l){a(l)}else if(c!==null){let l=wC();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(s.canceled){let l=this.appDelete_?lv():TC();a(l)}else{let l=bC();a(l)}};this.canceled_?t(!1,new Ts(!1,null,!0)):this.backoffId_=AC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ts=class{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}};function PC(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MC(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kC(n,e){e&&(n["X-Firebase-GMPID"]=e)}function NC(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function xC(n,e,t,i,s,r,a=!0){let c=RC(n.urlParams),l=n.url+c,h=Object.assign({},n.headers);return kC(h,e),PC(h,t),MC(h,r),NC(h,i),new mf(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a)}function FC(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function VC(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var QN=256*1024;var gf=class n{constructor(e,t){this._service=e,t instanceof ln?this._location=t:this._location=ln.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VC(this._location.path)}get storage(){return this._service}get parent(){let e=FC(this._location.path);if(e===null)return null;let t=new ln(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw SC(e)}};function rv(n,e){let t=e?.[_C];return t==null?null:ln.makeFromBucketSpec(t,n)}function LC(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:s}=i;s&&(n._overrideAuthToken=typeof s=="string"?s:Zo(s,n.app.options.projectId))}var _f=class{constructor(e,t,i,s,r){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=cv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yC,this._maxUploadRetryTime=vC,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=rv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=rv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return b(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return b(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gf(this,e)}_makeRequest(e,t,i,s,r=!0){if(this._deleted)return new ff(lv());{let a=xC(e,this._appId,i,s,t,this._firebaseVersion,r);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return b(this,null,function*(){let[i,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()})}},ov="@firebase/storage",av="0.12.6";var uv="storage";function hv(n=Mn(),e){n=rt(n);let i=ui(n,uv).getImmediate({identifier:e}),s=Xo("storage");return s&&dv(i,...s),i}function dv(n,e,t,i={}){LC(n,e,t,i)}function BC(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new _f(t,i,s,e,Nt)}function UC(){Mt(new ot(uv,BC,"PUBLIC").setMultipleInstances(!0)),be(ov,av,""),be(ov,av,"esm2017")}UC();var jr=class{constructor(e){return e}},fv="storage",yf=class{constructor(){return di(fv)}};var vf=new se("angularfire2.storage-instances");function $C(n,e){let t=Yi(fv,n,e);return t&&new jr(t)}function jC(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new jr(i)}}var GC={provide:yf,deps:[[new qe,vf]]},qC={provide:jr,useFactory:$C,deps:[[new qe,vf],It]};function pv(n,...e){return be("angularfire",Zt.full,"gcs"),ct([qC,GC,{provide:vf,useFactory:jC(n),multi:!0,deps:[Re,He,Nn,en,[new qe,yi],[new qe,kn],...e]}])}var mv=yt(hv,!0);var gv={projectId:"isaom-dd242",appId:"1:1093266505221:web:5e0f8217880d209435666c",storageBucket:"isaom-dd242.appspot.com",apiKey:"AIzaSyCQMGwI2Ojfci47XJ9Qsi07SGKl-jvP3jY",authDomain:"isaom-dd242.firebaseapp.com",messagingSenderId:"1093266505221"};var _v=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({imports:[Qs,e_]});let n=e;return n})();var qr="PERFORM_ACTION",HC="REFRESH",Ev="RESET",Iv="ROLLBACK",Sv="COMMIT",Av="SWEEP",Dv="TOGGLE_ACTION",zC="SET_ACTIONS_ACTIVE",Cv="JUMP_TO_STATE",Rv="JUMP_TO_ACTION",Mf="IMPORT_STATE",Ov="LOCK_CHANGES",Pv="PAUSE_RECORDING",Es=class{constructor(e,t){if(this.action=e,this.timestamp=t,this.type=qr,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},wf=class{constructor(){this.type=HC}},bf=class{constructor(e){this.timestamp=e,this.type=Ev}},Tf=class{constructor(e){this.timestamp=e,this.type=Iv}},Ef=class{constructor(e){this.timestamp=e,this.type=Sv}},If=class{constructor(){this.type=Av}},Sf=class{constructor(e){this.id=e,this.type=Dv}};var Af=class{constructor(e){this.index=e,this.type=Cv}},Df=class{constructor(e){this.actionId=e,this.type=Rv}},Cf=class{constructor(e){this.nextLiftedState=e,this.type=Mf}},Rf=class{constructor(e){this.status=e,this.type=Ov}},Of=class{constructor(e){this.status=e,this.type=Pv}};var fc=new se("@ngrx/store-devtools Options"),yv=new se("@ngrx/store-devtools Initial Config");function Mv(){return null}var WC="NgRx Store DevTools";function KC(n){let e={maxAge:!1,monitor:Mv,actionSanitizer:void 0,stateSanitizer:void 0,name:WC,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof n=="function"?n():n,i=t.logOnly?{pause:!0,export:!0,test:!0}:!1,s=t.features||i||e.features;s.import===!0&&(s.import="custom");let r=Object.assign({},e,{features:s},t);if(r.maxAge&&r.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${r.maxAge}`);return r}function vv(n,e){return n.filter(t=>e.indexOf(t)<0)}function kv(n){let{computedStates:e,currentStateIndex:t}=n;if(t>=e.length){let{state:s}=e[e.length-1];return s}let{state:i}=e[t];return i}function Gr(n){return new Es(n,+Date.now())}function QC(n,e){return Object.keys(e).reduce((t,i)=>{let s=Number(i);return t[s]=Nv(n,e[s],s),t},{})}function Nv(n,e,t){return de(K({},e),{action:n(e.action,t)})}function JC(n,e){return e.map((t,i)=>({state:xv(n,t.state,i),error:t.error}))}function xv(n,e,t){return n(e,t)}function Fv(n){return n.predicate||n.actionsSafelist||n.actionsBlocklist}function YC(n,e,t,i){let s=[],r={},a=[];return n.stagedActionIds.forEach((c,l)=>{let h=n.actionsById[c];h&&(l&&kf(n.computedStates[l],h,e,t,i)||(r[c]=h,s.push(c),a.push(n.computedStates[l])))}),de(K({},n),{stagedActionIds:s,actionsById:r,computedStates:a})}function kf(n,e,t,i,s){let r=t&&!t(n,e.action),a=i&&!e.action.type.match(i.map(l=>wv(l)).join("|")),c=s&&e.action.type.match(s.map(l=>wv(l)).join("|"));return r||a||c}function wv(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Vv(n){return{ngZone:n?ce(Re):null,connectInZone:n}}var pc=(()=>{let e=class e extends _o{};e.\u0275fac=(()=>{let i;return function(r){return(i||(i=Gs(e)))(r||e)}})(),e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),uc={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Pf=new se("@ngrx/store-devtools Redux Devtools Extension"),Lv=(()=>{let e=class e{constructor(i,s,r){this.config=s,this.dispatcher=r,this.zoneConfig=Vv(this.config.connectInZone),this.devtoolsExtension=i,this.createActionStreams()}notify(i,s){if(this.devtoolsExtension)if(i.type===qr){if(s.isLocked||s.isPaused)return;let r=kv(s);if(Fv(this.config)&&kf(r,i,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?xv(this.config.stateSanitizer,r,s.currentStateIndex):r,c=this.config.actionSanitizer?Nv(this.config.actionSanitizer,i,s.nextActionId):i;this.sendToReduxDevtools(()=>this.extensionConnection.send(c,a))}else{let r=de(K({},s),{stagedActionIds:s.stagedActionIds,actionsById:this.config.actionSanitizer?QC(this.config.actionSanitizer,s.actionsById):s.actionsById,computedStates:this.config.stateSanitizer?JC(this.config.stateSanitizer,s.computedStates):s.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new pt(i=>{let s=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=s,s.init(),s.subscribe(r=>i.next(r)),s.unsubscribe}):ao}createActionStreams(){let i=this.createChangesObservable().pipe(rm()),s=i.pipe(Qe(f=>f.type===uc.START)),r=i.pipe(Qe(f=>f.type===uc.STOP)),a=i.pipe(Qe(f=>f.type===uc.DISPATCH),Ae(f=>this.unwrapAction(f.payload)),Kc(f=>f.type===Mf?this.dispatcher.pipe(Qe(m=>m.type===cl),Jp(1e3),em(1e3),Ae(()=>f),yn(()=>mt(f)),Kt(1)):mt(f))),l=i.pipe(Qe(f=>f.type===uc.ACTION),Ae(f=>this.unwrapAction(f.payload))).pipe(Ge(r)),h=a.pipe(Ge(r));this.start$=s.pipe(Ge(r)),this.actions$=this.start$.pipe(Yn(()=>l)),this.liftedActions$=this.start$.pipe(Yn(()=>h))}unwrapAction(i){return typeof i=="string"?(0,eval)(`(${i})`):i}getExtensionConfig(i){let s={name:i.name,features:i.features,serialize:i.serialize,autoPause:i.autoPause??!1,trace:i.trace??!1,traceLimit:i.traceLimit??75};return i.maxAge!==!1&&(s.maxAge=i.maxAge),s}sendToReduxDevtools(i){try{i()}catch(s){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",s)}}};e.\u0275fac=function(s){return new(s||e)(q(Pf),q(fc),q(pc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})(),dc={type:al},XC="@ngrx/store-devtools/recompute",ZC={type:XC};function Bv(n,e,t,i,s){if(i)return{state:t,error:"Interrupted by an error up the chain"};let r=t,a;try{r=n(t,e)}catch(c){a=c.toString(),s.handleError(c)}return{state:r,error:a}}function hc(n,e,t,i,s,r,a,c,l){if(e>=n.length&&n.length===r.length)return n;let h=n.slice(0,e),f=r.length-(l?1:0);for(let m=e;m<f;m++){let v=r[m],A=s[v].action,D=h[m-1],R=D?D.state:i,O=D?D.error:void 0,L=a.indexOf(v)>-1?D:Bv(t,A,R,O,c);h.push(L)}return l&&h.push(n[n.length-1]),h}function eR(n,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:Gr(dc)},stagedActionIds:[0],skippedActionIds:[],committedState:n,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function tR(n,e,t,i,s={}){return r=>(a,c)=>{let{monitorState:l,actionsById:h,nextActionId:f,stagedActionIds:m,skippedActionIds:v,committedState:A,currentStateIndex:D,computedStates:R,isLocked:O,isPaused:F}=a||e;a||(h=Object.create(h));function L(z){let x=z,w=m.slice(1,x+1);for(let g=0;g<w.length;g++)if(R[g+1].error){x=g,w=m.slice(1,x+1);break}else delete h[w[g]];v=v.filter(g=>w.indexOf(g)===-1),m=[0,...m.slice(x+1)],A=R[x].state,R=R.slice(x),D=D>x?D-x:0}function U(){h={0:Gr(dc)},f=1,m=[0],v=[],A=R[D].state,D=0,R=[]}let P=0;switch(c.type){case Ov:{O=c.status,P=1/0;break}case Pv:{F=c.status,F?(m=[...m,f],h[f]=new Es({type:"@ngrx/devtools/pause"},+Date.now()),f++,P=m.length-1,R=R.concat(R[R.length-1]),D===m.length-2&&D++,P=1/0):U();break}case Ev:{h={0:Gr(dc)},f=1,m=[0],v=[],A=n,D=0,R=[];break}case Sv:{U();break}case Iv:{h={0:Gr(dc)},f=1,m=[0],v=[],D=0,R=[];break}case Dv:{let{id:z}=c;v.indexOf(z)===-1?v=[z,...v]:v=v.filter(w=>w!==z),P=m.indexOf(z);break}case zC:{let{start:z,end:x,active:w}=c,g=[];for(let _=z;_<x;_++)g.push(_);w?v=vv(v,g):v=[...v,...g],P=m.indexOf(z);break}case Cv:{D=c.index,P=1/0;break}case Rv:{let z=m.indexOf(c.actionId);z!==-1&&(D=z),P=1/0;break}case Av:{m=vv(m,v),v=[],D=Math.min(D,m.length-1);break}case qr:{if(O)return a||e;if(F||a&&kf(a.computedStates[D],c,s.predicate,s.actionsSafelist,s.actionsBlocklist)){let x=R[R.length-1];R=[...R.slice(0,-1),Bv(r,c.action,x.state,x.error,t)],P=1/0;break}s.maxAge&&m.length===s.maxAge&&L(1),D===m.length-1&&D++;let z=f++;h[z]=c,m=[...m,z],P=m.length-1;break}case Mf:{({monitorState:l,actionsById:h,nextActionId:f,stagedActionIds:m,skippedActionIds:v,committedState:A,currentStateIndex:D,computedStates:R,isLocked:O,isPaused:F}=c.nextLiftedState);break}case al:{P=0,s.maxAge&&m.length>s.maxAge&&(R=hc(R,P,r,A,h,m,v,t,F),L(m.length-s.maxAge),P=1/0);break}case cl:{if(R.filter(x=>x.error).length>0)P=0,s.maxAge&&m.length>s.maxAge&&(R=hc(R,P,r,A,h,m,v,t,F),L(m.length-s.maxAge),P=1/0);else{if(!F&&!O){D===m.length-1&&D++;let x=f++;h[x]=new Es(c,+Date.now()),m=[...m,x],P=m.length-1,R=hc(R,P,r,A,h,m,v,t,F)}R=R.map(x=>de(K({},x),{state:r(x.state,ZC)})),D=m.length-1,s.maxAge&&m.length>s.maxAge&&L(m.length-s.maxAge),P=1/0}break}default:{P=1/0;break}}return R=hc(R,P,r,A,h,m,v,t,F),l=i(l,c),{monitorState:l,actionsById:h,nextActionId:f,stagedActionIds:m,skippedActionIds:v,committedState:A,currentStateIndex:D,computedStates:R,isLocked:O,isPaused:F}}}var bv=(()=>{let e=class e{constructor(i,s,r,a,c,l,h,f){let m=eR(h,f.monitor),v=tR(h,m,l,f.monitor,f),A=Jn(Jn(s.asObservable().pipe(Yc(1)),a.actions$).pipe(Ae(Gr)),i,a.liftedActions$).pipe(Us(oo)),D=r.pipe(Ae(v)),R=Vv(f.connectInZone),O=new Kp(1);this.liftedStateSubscription=A.pipe($s(D),Tv(R),Jc(({state:U},[P,z])=>{let x=z(U,P);return P.type!==qr&&Fv(f)&&(x=YC(x,f.predicate,f.actionsSafelist,f.actionsBlocklist)),a.notify(P,x),{state:x,action:P}},{state:m,action:null})).subscribe(({state:U,action:P})=>{if(O.next(U),P.type===qr){let z=P.action;c.next(z)}}),this.extensionStartSubscription=a.start$.pipe(Tv(R)).subscribe(()=>{this.refresh()});let F=O.asObservable(),L=F.pipe(Ae(kv));Object.defineProperty(L,"state",{value:Rm(L,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=F,this.state=L}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new Es(i,+Date.now()))}refresh(){this.dispatch(new wf)}reset(){this.dispatch(new bf(+Date.now()))}rollback(){this.dispatch(new Tf(+Date.now()))}commit(){this.dispatch(new Ef(+Date.now()))}sweep(){this.dispatch(new If)}toggleAction(i){this.dispatch(new Sf(i))}jumpToAction(i){this.dispatch(new Df(i))}jumpToState(i){this.dispatch(new Af(i))}importState(i){this.dispatch(new Cf(i))}lockChanges(i){this.dispatch(new Rf(i))}pauseRecording(i){this.dispatch(new Of(i))}};e.\u0275fac=function(s){return new(s||e)(q(pc),q(_o),q(Mm),q(Lv),q(yo),q(ho),q(Pm),q(fc))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();function Tv({ngZone:n,connectInZone:e}){return t=>e?new pt(i=>t.subscribe({next:s=>n.run(()=>i.next(s)),error:s=>n.run(()=>i.error(s)),complete:()=>n.run(()=>i.complete())})):t}var nR=new se("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function iR(n,e){return!!n||e.monitor!==Mv}function sR(){let n="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[n]<"u"?window[n]:null}function rR(n={}){return ct([Lv,pc,bv,{provide:yv,useValue:n},{provide:nR,deps:[Pf,fc],useFactory:iR},{provide:Pf,useFactory:sR},{provide:fc,deps:[yv],useFactory:KC},{provide:Nm,deps:[bv],useFactory:oR},{provide:km,useExisting:pc}])}function oR(n){return n.state}var Uv=(()=>{let e=class e{static instrument(i={}){return{ngModule:e,providers:[rR(i)]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var cR={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},gc="__@ngrx/effects_create__";function qn(n,e={}){let t=e.functional?n:n(),i=K(K({},cR),e);return Object.defineProperty(t,gc,{value:i}),t}function lR(n){return Object.getOwnPropertyNames(n).filter(i=>n[i]&&n[i].hasOwnProperty(gc)?n[i][gc].hasOwnProperty("dispatch"):!1).map(i=>{let s=n[i][gc];return K({propertyName:i},s)})}function uR(n){return lR(n)}function qv(n){return Object.getPrototypeOf(n)}function hR(n){return!!n.constructor&&n.constructor.name!=="Object"&&n.constructor.name!=="Function"}function Hv(n){return typeof n=="function"}function $v(n){return n.filter(Hv)}function dR(n){return n instanceof se||Hv(n)}function fR(n,e,t){let i=qv(n),r=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,a=uR(n).map(({propertyName:c,dispatch:l,useEffectsErrorHandler:h})=>{let f=typeof n[c]=="function"?n[c]():n[c],m=h?t(f,e):f;return l===!1?m.pipe(tm()):m.pipe(sm()).pipe(Ae(A=>({effect:n[c],notification:A,propertyName:c,sourceName:r,sourceInstance:n})))});return Jn(...a)}var pR=10;function zv(n,e,t=pR){return n.pipe(yn(i=>(e&&e.handleError(i),t<=1?n:zv(n,e,t-1))))}var Wv=(()=>{let e=class e extends pt{constructor(i){super(),i&&(this.source=i)}lift(i){let s=new e;return s.source=this,s.operator=i,s}};e.\u0275fac=function(s){return new(s||e)(q(yo))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Hn(...n){return Qe(e=>n.some(t=>typeof t=="string"?t===e.type:t.type===e.type))}var Kv=new se("@ngrx/effects Internal Root Guard"),mc=new se("@ngrx/effects User Provided Effects"),Nf=new se("@ngrx/effects Internal Root Effects"),Qv=new se("@ngrx/effects Internal Root Effects Instances"),jv=new se("@ngrx/effects Internal Feature Effects"),Jv=new se("@ngrx/effects Internal Feature Effects Instance Groups"),mR=new se("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>zv}),Yv="@ngrx/effects/init",Zx=Om(Yv);function gR(n,e){if(n.notification.kind==="N"){let t=n.notification.value;!_R(t)&&e.handleError(new Error(`Effect ${yR(n)} dispatched an invalid action: ${vR(t)}`))}}function _R(n){return typeof n!="function"&&n&&n.type&&typeof n.type=="string"}function yR({propertyName:n,sourceInstance:e,sourceName:t}){let i=typeof e[n]=="function";return!!t?`"${t}.${String(n)}${i?"()":""}"`:`"${String(n)}()"`}function vR(n){try{return JSON.stringify(n)}catch{return n}}var wR="ngrxOnIdentifyEffects";function bR(n){return xf(n,wR)}var TR="ngrxOnRunEffects";function ER(n){return xf(n,TR)}var IR="ngrxOnInitEffects";function SR(n){return xf(n,IR)}function xf(n,e){return n&&e in n&&typeof n[e]=="function"}var Xv=(()=>{let e=class e extends Pe{constructor(i,s){super(),this.errorHandler=i,this.effectsErrorHandler=s}addEffects(i){this.next(i)}toActions(){return this.pipe(Qc(i=>hR(i)?qv(i):i),co(i=>i.pipe(Qc(AR))),co(i=>{let s=i.pipe(Ni(a=>DR(this.errorHandler,this.effectsErrorHandler)(a)),Ae(a=>(gR(a,this.errorHandler),a.notification)),Qe(a=>a.kind==="N"&&a.value!=null),nm()),r=i.pipe(Kt(1),Qe(SR),Ae(a=>a.ngrxOnInitEffects()));return Jn(s,r)}))}};e.\u0275fac=function(s){return new(s||e)(q(ho),q(mR))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function AR(n){return bR(n)?n.ngrxOnIdentifyEffects():""}function DR(n,e){return t=>{let i=fR(t,n,e);return ER(t)?t.ngrxOnRunEffects(i):i}}var Zv=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,s){this.effectSources=i,this.store=s,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(s){return new(s||e)(q(Xv),q(Ct))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ew=(()=>{let e=class e{constructor(i,s,r,a,c,l,h){this.sources=i,s.start();for(let f of a)i.addEffects(f);r.dispatch({type:Yv})}addEffects(i){this.sources.addEffects(i)}};e.\u0275fac=function(s){return new(s||e)(q(Xv),q(Zv),q(Ct),q(Qv),q(ll,8),q(ul,8),q(Kv,8))},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),CR=(()=>{let e=class e{constructor(i,s,r,a){let c=s.flat();for(let l of c)i.addEffects(l)}};e.\u0275fac=function(s){return new(s||e)(q(ew),q(Jv),q(ll,8),q(ul,8))},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),tw=(()=>{let e=class e{static forFeature(...i){let s=i.flat(),r=$v(s);return{ngModule:CR,providers:[r,{provide:jv,multi:!0,useValue:s},{provide:mc,multi:!0,useValue:[]},{provide:Jv,multi:!0,useFactory:Gv,deps:[jv,mc]}]}}static forRoot(...i){let s=i.flat(),r=$v(s);return{ngModule:ew,providers:[r,{provide:Nf,useValue:[s]},{provide:Kv,useFactory:RR},{provide:mc,multi:!0,useValue:[]},{provide:Qv,useFactory:Gv,deps:[Nf,mc]}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();function Gv(n,e){let t=[];for(let i of n)t.push(...i);for(let i of e)t.push(...i);return t.map(i=>dR(i)?ce(i):i)}function RR(){let n=ce(Zv,{optional:!0,skipSelf:!0}),e=ce(Nf,{self:!0});if(!(e.length===1&&e[0].length===0)&&n)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var Ff={toFirestore:n=>n,fromFirestore:n=>{let e=n.data();return e.createdAt=e.createdAt.toDate(),e}};var nw="administrator",iw=(()=>{let e=class e{constructor(i,s){this.auth=i,this.firestore=s}login(i,s){return Mi(Cy(this.auth,i,s)).pipe(Yn(r=>{let a=hf(this.firestore,nw,r.user.uid).withConverter(Ff);return uf(a)})).pipe(ki(2e3))}getCurrentUser(){let i=this.auth.currentUser;if(i){let s=hf(this.firestore,nw,i.uid).withConverter(Ff);return uf(s)}else return mt(null).pipe(ki(1e3))}logout(){return Mi(Ry(this.auth))}};e.\u0275fac=function(s){return new(s||e)(q(_i),q(Ai))},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var sw=["toast-component",""];function kR(n,e){if(n&1){let t=An();he(0,"button",5),st("click",function(){vn(t);let s=Me();return wn(s.remove())}),he(1,"span",6),Le(2,"\xD7"),Te()()}}function NR(n,e){if(n&1&&(In(0),Le(1),Sn()),n&2){let t=Me(2);le(),Dt("[",t.duplicatesCount+1,"]")}}function xR(n,e){if(n&1&&(he(0,"div"),Le(1),Tt(2,NR,2,1,"ng-container",4),Te()),n&2){let t=Me();lt(t.options.titleClass),En("aria-label",t.title),le(),Dt(" ",t.title," "),le(),me("ngIf",t.duplicatesCount)}}function FR(n,e){if(n&1&&Ve(0,"div",7),n&2){let t=Me();lt(t.options.messageClass),me("innerHTML",t.message,tl)}}function VR(n,e){if(n&1&&(he(0,"div",8),Le(1),Te()),n&2){let t=Me();lt(t.options.messageClass),En("aria-label",t.message),le(),Dt(" ",t.message," ")}}function LR(n,e){if(n&1&&(he(0,"div"),Ve(1,"div",9),Te()),n&2){let t=Me();le(),Fi("width",t.width()+"%")}}function BR(n,e){if(n&1){let t=An();he(0,"button",5),st("click",function(){vn(t);let s=Me();return wn(s.remove())}),he(1,"span",6),Le(2,"\xD7"),Te()()}}function UR(n,e){if(n&1&&(In(0),Le(1),Sn()),n&2){let t=Me(2);le(),Dt("[",t.duplicatesCount+1,"]")}}function $R(n,e){if(n&1&&(he(0,"div"),Le(1),Tt(2,UR,2,1,"ng-container",4),Te()),n&2){let t=Me();lt(t.options.titleClass),En("aria-label",t.title),le(),Dt(" ",t.title," "),le(),me("ngIf",t.duplicatesCount)}}function jR(n,e){if(n&1&&Ve(0,"div",7),n&2){let t=Me();lt(t.options.messageClass),me("innerHTML",t.message,tl)}}function GR(n,e){if(n&1&&(he(0,"div",8),Le(1),Te()),n&2){let t=Me();lt(t.options.messageClass),En("aria-label",t.message),le(),Dt(" ",t.message," ")}}function qR(n,e){if(n&1&&(he(0,"div"),Ve(1,"div",9),Te()),n&2){let t=Me();le(),Fi("width",t.width()+"%")}}var Vf=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Lf=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},Bf=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Pe;_activate=new Pe;_manualClose=new Pe;_resetTimeout=new Pe;_countDuplicate=new Pe;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},Is=class{toastId;config;message;title;toastType;toastRef;_onTap=new Pe;_onAction=new Pe;constructor(e,t,i,s,r,a){this.toastId=e,this.config=t,this.message=i,this.title=s,this.toastType=r,this.toastRef=a,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},rw={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},ow=new se("ToastConfig"),Uf=class extends Lf{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){let i=this._componentFactoryResolver.resolveComponentFactory(e.component),s;return s=i.create(e.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},HR=(()=>{class n{_document=ce(Jt);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$f=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},zR=(()=>{class n{_overlayContainer=ce(HR);_componentFactoryResolver=ce(hm);_appRef=ce(Bi);_document=ce(Jt);_paneElements=new Map;create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){let s=this._document.createElement("div");return s.id="toast-container",s.classList.add(t),s.classList.add("toast-container"),i?i.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(t){return new Uf(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new $f(this._createPortalHost(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_c=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,i,s,r,a){this.overlay=i,this._injector=s,this.sanitizer=r,this.ngZone=a,this.toastrConfig=K(K({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=K(K({},t.default.iconClasses),t.config.iconClasses))}show(t,i,s={},r=""){return this._preBuildNotification(r,t,i,this.applyConfig(s))}success(t,i,s={}){let r=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(r,t,i,this.applyConfig(s))}error(t,i,s={}){let r=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(r,t,i,this.applyConfig(s))}info(t,i,s={}){let r=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(r,t,i,this.applyConfig(s))}warning(t,i,s={}){let r=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(r,t,i,this.applyConfig(s))}clear(t){for(let i of this.toasts)if(t!==void 0){if(i.toastId===t){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(t){let i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(t="",i="",s,r){let{includeTitleDuplicates:a}=this.toastrConfig;for(let c of this.toasts){let l=a&&c.title===t;if((!a||l)&&c.message===i)return c.toastRef.onDuplicate(s,r),c}return null}applyConfig(t={}){return K(K({},this.toastrConfig),t)}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,s,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,s,r)):this._buildNotification(t,i,s,r)}_buildNotification(t,i,s,r){if(!r.toastComponent)throw new Error("toastComponent required");let a=this.findDuplicate(s,i,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||i)&&this.toastrConfig.preventDuplicates&&a!==null)return a;this.previousToastMessage=i;let c=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(c=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let h=i;i&&r.enableHtml&&(h=this.sanitizer.sanitize(om.HTML,i));let f=new Bf(l),m=new Is(this.index,r,h,s,t,f),v=[{provide:Is,useValue:m}],A=He.create({providers:v,parent:this._injector}),D=new Vf(r.toastComponent,A),R=l.attach(D,r.newestOnTop);f.componentInstance=R.instance;let O={toastId:this.index,title:s||"",message:i||"",toastRef:f,onShown:f.afterActivate(),onHidden:f.afterClosed(),onTap:m.onTap(),onAction:m.onAction(),portal:R};return c||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{O.toastRef.activate()})),this.toasts.push(O),O}static \u0275fac=function(i){return new(i||n)(q(ow),q(zR),q(He),q(Am),q(Re))};static \u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WR=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=qs(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,s){this.toastrService=t,this.toastPackage=i,this.ngZone=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r}),this.state=qs({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>de(K({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(s=>100-s),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>de(K({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>de(K({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(i){return new(i||n)(ue(_c),ue(Is),ue(Re))};static \u0275cmp=gt({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,s){i&1&&st("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(fm("@flyInOut",s._state),lt(s.toastClasses),Fi("display",s.displayStyle))},standalone:!0,features:[Li],attrs:sw,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&Tt(0,kR,3,0,"button",0)(1,xR,3,5,"div",1)(2,FR,1,3,"div",2)(3,VR,2,4,"div",3)(4,LR,2,2,"div",4),i&2&&(me("ngIf",s.options.closeButton),le(),me("ngIf",s.title),le(),me("ngIf",s.message&&s.options.enableHtml),le(),me("ngIf",s.message&&!s.options.enableHtml),le(),me("ngIf",s.options.progressBar))},dependencies:[Zn],encapsulation:2,data:{animation:[Lm("flyInOut",[vo("inactive",ti({opacity:0})),vo("active",ti({opacity:1})),vo("removed",ti({opacity:0})),fl("inactive => active",dl("{{ easeTime }}ms {{ easing }}")),fl("active => removed",dl("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),KR=de(K({},rw),{toastComponent:WR}),QR=(n={})=>ct([{provide:ow,useValue:{default:KR,config:n}}]),aw=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[QR(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=X({type:n});static \u0275inj=Y({})}return n})();var JR=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=qs(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=qs("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,i,s){this.toastrService=t,this.toastPackage=i,this.appRef=s,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),i=this.hideTime-t;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(s=>100-s),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||n)(ue(_c),ue(Is),ue(Bi))};static \u0275cmp=gt({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,s){i&1&&st("click",function(){return s.tapToast()})("mouseenter",function(){return s.stickAround()})("mouseleave",function(){return s.delayedHideToast()}),i&2&&(lt(s.toastClasses),Fi("display",s.displayStyle))},standalone:!0,features:[Li],attrs:sw,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,s){i&1&&Tt(0,BR,3,0,"button",0)(1,$R,3,5,"div",1)(2,jR,1,3,"div",2)(3,GR,2,4,"div",3)(4,qR,2,2,"div",4),i&2&&(me("ngIf",s.options.closeButton),le(),me("ngIf",s.title),le(),me("ngIf",s.message&&s.options.enableHtml),le(),me("ngIf",s.message&&!s.options.enableHtml),le(),me("ngIf",s.options.progressBar))},dependencies:[Zn],encapsulation:2,changeDetection:0})}return n})(),yF=de(K({},rw),{toastComponent:JR});var cw=(()=>{let e=class e{constructor(i,s,r,a){this.actions$=i,this.authService=s,this.router=r,this.toastr=a,this.loginEffect=qn(()=>this.actions$.pipe(Hn(_e.login),Ni(({email:c,password:l})=>this.authService.login(c,l).pipe(Ae(h=>_e.loginSuccess({currentUser:h})),yn(h=>mt(_e.loginFailed({message:h.message.toString()}))))))),this.loginSuccess=qn(()=>this.actions$.pipe(Hn(_e.loginSuccess),ki(1e3),Qt(({currentUser:c})=>{c?(this.toastr.success("Successfully Logged in!"),this.router.navigate(["main"])):(this.toastr.error("unknown error"),this.router.navigate(["login"]))})),{functional:!0,dispatch:!1}),this.loginFailed=qn(()=>this.actions$.pipe(Hn(_e.loginFailed),Qt(({message:c})=>{c!==null&&this.toastr.error(c),this.router.navigate(["login"])})),{functional:!0,dispatch:!1}),this.getCurrentUserEffect=qn(()=>this.actions$.pipe(Hn(_e.getCurrentUser),Ni(()=>this.authService.getCurrentUser().pipe(Ae(c=>c!==null?_e.loginSuccess({currentUser:c}):_e.loginFailed({message:null})),yn(c=>mt(_e.loginFailed({message:null}))))))),this.signOut=qn(()=>this.actions$.pipe(Hn(_e.signOut),Ni(()=>this.authService.logout().pipe(Ae(c=>_e.signSuccess()),yn(c=>mt(_e.signFailed())))))),this.signOutSuccess=qn(()=>this.actions$.pipe(Hn(_e.signSuccess),Qt(()=>{this.router.navigate(["login"])})),{functional:!0,dispatch:!1}),this.signOutFailed=qn(()=>this.actions$.pipe(Hn(_e.signFailed),Qt(()=>{})),{functional:!0,dispatch:!1})}};e.\u0275fac=function(s){return new(s||e)(q(Wv),q(iw),q(go),q(_c))},e.\u0275prov=fe({token:e,factory:e.\u0275fac});let n=e;return n})();var lw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({imports:[Ui,Vo,Qs,Vm,Qs]});let n=e;return n})();var XR=["*"];var ZR=["dialog"];var uw={animation:!0,transitionTimerDelayMs:5},eO=(()=>{let e=class e{constructor(){this.animation=uw.animation}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function tO(n){let{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n),i=parseFloat(e),s=parseFloat(t);return(i+s)*1e3}function hw(n){return typeof n=="string"}function jf(n){return n!=null}function nO(n){return n&&n.then}function dw(n){return(n||document.body).getBoundingClientRect()}function iO(n){return e=>new pt(t=>{let i=a=>n.run(()=>t.next(a)),s=a=>n.run(()=>t.error(a)),r=()=>n.run(()=>t.complete());return e.subscribe({next:i,error:s,complete:r})})}var sO=()=>{},{transitionTimerDelayMs:rO}=uw,yc=new Map,Di=(n,e,t,i)=>{let s=i.context||{},r=yc.get(e);if(r)switch(i.runningTransition){case"continue":return ao;case"stop":n.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),yc.delete(e)}let a=t(e,i.animation,s)||sO;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return n.run(()=>a()),mt(void 0).pipe(iO(n));let c=new Pe,l=new Pe,h=c.pipe(im(!0));yc.set(e,{transition$:c,complete:()=>{l.next(),l.complete()},context:s});let f=tO(e);return n.runOutsideAngular(()=>{let m=Wt(e,"transitionend").pipe(Ge(h),Qe(({target:A})=>A===e)),v=Xp(f+rO).pipe(Ge(h));Zp(v,m,l).pipe(Ge(h)).subscribe(()=>{yc.delete(e),n.run(()=>{a(),c.next(),c.complete()})})}),c.asObservable()};var fw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var pw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var mw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),gw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Hf=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(Hf||{});var LV=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||e()):!1})();var oO=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function _w(n){let e=Array.from(n.querySelectorAll(oO)).filter(t=>t.tabIndex!==-1);return[e[0],e[e.length-1]]}var aO=(n,e,t,i=!1)=>{n.runOutsideAngular(()=>{let s=Wt(e,"focusin").pipe(Ge(t),Ae(r=>r.target));Wt(e,"keydown").pipe(Ge(t),Qe(r=>r.which===Hf.Tab),$s(s)).subscribe(([r,a])=>{let[c,l]=_w(e);(a===c||a===e)&&r.shiftKey&&(l.focus(),r.preventDefault()),a===l&&!r.shiftKey&&(c.focus(),r.preventDefault())}),i&&Wt(e,"click").pipe(Ge(t),$s(s),Ae(r=>r[1])).subscribe(r=>r.focus())})};var BV=new Date(1882,10,12),UV=new Date(2174,10,25);var $V=1e3*60*60*24;var zf=1080,cO=24*zf,lO=12*zf+793,jV=29*cO+lO,GV=11*zf+204;var yw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var vw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),uO=(()=>{let e=class e{constructor(){this._ngbConfig=ce(eO),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ss=class{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}};var hO=(()=>{let e=class e{constructor(){this._document=ce(Jt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,r=s.style,{overflow:a,paddingRight:c}=r;if(i>0){let l=parseFloat(window.getComputedStyle(s).paddingRight);r.paddingRight=`${l+i}px`}return r.overflow="hidden",()=>{i>0&&(r.paddingRight=c),r.overflow=a}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),dO=(()=>{let e=class e{constructor(){this._nativeElement=ce(Xn).nativeElement,this._zone=ce(Re)}ngOnInit(){this._zone.onStable.asObservable().pipe(Kt(1)).subscribe(()=>{Di(this._zone,this._nativeElement,(i,s)=>{s&&dw(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Di(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=gt({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,r){s&2&&(lt("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Vi("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Li],decls:0,vars:0,template:function(s,r){},encapsulation:2});let n=e;return n})(),vc=class{update(e){}close(e){}dismiss(e){}},fO=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],pO=["animation","backdropClass"],Gf=class{_applyWindowOptions(e,t){fO.forEach(i=>{jf(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){pO.forEach(i=>{jf(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ge(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ge(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,s){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Pe,this._dismissed=new Pe,this._hidden=new Pe,e.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,a)=>{this._resolve=r,this._reject=a}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let t=this._beforeDismiss();nO(t)?t.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):t!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():mt(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lo(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},qf=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(qf||{}),mO=(()=>{let e=class e{constructor(){this._document=ce(Jt),this._elRef=ce(Xn),this._zone=ce(Re),this._closed$=new Pe,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new bn,this.shown=new Pe,this.hidden=new Pe}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":hw(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Kt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,s={animation:this.animation,runningTransition:"stop"},r=Di(this._zone,i,()=>i.classList.remove("show"),s),a=Di(this._zone,this._dialogEl.nativeElement,()=>{},s),c=lo(r,a);return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){let i={animation:this.animation,runningTransition:"continue"},s=Di(this._zone,this._elRef.nativeElement,(a,c)=>{c&&dw(a),a.classList.add("show")},i),r=Di(this._zone,this._dialogEl.nativeElement,()=>{},i);lo(s,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Wt(i,"keydown").pipe(Ge(this._closed$),Qe(r=>r.which===Hf.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(qf.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;Wt(this._dialogEl.nativeElement,"mousedown").pipe(Ge(this._closed$),Qt(()=>s=!1),Yn(()=>Wt(i,"mouseup").pipe(Ge(this._closed$),Kt(1))),Qe(({target:r})=>i===r)).subscribe(()=>{s=!0}),Wt(i,"click").pipe(Ge(this._closed$)).subscribe(({target:r})=>{i===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(qf.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let s=i.querySelector("[ngbAutofocus]"),r=_w(i)[0];(s||r||i).focus()}}_restoreFocus(){let i=this._document.body,s=this._elWithFocus,r;s&&s.focus&&i.contains(s)?r=s:r=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Di(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=gt({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(s,r){if(s&1&&gm(ZR,7),s&2){let a;_m(a=ym())&&(r._dialogEl=a.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,r){s&2&&(En("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),lt("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Vi("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Li],ngContentSelectors:XR,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(s,r){s&1&&(pm(),he(0,"div",1,0)(2,"div",2),mm(3),Te()()),s&2&&lt("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let n=e;return n})(),gO=(()=>{let e=class e{constructor(){this._applicationRef=ce(Bi),this._injector=ce(He),this._environmentInjector=ce(Xc),this._document=ce(Jt),this._scrollBar=ce(hO),this._activeWindowCmptHasChanged=new Pe,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new bn;let i=ce(Re);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];aO(i,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,s,r){let a=r.container instanceof HTMLElement?r.container:jf(r.container)?this._document.querySelector(r.container):this._document.body;if(!a)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let c=new vc;i=r.injector||i;let l=i.get(Xc,null)||this._environmentInjector,h=this._getContentRef(i,l,s,c,r),f=r.backdrop!==!1?this._attachBackdrop(a):void 0,m=this._attachWindowComponent(a,h.nodes),v=new Gf(m,h,f,r.beforeDismiss);return this._registerModalRef(v),this._registerWindowCmpt(m),v.hidden.pipe(Kt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),c.close=A=>{v.close(A)},c.dismiss=A=>{v.dismiss(A)},c.update=A=>{v.update(A)},v.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),f&&f.instance&&f.changeDetectorRef.detectChanges(),m.changeDetectorRef.detectChanges(),v}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(s=>s.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let s=fo(dO,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(i,s){let r=fo(mO,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_getContentRef(i,s,r,a,c){return r?r instanceof lm?this._createFromTemplateRef(r,a):hw(r)?this._createFromString(r):this._createFromComponent(i,s,r,a,c):new Ss([])}_createFromTemplateRef(i,s){let r={$implicit:s,close(c){s.close(c)},dismiss(c){s.dismiss(c)}},a=i.createEmbeddedView(r);return this._applicationRef.attachView(a),new Ss([a.rootNodes],a)}_createFromString(i){let s=this._document.createTextNode(`${i}`);return new Ss([[s]])}_createFromComponent(i,s,r,a,c){let l=He.create({providers:[{provide:vc,useValue:a}],parent:i}),h=fo(r,{environmentInjector:s,elementInjector:l}),f=h.location.nativeElement;return c.scrollable&&f.classList.add("component-host-scrollable"),this._applicationRef.attachView(h.hostView),new Ss([[f]],h.hostView,h)}_setAriaHidden(i){let s=i.parentElement;s&&i!==this._document.body&&(Array.from(s.children).forEach(r=>{r!==i&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let s=()=>{let r=this._modalRefs.indexOf(i);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(s,s)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let s=this._windowCmpts.indexOf(i);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),_O=(()=>{let e=class e{constructor(){this._injector=ce(He),this._modalStack=ce(gO),this._config=ce(uO)}open(i,s={}){let r=K(de(K({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,i,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=fe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ww=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({providers:[_O]});let n=e;return n})();var bw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Tw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Ew=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Iw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Sw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Aw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Dw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Cw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Rw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var qV=new se("live announcer delay",{providedIn:"root",factory:()=>100});var Ow=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})();var Pw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({});let n=e;return n})(),yO=[fw,pw,mw,gw,yw,vw,ww,bw,Pw,Tw,Ew,Iw,Sw,Aw,Dw,Cw,Rw,Ow],Mw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e}),e.\u0275inj=Y({imports:[yO,fw,pw,mw,gw,yw,vw,ww,bw,Pw,Tw,Ew,Iw,Sw,Aw,Dw,Cw,Rw,Ow]});let n=e;return n})();var kw=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=X({type:e,bootstrap:[s_]}),e.\u0275inj=Y({providers:[O_(()=>P_(gv)),Ay(()=>Dy()),tv(()=>nv()),pv(()=>mv())],imports:[Ui,Vo,i_,_v,lw,hl.forRoot(),hl.forFeature(mg,gg),Uv.instrument({maxAge:25,logOnly:!bm(),autoPause:!0,trace:!1,traceLimit:75,connectInZone:!0}),tw.forRoot([cw]),Mw,aw.forRoot()]});let n=e;return n})();Sm().bootstrapModule(kw).catch(n=>console.error(n));
